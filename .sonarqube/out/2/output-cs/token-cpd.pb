⁄?
oC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Data\AppDbContext.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
Data 
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{ 
	protected 
readonly 
DbContextOptions +
<+ ,
AppDbContext, 8
>8 9
_options: B
;B C
public

 
AppDbContext

 
(

 
DbContextOptions

 ,
<

, -
AppDbContext

- 9
>

9 :
options

; B
)

B C
: 	
base
 
( 
options 
) 
{ 	
_options 
= 
options 
; 
} 	
public 
DbSet 
< 
Blog 
> 
Blogs  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Post 
> 
Posts  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Author 
> 
Authors $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
Category 
> 

Categories )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 

Subscriber 
>  
Subscribers! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 

Newsletter 
>  
Newsletters! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
MailSetting  
>  !
MailSettings" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
PostCategory !
>! "
PostCategories# 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
PostCategory  ,
>, -
(- .
). /
. 
HasKey 
( 
t 
=> 
new  
{! "
t# $
.$ %
PostId% +
,+ ,
t- .
.. /

CategoryId/ 9
}: ;
); <
;< =
modelBuilder 
. 
Entity 
<  
PostCategory  ,
>, -
(- .
). /
. 
HasOne 
( 
pt 
=> 
pt  
.  !
Post! %
)% &
.   
WithMany   
(   
p   
=>   
p    
.    !
PostCategories  ! /
)  / 0
.!! 
HasForeignKey!! 
(!! 
pt!! !
=>!!" $
pt!!% '
.!!' (
PostId!!( .
)!!. /
;!!/ 0
modelBuilder## 
.## 
Entity## 
<##  
PostCategory##  ,
>##, -
(##- .
)##. /
.$$ 
HasOne$$ 
($$ 
pt$$ 
=>$$ 
pt$$  
.$$  !
Category$$! )
)$$) *
.%% 
WithMany%% 
(%% 
t%% 
=>%% 
t%%  
.%%  !
PostCategories%%! /
)%%/ 0
.&& 
HasForeignKey&& 
(&& 
pt&& !
=>&&" $
pt&&% '
.&&' (

CategoryId&&( 2
)&&2 3
;&&3 4
string(( 
sql(( 
=(( 
$str(( $
;(($ %
if** 
(** 
_options** 
.** 

Extensions** #
!=**$ &
null**' +
)**+ ,
{++ 
foreach,, 
(,, 
var,, 
ext,,  
in,,! #
_options,,$ ,
.,,, -

Extensions,,- 7
),,7 8
{-- 
if.. 
(.. 
ext.. 
... 
GetType.. #
(..# $
)..$ %
...% &
ToString..& .
(... /
)../ 0
...0 1

StartsWith..1 ;
(..; <
$str..< b
)..b c
)..c d
{// 
sql00 
=00 
$str00 +
;00+ ,
break11 
;11 
}22 
}33 
}44 
modelBuilder66 
.66 
Entity66 
<66  
Blog66  $
>66$ %
(66% &
)66& '
.66' (
Property66( 0
(660 1
b661 2
=>663 5
b666 7
.667 8
DateUpdated668 C
)66C D
.66D E
HasDefaultValueSql66E W
(66W X
sql66X [
)66[ \
;66\ ]
modelBuilder77 
.77 
Entity77 
<77  
Post77  $
>77$ %
(77% &
)77& '
.77' (
Property77( 0
(770 1
p771 2
=>773 5
p776 7
.777 8
DateUpdated778 C
)77C D
.77D E
HasDefaultValueSql77E W
(77W X
sql77X [
)77[ \
;77\ ]
modelBuilder88 
.88 
Entity88 
<88  
Author88  &
>88& '
(88' (
)88( )
.88) *
Property88* 2
(882 3
a883 4
=>885 7
a888 9
.889 :
DateUpdated88: E
)88E F
.88F G
HasDefaultValueSql88G Y
(88Y Z
sql88Z ]
)88] ^
;88^ _
modelBuilder99 
.99 
Entity99 
<99  
Category99  (
>99( )
(99) *
)99* +
.99+ ,
Property99, 4
(994 5
c995 6
=>997 9
c99: ;
.99; <
DateUpdated99< G
)99G H
.99H I
HasDefaultValueSql99I [
(99[ \
sql99\ _
)99_ `
;99` a
modelBuilder:: 
.:: 
Entity:: 
<::  

Subscriber::  *
>::* +
(::+ ,
)::, -
.::- .
Property::. 6
(::6 7
s::7 8
=>::9 ;
s::< =
.::= >
DateUpdated::> I
)::I J
.::J K
HasDefaultValueSql::K ]
(::] ^
sql::^ a
)::a b
;::b c
modelBuilder;; 
.;; 
Entity;; 
<;;  

Newsletter;;  *
>;;* +
(;;+ ,
);;, -
.;;- .
Property;;. 6
(;;6 7
n;;7 8
=>;;9 ;
n;;< =
.;;= >
DateUpdated;;> I
);;I J
.;;J K
HasDefaultValueSql;;K ]
(;;] ^
sql;;^ a
);;a b
;;;b c
modelBuilder<< 
.<< 
Entity<< 
<<<  
MailSetting<<  +
><<+ ,
(<<, -
)<<- .
.<<. /
Property<</ 7
(<<7 8
n<<8 9
=><<: <
n<<= >
.<<> ?
DateUpdated<<? J
)<<J K
.<<K L
HasDefaultValueSql<<L ^
(<<^ _
sql<<_ b
)<<b c
;<<c d
}== 	
}>> 
}?? ≥¡
ÅC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Data\Migrations\20210404234633_Init.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
Data 
. 

Migrations (
{ 
public 

partial 
class 
Init 
: 
	Migration  )
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Title 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
	maxLength? H
:H I
$numJ M
,M N
nullableO W
:W X
trueY ]
)] ^
,^ _
Description 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= C
,C D
	maxLengthE N
:N O
$numP S
,S T
nullableU ]
:] ^
true_ c
)c d
,d e
Theme 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
	maxLength? H
:H I
$numJ M
,M N
nullableO W
:W X
trueY ]
)] ^
,^ _
IncludeFeatured #
=$ %
table& +
.+ ,
Column, 2
<2 3
bool3 7
>7 8
(8 9
type9 =
:= >
$str? H
,H I
nullableJ R
:R S
falseT Y
)Y Z
,Z [
ItemsPerPage  
=! "
table# (
.( )
Column) /
</ 0
int0 3
>3 4
(4 5
type5 9
:9 :
$str; D
,D E
nullableF N
:N O
falseP U
)U V
,V W
Cover 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
	maxLength? H
:H I
$numJ M
,M N
nullableO W
:W X
trueY ]
)] ^
,^ _
Logo 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
	maxLength> G
:G H
$numI L
,L M
nullableN V
:V W
trueX \
)\ ]
,] ^
HeaderScript  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> D
,D E
	maxLengthF O
:O P
$numQ U
,U V
nullableW _
:_ `
truea e
)e f
,f g
FooterScript  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> D
,D E
	maxLengthF O
:O P
$numQ U
,U V
nullableW _
:_ `
truea e
)e f
,f g
AnalyticsListType %
=& '
table( -
.- .
Column. 4
<4 5
int5 8
>8 9
(9 :
type: >
:> ?
$str@ I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
AnalyticsPeriod #
=$ %
table& +
.+ ,
Column, 2
<2 3
int3 6
>6 7
(7 8
type8 <
:< =
$str> G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
DateCreated 
=  !
table" '
.' (
Column( .
<. /
DateTime/ 7
>7 8
(8 9
type9 =
:= >
$str? E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
DateUpdated 
=  !
table" '
.' (
Column( .
<. /
DateTime/ 7
>7 8
(8 9
type9 =
:= >
$str? E
,E F
nullableG O
:O P
falseQ V
,V W
defaultValueSqlX g
:g h
$stri v
)v w
} 
, 
constraints 
: 
table "
=># %
{ 
table   
.   

PrimaryKey   $
(  $ %
$str  % /
,  / 0
x  1 2
=>  3 5
x  6 7
.  7 8
Id  8 :
)  : ;
;  ; <
}!! 
)!! 
;!! 
migrationBuilder## 
.## 
CreateTable## (
(##( )
name$$ 
:$$ 
$str$$ "
,$$" #
columns%% 
:%% 
table%% 
=>%% !
new%%" %
{&& 
Id'' 
='' 
table'' 
.'' 
Column'' %
<''% &
int''& )
>'') *
(''* +
type''+ /
:''/ 0
$str''1 :
,'': ;
nullable''< D
:''D E
false''F K
)''K L
.(( 

Annotation(( #
(((# $
$str(($ :
,((: ;
true((< @
)((@ A
,((A B
Content)) 
=)) 
table)) #
.))# $
Column))$ *
<))* +
string))+ 1
>))1 2
())2 3
type))3 7
:))7 8
$str))9 ?
,))? @
	maxLength))A J
:))J K
$num))L O
,))O P
nullable))Q Y
:))Y Z
false))[ `
)))` a
,))a b
Description** 
=**  !
table**" '
.**' (
Column**( .
<**. /
string**/ 5
>**5 6
(**6 7
type**7 ;
:**; <
$str**= C
,**C D
	maxLength**E N
:**N O
$num**P S
,**S T
nullable**U ]
:**] ^
true**_ c
)**c d
,**d e
DateCreated++ 
=++  !
table++" '
.++' (
Column++( .
<++. /
DateTime++/ 7
>++7 8
(++8 9
type++9 =
:++= >
$str++? E
,++E F
nullable++G O
:++O P
false++Q V
)++V W
,++W X
DateUpdated,, 
=,,  !
table,," '
.,,' (
Column,,( .
<,,. /
DateTime,,/ 7
>,,7 8
(,,8 9
type,,9 =
:,,= >
$str,,? E
,,,E F
nullable,,G O
:,,O P
false,,Q V
,,,V W
defaultValueSql,,X g
:,,g h
$str,,i v
),,v w
}-- 
,-- 
constraints.. 
:.. 
table.. "
=>..# %
{// 
table00 
.00 

PrimaryKey00 $
(00$ %
$str00% 4
,004 5
x006 7
=>008 :
x00; <
.00< =
Id00= ?
)00? @
;00@ A
}11 
)11 
;11 
migrationBuilder33 
.33 
CreateTable33 (
(33( )
name44 
:44 
$str44 
,44  
columns55 
:55 
table55 
=>55 !
new55" %
{66 
Id77 
=77 
table77 
.77 
Column77 %
<77% &
int77& )
>77) *
(77* +
type77+ /
:77/ 0
$str771 :
,77: ;
nullable77< D
:77D E
false77F K
)77K L
.88 

Annotation88 #
(88# $
$str88$ :
,88: ;
true88< @
)88@ A
,88A B
Email99 
=99 
table99 !
.99! "
Column99" (
<99( )
string99) /
>99/ 0
(990 1
type991 5
:995 6
$str997 =
,99= >
	maxLength99? H
:99H I
$num99J M
,99M N
nullable99O W
:99W X
false99Y ^
)99^ _
,99_ `
Password:: 
=:: 
table:: $
.::$ %
Column::% +
<::+ ,
string::, 2
>::2 3
(::3 4
type::4 8
:::8 9
$str::: @
,::@ A
	maxLength::B K
:::K L
$num::M P
,::P Q
nullable::R Z
:::Z [
false::\ a
)::a b
,::b c
DisplayName;; 
=;;  !
table;;" '
.;;' (
Column;;( .
<;;. /
string;;/ 5
>;;5 6
(;;6 7
type;;7 ;
:;;; <
$str;;= C
,;;C D
	maxLength;;E N
:;;N O
$num;;P S
,;;S T
nullable;;U ]
:;;] ^
false;;_ d
);;d e
,;;e f
Bio<< 
=<< 
table<< 
.<<  
Column<<  &
<<<& '
string<<' -
><<- .
(<<. /
type<</ 3
:<<3 4
$str<<5 ;
,<<; <
	maxLength<<= F
:<<F G
$num<<H L
,<<L M
nullable<<N V
:<<V W
true<<X \
)<<\ ]
,<<] ^
Avatar== 
=== 
table== "
.==" #
Column==# )
<==) *
string==* 0
>==0 1
(==1 2
type==2 6
:==6 7
$str==8 >
,==> ?
	maxLength==@ I
:==I J
$num==K N
,==N O
nullable==P X
:==X Y
true==Z ^
)==^ _
,==_ `
IsAdmin>> 
=>> 
table>> #
.>># $
Column>>$ *
<>>* +
bool>>+ /
>>>/ 0
(>>0 1
type>>1 5
:>>5 6
$str>>7 @
,>>@ A
nullable>>B J
:>>J K
false>>L Q
)>>Q R
,>>R S
DateCreated?? 
=??  !
table??" '
.??' (
Column??( .
<??. /
DateTime??/ 7
>??7 8
(??8 9
type??9 =
:??= >
$str??? E
,??E F
nullable??G O
:??O P
false??Q V
)??V W
,??W X
DateUpdated@@ 
=@@  !
table@@" '
.@@' (
Column@@( .
<@@. /
DateTime@@/ 7
>@@7 8
(@@8 9
type@@9 =
:@@= >
$str@@? E
,@@E F
nullable@@G O
:@@O P
false@@Q V
,@@V W
defaultValueSql@@X g
:@@g h
$str@@i v
)@@v w
,@@w x
BlogIdAA 
=AA 
tableAA "
.AA" #
ColumnAA# )
<AA) *
intAA* -
>AA- .
(AA. /
typeAA/ 3
:AA3 4
$strAA5 >
,AA> ?
nullableAA@ H
:AAH I
trueAAJ N
)AAN O
}BB 
,BB 
constraintsCC 
:CC 
tableCC "
=>CC# %
{DD 
tableEE 
.EE 

PrimaryKeyEE $
(EE$ %
$strEE% 1
,EE1 2
xEE3 4
=>EE5 7
xEE8 9
.EE9 :
IdEE: <
)EE< =
;EE= >
tableFF 
.FF 

ForeignKeyFF $
(FF$ %
nameGG 
:GG 
$strGG 7
,GG7 8
columnHH 
:HH 
xHH  !
=>HH" $
xHH% &
.HH& '
BlogIdHH' -
,HH- .
principalTableII &
:II& '
$strII( /
,II/ 0
principalColumnJJ '
:JJ' (
$strJJ) -
,JJ- .
onDeleteKK  
:KK  !
ReferentialActionKK" 3
.KK3 4
RestrictKK4 <
)KK< =
;KK= >
}LL 
)LL 
;LL 
migrationBuilderNN 
.NN 
CreateTableNN (
(NN( )
nameOO 
:OO 
$strOO $
,OO$ %
columnsPP 
:PP 
tablePP 
=>PP !
newPP" %
{QQ 
IdRR 
=RR 
tableRR 
.RR 
ColumnRR %
<RR% &
intRR& )
>RR) *
(RR* +
typeRR+ /
:RR/ 0
$strRR1 :
,RR: ;
nullableRR< D
:RRD E
falseRRF K
)RRK L
.SS 

AnnotationSS #
(SS# $
$strSS$ :
,SS: ;
trueSS< @
)SS@ A
,SSA B
HostTT 
=TT 
tableTT  
.TT  !
ColumnTT! '
<TT' (
stringTT( .
>TT. /
(TT/ 0
typeTT0 4
:TT4 5
$strTT6 <
,TT< =
	maxLengthTT> G
:TTG H
$numTTI L
,TTL M
nullableTTN V
:TTV W
falseTTX ]
)TT] ^
,TT^ _
PortUU 
=UU 
tableUU  
.UU  !
ColumnUU! '
<UU' (
intUU( +
>UU+ ,
(UU, -
typeUU- 1
:UU1 2
$strUU3 <
,UU< =
nullableUU> F
:UUF G
falseUUH M
)UUM N
,UUN O
	UserEmailVV 
=VV 
tableVV  %
.VV% &
ColumnVV& ,
<VV, -
stringVV- 3
>VV3 4
(VV4 5
typeVV5 9
:VV9 :
$strVV; A
,VVA B
	maxLengthVVC L
:VVL M
$numVVN Q
,VVQ R
nullableVVS [
:VV[ \
falseVV] b
)VVb c
,VVc d
UserPasswordWW  
=WW! "
tableWW# (
.WW( )
ColumnWW) /
<WW/ 0
stringWW0 6
>WW6 7
(WW7 8
typeWW8 <
:WW< =
$strWW> D
,WWD E
	maxLengthWWF O
:WWO P
$numWWQ T
,WWT U
nullableWWV ^
:WW^ _
falseWW` e
)WWe f
,WWf g
FromNameXX 
=XX 
tableXX $
.XX$ %
ColumnXX% +
<XX+ ,
stringXX, 2
>XX2 3
(XX3 4
typeXX4 8
:XX8 9
$strXX: @
,XX@ A
	maxLengthXXB K
:XXK L
$numXXM P
,XXP Q
nullableXXR Z
:XXZ [
falseXX\ a
)XXa b
,XXb c
	FromEmailYY 
=YY 
tableYY  %
.YY% &
ColumnYY& ,
<YY, -
stringYY- 3
>YY3 4
(YY4 5
typeYY5 9
:YY9 :
$strYY; A
,YYA B
	maxLengthYYC L
:YYL M
$numYYN Q
,YYQ R
nullableYYS [
:YY[ \
falseYY] b
)YYb c
,YYc d
ToNameZZ 
=ZZ 
tableZZ "
.ZZ" #
ColumnZZ# )
<ZZ) *
stringZZ* 0
>ZZ0 1
(ZZ1 2
typeZZ2 6
:ZZ6 7
$strZZ8 >
,ZZ> ?
	maxLengthZZ@ I
:ZZI J
$numZZK N
,ZZN O
nullableZZP X
:ZZX Y
falseZZZ _
)ZZ_ `
,ZZ` a
Enabled[[ 
=[[ 
table[[ #
.[[# $
Column[[$ *
<[[* +
bool[[+ /
>[[/ 0
([[0 1
type[[1 5
:[[5 6
$str[[7 @
,[[@ A
nullable[[B J
:[[J K
false[[L Q
)[[Q R
,[[R S
DateCreated\\ 
=\\  !
table\\" '
.\\' (
Column\\( .
<\\. /
DateTime\\/ 7
>\\7 8
(\\8 9
type\\9 =
:\\= >
$str\\? E
,\\E F
nullable\\G O
:\\O P
false\\Q V
)\\V W
,\\W X
DateUpdated]] 
=]]  !
table]]" '
.]]' (
Column]]( .
<]]. /
DateTime]]/ 7
>]]7 8
(]]8 9
type]]9 =
:]]= >
$str]]? E
,]]E F
nullable]]G O
:]]O P
false]]Q V
,]]V W
defaultValueSql]]X g
:]]g h
$str]]i v
)]]v w
,]]w x
BlogId^^ 
=^^ 
table^^ "
.^^" #
Column^^# )
<^^) *
int^^* -
>^^- .
(^^. /
type^^/ 3
:^^3 4
$str^^5 >
,^^> ?
nullable^^@ H
:^^H I
true^^J N
)^^N O
}__ 
,__ 
constraints`` 
:`` 
table`` "
=>``# %
{aa 
tablebb 
.bb 

PrimaryKeybb $
(bb$ %
$strbb% 6
,bb6 7
xbb8 9
=>bb: <
xbb= >
.bb> ?
Idbb? A
)bbA B
;bbB C
tablecc 
.cc 

ForeignKeycc $
(cc$ %
namedd 
:dd 
$strdd <
,dd< =
columnee 
:ee 
xee  !
=>ee" $
xee% &
.ee& '
BlogIdee' -
,ee- .
principalTableff &
:ff& '
$strff( /
,ff/ 0
principalColumngg '
:gg' (
$strgg) -
,gg- .
onDeletehh  
:hh  !
ReferentialActionhh" 3
.hh3 4
Restricthh4 <
)hh< =
;hh= >
}ii 
)ii 
;ii 
migrationBuilderkk 
.kk 
CreateTablekk (
(kk( )
namell 
:ll 
$strll #
,ll# $
columnsmm 
:mm 
tablemm 
=>mm !
newmm" %
{nn 
Idoo 
=oo 
tableoo 
.oo 
Columnoo %
<oo% &
intoo& )
>oo) *
(oo* +
typeoo+ /
:oo/ 0
$stroo1 :
,oo: ;
nullableoo< D
:ooD E
falseooF K
)ooK L
.pp 

Annotationpp #
(pp# $
$strpp$ :
,pp: ;
truepp< @
)pp@ A
,ppA B
Emailqq 
=qq 
tableqq !
.qq! "
Columnqq" (
<qq( )
stringqq) /
>qq/ 0
(qq0 1
typeqq1 5
:qq5 6
$strqq7 =
,qq= >
	maxLengthqq? H
:qqH I
$numqqJ M
,qqM N
nullableqqO W
:qqW X
falseqqY ^
)qq^ _
,qq_ `
Iprr 
=rr 
tablerr 
.rr 
Columnrr %
<rr% &
stringrr& ,
>rr, -
(rr- .
typerr. 2
:rr2 3
$strrr4 :
,rr: ;
	maxLengthrr< E
:rrE F
$numrrG I
,rrI J
nullablerrK S
:rrS T
truerrU Y
)rrY Z
,rrZ [
Countryss 
=ss 
tabless #
.ss# $
Columnss$ *
<ss* +
stringss+ 1
>ss1 2
(ss2 3
typess3 7
:ss7 8
$strss9 ?
,ss? @
	maxLengthssA J
:ssJ K
$numssL O
,ssO P
nullablessQ Y
:ssY Z
truess[ _
)ss_ `
,ss` a
Regiontt 
=tt 
tablett "
.tt" #
Columntt# )
<tt) *
stringtt* 0
>tt0 1
(tt1 2
typett2 6
:tt6 7
$strtt8 >
,tt> ?
	maxLengthtt@ I
:ttI J
$numttK N
,ttN O
nullablettP X
:ttX Y
truettZ ^
)tt^ _
,tt_ `
DateCreateduu 
=uu  !
tableuu" '
.uu' (
Columnuu( .
<uu. /
DateTimeuu/ 7
>uu7 8
(uu8 9
typeuu9 =
:uu= >
$struu? E
,uuE F
nullableuuG O
:uuO P
falseuuQ V
)uuV W
,uuW X
DateUpdatedvv 
=vv  !
tablevv" '
.vv' (
Columnvv( .
<vv. /
DateTimevv/ 7
>vv7 8
(vv8 9
typevv9 =
:vv= >
$strvv? E
,vvE F
nullablevvG O
:vvO P
falsevvQ V
,vvV W
defaultValueSqlvvX g
:vvg h
$strvvi v
)vvv w
,vvw x
BlogIdww 
=ww 
tableww "
.ww" #
Columnww# )
<ww) *
intww* -
>ww- .
(ww. /
typeww/ 3
:ww3 4
$strww5 >
,ww> ?
nullableww@ H
:wwH I
truewwJ N
)wwN O
}xx 
,xx 
constraintsyy 
:yy 
tableyy "
=>yy# %
{zz 
table{{ 
.{{ 

PrimaryKey{{ $
({{$ %
$str{{% 5
,{{5 6
x{{7 8
=>{{9 ;
x{{< =
.{{= >
Id{{> @
){{@ A
;{{A B
table|| 
.|| 

ForeignKey|| $
(||$ %
name}} 
:}} 
$str}} ;
,}}; <
column~~ 
:~~ 
x~~  !
=>~~" $
x~~% &
.~~& '
BlogId~~' -
,~~- .
principalTable &
:& '
$str( /
,/ 0
principalColumn
ÄÄ '
:
ÄÄ' (
$str
ÄÄ) -
,
ÄÄ- .
onDelete
ÅÅ  
:
ÅÅ  !
ReferentialAction
ÅÅ" 3
.
ÅÅ3 4
Restrict
ÅÅ4 <
)
ÅÅ< =
;
ÅÅ= >
}
ÇÇ 
)
ÇÇ 
;
ÇÇ 
migrationBuilder
ÑÑ 
.
ÑÑ 
CreateTable
ÑÑ (
(
ÑÑ( )
name
ÖÖ 
:
ÖÖ 
$str
ÖÖ 
,
ÖÖ 
columns
ÜÜ 
:
ÜÜ 
table
ÜÜ 
=>
ÜÜ !
new
ÜÜ" %
{
áá 
Id
àà 
=
àà 
table
àà 
.
àà 
Column
àà %
<
àà% &
int
àà& )
>
àà) *
(
àà* +
type
àà+ /
:
àà/ 0
$str
àà1 :
,
àà: ;
nullable
àà< D
:
ààD E
false
ààF K
)
ààK L
.
ââ 

Annotation
ââ #
(
ââ# $
$str
ââ$ :
,
ââ: ;
true
ââ< @
)
ââ@ A
,
ââA B
AuthorId
ää 
=
ää 
table
ää $
.
ää$ %
Column
ää% +
<
ää+ ,
int
ää, /
>
ää/ 0
(
ää0 1
type
ää1 5
:
ää5 6
$str
ää7 @
,
ää@ A
nullable
ääB J
:
ääJ K
false
ääL Q
)
ääQ R
,
ääR S
PostType
ãã 
=
ãã 
table
ãã $
.
ãã$ %
Column
ãã% +
<
ãã+ ,
int
ãã, /
>
ãã/ 0
(
ãã0 1
type
ãã1 5
:
ãã5 6
$str
ãã7 @
,
ãã@ A
nullable
ããB J
:
ããJ K
false
ããL Q
)
ããQ R
,
ããR S
Title
åå 
=
åå 
table
åå !
.
åå! "
Column
åå" (
<
åå( )
string
åå) /
>
åå/ 0
(
åå0 1
type
åå1 5
:
åå5 6
$str
åå7 =
,
åå= >
	maxLength
åå? H
:
ååH I
$num
ååJ M
,
ååM N
nullable
ååO W
:
ååW X
false
ååY ^
)
åå^ _
,
åå_ `
Slug
çç 
=
çç 
table
çç  
.
çç  !
Column
çç! '
<
çç' (
string
çç( .
>
çç. /
(
çç/ 0
type
çç0 4
:
çç4 5
$str
çç6 <
,
çç< =
	maxLength
çç> G
:
ççG H
$num
ççI L
,
ççL M
nullable
ççN V
:
ççV W
false
ççX ]
)
çç] ^
,
çç^ _
Description
éé 
=
éé  !
table
éé" '
.
éé' (
Column
éé( .
<
éé. /
string
éé/ 5
>
éé5 6
(
éé6 7
type
éé7 ;
:
éé; <
$str
éé= C
,
ééC D
	maxLength
ééE N
:
ééN O
$num
ééP S
,
ééS T
nullable
ééU ]
:
éé] ^
false
éé_ d
)
ééd e
,
éée f
Content
èè 
=
èè 
table
èè #
.
èè# $
Column
èè$ *
<
èè* +
string
èè+ 1
>
èè1 2
(
èè2 3
type
èè3 7
:
èè7 8
$str
èè9 ?
,
èè? @
nullable
èèA I
:
èèI J
false
èèK P
)
èèP Q
,
èèQ R
Cover
êê 
=
êê 
table
êê !
.
êê! "
Column
êê" (
<
êê( )
string
êê) /
>
êê/ 0
(
êê0 1
type
êê1 5
:
êê5 6
$str
êê7 =
,
êê= >
	maxLength
êê? H
:
êêH I
$num
êêJ M
,
êêM N
nullable
êêO W
:
êêW X
true
êêY ]
)
êê] ^
,
êê^ _
	PostViews
ëë 
=
ëë 
table
ëë  %
.
ëë% &
Column
ëë& ,
<
ëë, -
int
ëë- 0
>
ëë0 1
(
ëë1 2
type
ëë2 6
:
ëë6 7
$str
ëë8 A
,
ëëA B
nullable
ëëC K
:
ëëK L
false
ëëM R
)
ëëR S
,
ëëS T
Rating
íí 
=
íí 
table
íí "
.
íí" #
Column
íí# )
<
íí) *
double
íí* 0
>
íí0 1
(
íí1 2
type
íí2 6
:
íí6 7
$str
íí8 >
,
íí> ?
nullable
íí@ H
:
ííH I
false
ííJ O
)
ííO P
,
ííP Q

IsFeatured
ìì 
=
ìì  
table
ìì! &
.
ìì& '
Column
ìì' -
<
ìì- .
bool
ìì. 2
>
ìì2 3
(
ìì3 4
type
ìì4 8
:
ìì8 9
$str
ìì: C
,
ììC D
nullable
ììE M
:
ììM N
false
ììO T
)
ììT U
,
ììU V
Selected
îî 
=
îî 
table
îî $
.
îî$ %
Column
îî% +
<
îî+ ,
bool
îî, 0
>
îî0 1
(
îî1 2
type
îî2 6
:
îî6 7
$str
îî8 A
,
îîA B
nullable
îîC K
:
îîK L
false
îîM R
)
îîR S
,
îîS T
	Published
ïï 
=
ïï 
table
ïï  %
.
ïï% &
Column
ïï& ,
<
ïï, -
DateTime
ïï- 5
>
ïï5 6
(
ïï6 7
type
ïï7 ;
:
ïï; <
$str
ïï= C
,
ïïC D
nullable
ïïE M
:
ïïM N
false
ïïO T
)
ïïT U
,
ïïU V
DateCreated
ññ 
=
ññ  !
table
ññ" '
.
ññ' (
Column
ññ( .
<
ññ. /
DateTime
ññ/ 7
>
ññ7 8
(
ññ8 9
type
ññ9 =
:
ññ= >
$str
ññ? E
,
ññE F
nullable
ññG O
:
ññO P
false
ññQ V
)
ññV W
,
ññW X
DateUpdated
óó 
=
óó  !
table
óó" '
.
óó' (
Column
óó( .
<
óó. /
DateTime
óó/ 7
>
óó7 8
(
óó8 9
type
óó9 =
:
óó= >
$str
óó? E
,
óóE F
nullable
óóG O
:
óóO P
false
óóQ V
,
óóV W
defaultValueSql
óóX g
:
óóg h
$str
óói v
)
óóv w
,
óów x
BlogId
òò 
=
òò 
table
òò "
.
òò" #
Column
òò# )
<
òò) *
int
òò* -
>
òò- .
(
òò. /
type
òò/ 3
:
òò3 4
$str
òò5 >
,
òò> ?
nullable
òò@ H
:
òòH I
true
òòJ N
)
òòN O
}
ôô 
,
ôô 
constraints
öö 
:
öö 
table
öö "
=>
öö# %
{
õõ 
table
úú 
.
úú 

PrimaryKey
úú $
(
úú$ %
$str
úú% /
,
úú/ 0
x
úú1 2
=>
úú3 5
x
úú6 7
.
úú7 8
Id
úú8 :
)
úú: ;
;
úú; <
table
ùù 
.
ùù 

ForeignKey
ùù $
(
ùù$ %
name
ûû 
:
ûû 
$str
ûû 9
,
ûû9 :
column
üü 
:
üü 
x
üü  !
=>
üü" $
x
üü% &
.
üü& '
AuthorId
üü' /
,
üü/ 0
principalTable
†† &
:
††& '
$str
††( 1
,
††1 2
principalColumn
°° '
:
°°' (
$str
°°) -
,
°°- .
onDelete
¢¢  
:
¢¢  !
ReferentialAction
¢¢" 3
.
¢¢3 4
Cascade
¢¢4 ;
)
¢¢; <
;
¢¢< =
table
££ 
.
££ 

ForeignKey
££ $
(
££$ %
name
§§ 
:
§§ 
$str
§§ 5
,
§§5 6
column
•• 
:
•• 
x
••  !
=>
••" $
x
••% &
.
••& '
BlogId
••' -
,
••- .
principalTable
¶¶ &
:
¶¶& '
$str
¶¶( /
,
¶¶/ 0
principalColumn
ßß '
:
ßß' (
$str
ßß) -
,
ßß- .
onDelete
®®  
:
®®  !
ReferentialAction
®®" 3
.
®®3 4
Restrict
®®4 <
)
®®< =
;
®®= >
}
©© 
)
©© 
;
©© 
migrationBuilder
´´ 
.
´´ 
CreateTable
´´ (
(
´´( )
name
¨¨ 
:
¨¨ 
$str
¨¨ #
,
¨¨# $
columns
≠≠ 
:
≠≠ 
table
≠≠ 
=>
≠≠ !
new
≠≠" %
{
ÆÆ 
Id
ØØ 
=
ØØ 
table
ØØ 
.
ØØ 
Column
ØØ %
<
ØØ% &
int
ØØ& )
>
ØØ) *
(
ØØ* +
type
ØØ+ /
:
ØØ/ 0
$str
ØØ1 :
,
ØØ: ;
nullable
ØØ< D
:
ØØD E
false
ØØF K
)
ØØK L
.
∞∞ 

Annotation
∞∞ #
(
∞∞# $
$str
∞∞$ :
,
∞∞: ;
true
∞∞< @
)
∞∞@ A
,
∞∞A B
PostId
±± 
=
±± 
table
±± "
.
±±" #
Column
±±# )
<
±±) *
int
±±* -
>
±±- .
(
±±. /
type
±±/ 3
:
±±3 4
$str
±±5 >
,
±±> ?
nullable
±±@ H
:
±±H I
false
±±J O
)
±±O P
,
±±P Q
Success
≤≤ 
=
≤≤ 
table
≤≤ #
.
≤≤# $
Column
≤≤$ *
<
≤≤* +
bool
≤≤+ /
>
≤≤/ 0
(
≤≤0 1
type
≤≤1 5
:
≤≤5 6
$str
≤≤7 @
,
≤≤@ A
nullable
≤≤B J
:
≤≤J K
false
≤≤L Q
)
≤≤Q R
,
≤≤R S
DateCreated
≥≥ 
=
≥≥  !
table
≥≥" '
.
≥≥' (
Column
≥≥( .
<
≥≥. /
DateTime
≥≥/ 7
>
≥≥7 8
(
≥≥8 9
type
≥≥9 =
:
≥≥= >
$str
≥≥? E
,
≥≥E F
nullable
≥≥G O
:
≥≥O P
false
≥≥Q V
)
≥≥V W
,
≥≥W X
DateUpdated
¥¥ 
=
¥¥  !
table
¥¥" '
.
¥¥' (
Column
¥¥( .
<
¥¥. /
DateTime
¥¥/ 7
>
¥¥7 8
(
¥¥8 9
type
¥¥9 =
:
¥¥= >
$str
¥¥? E
,
¥¥E F
nullable
¥¥G O
:
¥¥O P
false
¥¥Q V
,
¥¥V W
defaultValueSql
¥¥X g
:
¥¥g h
$str
¥¥i v
)
¥¥v w
}
µµ 
,
µµ 
constraints
∂∂ 
:
∂∂ 
table
∂∂ "
=>
∂∂# %
{
∑∑ 
table
∏∏ 
.
∏∏ 

PrimaryKey
∏∏ $
(
∏∏$ %
$str
∏∏% 5
,
∏∏5 6
x
∏∏7 8
=>
∏∏9 ;
x
∏∏< =
.
∏∏= >
Id
∏∏> @
)
∏∏@ A
;
∏∏A B
table
ππ 
.
ππ 

ForeignKey
ππ $
(
ππ$ %
name
∫∫ 
:
∫∫ 
$str
∫∫ ;
,
∫∫; <
column
ªª 
:
ªª 
x
ªª  !
=>
ªª" $
x
ªª% &
.
ªª& '
PostId
ªª' -
,
ªª- .
principalTable
ºº &
:
ºº& '
$str
ºº( /
,
ºº/ 0
principalColumn
ΩΩ '
:
ΩΩ' (
$str
ΩΩ) -
,
ΩΩ- .
onDelete
ææ  
:
ææ  !
ReferentialAction
ææ" 3
.
ææ3 4
Cascade
ææ4 ;
)
ææ; <
;
ææ< =
}
øø 
)
øø 
;
øø 
migrationBuilder
¡¡ 
.
¡¡ 
CreateTable
¡¡ (
(
¡¡( )
name
¬¬ 
:
¬¬ 
$str
¬¬ &
,
¬¬& '
columns
√√ 
:
√√ 
table
√√ 
=>
√√ !
new
√√" %
{
ƒƒ 
PostId
≈≈ 
=
≈≈ 
table
≈≈ "
.
≈≈" #
Column
≈≈# )
<
≈≈) *
int
≈≈* -
>
≈≈- .
(
≈≈. /
type
≈≈/ 3
:
≈≈3 4
$str
≈≈5 >
,
≈≈> ?
nullable
≈≈@ H
:
≈≈H I
false
≈≈J O
)
≈≈O P
,
≈≈P Q

CategoryId
∆∆ 
=
∆∆  
table
∆∆! &
.
∆∆& '
Column
∆∆' -
<
∆∆- .
int
∆∆. 1
>
∆∆1 2
(
∆∆2 3
type
∆∆3 7
:
∆∆7 8
$str
∆∆9 B
,
∆∆B C
nullable
∆∆D L
:
∆∆L M
false
∆∆N S
)
∆∆S T
}
«« 
,
«« 
constraints
»» 
:
»» 
table
»» "
=>
»»# %
{
…… 
table
   
.
   

PrimaryKey
   $
(
  $ %
$str
  % 8
,
  8 9
x
  : ;
=>
  < >
new
  ? B
{
  C D
x
  E F
.
  F G
PostId
  G M
,
  M N
x
  O P
.
  P Q

CategoryId
  Q [
}
  \ ]
)
  ] ^
;
  ^ _
table
ÀÀ 
.
ÀÀ 

ForeignKey
ÀÀ $
(
ÀÀ$ %
name
ÃÃ 
:
ÃÃ 
$str
ÃÃ G
,
ÃÃG H
column
ÕÕ 
:
ÕÕ 
x
ÕÕ  !
=>
ÕÕ" $
x
ÕÕ% &
.
ÕÕ& '

CategoryId
ÕÕ' 1
,
ÕÕ1 2
principalTable
ŒŒ &
:
ŒŒ& '
$str
ŒŒ( 4
,
ŒŒ4 5
principalColumn
œœ '
:
œœ' (
$str
œœ) -
,
œœ- .
onDelete
––  
:
––  !
ReferentialAction
––" 3
.
––3 4
Cascade
––4 ;
)
––; <
;
––< =
table
—— 
.
—— 

ForeignKey
—— $
(
——$ %
name
““ 
:
““ 
$str
““ >
,
““> ?
column
”” 
:
”” 
x
””  !
=>
””" $
x
””% &
.
””& '
PostId
””' -
,
””- .
principalTable
‘‘ &
:
‘‘& '
$str
‘‘( /
,
‘‘/ 0
principalColumn
’’ '
:
’’' (
$str
’’) -
,
’’- .
onDelete
÷÷  
:
÷÷  !
ReferentialAction
÷÷" 3
.
÷÷3 4
Cascade
÷÷4 ;
)
÷÷; <
;
÷÷< =
}
◊◊ 
)
◊◊ 
;
◊◊ 
migrationBuilder
ŸŸ 
.
ŸŸ 
CreateIndex
ŸŸ (
(
ŸŸ( )
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ )
,
⁄⁄) *
table
€€ 
:
€€ 
$str
€€  
,
€€  !
column
‹‹ 
:
‹‹ 
$str
‹‹  
)
‹‹  !
;
‹‹! "
migrationBuilder
ﬁﬁ 
.
ﬁﬁ 
CreateIndex
ﬁﬁ (
(
ﬁﬁ( )
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ .
,
ﬂﬂ. /
table
‡‡ 
:
‡‡ 
$str
‡‡ %
,
‡‡% &
column
·· 
:
·· 
$str
··  
)
··  !
;
··! "
migrationBuilder
„„ 
.
„„ 
CreateIndex
„„ (
(
„„( )
name
‰‰ 
:
‰‰ 
$str
‰‰ -
,
‰‰- .
table
ÂÂ 
:
ÂÂ 
$str
ÂÂ $
,
ÂÂ$ %
column
ÊÊ 
:
ÊÊ 
$str
ÊÊ  
)
ÊÊ  !
;
ÊÊ! "
migrationBuilder
ËË 
.
ËË 
CreateIndex
ËË (
(
ËË( )
name
ÈÈ 
:
ÈÈ 
$str
ÈÈ 4
,
ÈÈ4 5
table
ÍÍ 
:
ÍÍ 
$str
ÍÍ '
,
ÍÍ' (
column
ÎÎ 
:
ÎÎ 
$str
ÎÎ $
)
ÎÎ$ %
;
ÎÎ% &
migrationBuilder
ÌÌ 
.
ÌÌ 
CreateIndex
ÌÌ (
(
ÌÌ( )
name
ÓÓ 
:
ÓÓ 
$str
ÓÓ )
,
ÓÓ) *
table
ÔÔ 
:
ÔÔ 
$str
ÔÔ 
,
ÔÔ 
column
 
:
 
$str
 "
)
" #
;
# $
migrationBuilder
ÚÚ 
.
ÚÚ 
CreateIndex
ÚÚ (
(
ÚÚ( )
name
ÛÛ 
:
ÛÛ 
$str
ÛÛ '
,
ÛÛ' (
table
ÙÙ 
:
ÙÙ 
$str
ÙÙ 
,
ÙÙ 
column
ıı 
:
ıı 
$str
ıı  
)
ıı  !
;
ıı! "
migrationBuilder
˜˜ 
.
˜˜ 
CreateIndex
˜˜ (
(
˜˜( )
name
¯¯ 
:
¯¯ 
$str
¯¯ -
,
¯¯- .
table
˘˘ 
:
˘˘ 
$str
˘˘ $
,
˘˘$ %
column
˙˙ 
:
˙˙ 
$str
˙˙  
)
˙˙  !
;
˙˙! "
}
˚˚ 	
	protected
˝˝ 
override
˝˝ 
void
˝˝ 
Down
˝˝  $
(
˝˝$ %
MigrationBuilder
˝˝% 5
migrationBuilder
˝˝6 F
)
˝˝F G
{
˛˛ 	
migrationBuilder
ˇˇ 
.
ˇˇ 
	DropTable
ˇˇ &
(
ˇˇ& '
name
ÄÄ 
:
ÄÄ 
$str
ÄÄ $
)
ÄÄ$ %
;
ÄÄ% &
migrationBuilder
ÇÇ 
.
ÇÇ 
	DropTable
ÇÇ &
(
ÇÇ& '
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ #
)
ÉÉ# $
;
ÉÉ$ %
migrationBuilder
ÖÖ 
.
ÖÖ 
	DropTable
ÖÖ &
(
ÖÖ& '
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ &
)
ÜÜ& '
;
ÜÜ' (
migrationBuilder
àà 
.
àà 
	DropTable
àà &
(
àà& '
name
ââ 
:
ââ 
$str
ââ #
)
ââ# $
;
ââ$ %
migrationBuilder
ãã 
.
ãã 
	DropTable
ãã &
(
ãã& '
name
åå 
:
åå 
$str
åå "
)
åå" #
;
åå# $
migrationBuilder
éé 
.
éé 
	DropTable
éé &
(
éé& '
name
èè 
:
èè 
$str
èè 
)
èè 
;
èè 
migrationBuilder
ëë 
.
ëë 
	DropTable
ëë &
(
ëë& '
name
íí 
:
íí 
$str
íí 
)
íí  
;
íí  !
migrationBuilder
îî 
.
îî 
	DropTable
îî &
(
îî& '
name
ïï 
:
ïï 
$str
ïï 
)
ïï 
;
ïï 
}
ññ 	
}
óó 
}òò «.
ÑC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Extensions\ServiceCollectionExtensions.cs
	namespace		 	
	Blogifier		
 
.		 
Core		 
.		 

Extensions		 #
{

 
public 
static 
class '
ServiceCollectionExtensions 0
{ 
public 
static 
IServiceCollection &
AddBlogDatabase' 6
(6 7
this7 ;
IServiceCollection< N
servicesO W
,W X
IConfigurationY g
configurationh u
)u v
{ 
var 
section 
= 
configuration 
. 

GetSection )
() *
$str* 5
)5 6
;6 7
var 
conn 
= 
section 
. 
GetValue 
< 
string %
>% &
(& '
$str' 3
)3 4
;4 5
if 
( 
section 
. 
GetValue 
< 
string 
> 
(  
$str  ,
), -
==. 0
$str1 9
)9 :
services 
. 
AddDbContext 
< 
AppDbContext &
>& '
(' (
o( )
=>* ,
o- .
.. /
	UseSqlite/ 8
(8 9
conn9 =
)= >
)> ?
;? @
if 
( 
section 
. 
GetValue 
< 
string 
> 
(  
$str  ,
), -
==. 0
$str1 <
)< =
services 
. 
AddDbContext 
< 
AppDbContext &
>& '
(' (
o( )
=>* ,
o- .
.. /
UseSqlServer/ ;
(; <
conn< @
)@ A
)A B
;B C
if 
( 
section 
. 
GetValue 
< 
string 
> 
(  
$str  ,
), -
==. 0
$str1 ;
); <
services 
. 
AddDbContext 
< 
AppDbContext &
>& '
(' (
o( )
=>* ,
o- .
.. /
	UseNpgsql/ 8
(8 9
conn9 =
)= >
)> ?
;? @
if 
( 
section 
. 
GetValue 
< 
string 
> 
(  
$str  ,
), -
==. 0
$str1 8
)8 9
{ 
}%% 
services&& 
.&& 3
'AddDatabaseDeveloperPageExceptionFilter&& 3
(&&3 4
)&&4 5
;&&5 6
return'' 	
services''
 
;'' 
}(( 
public** 
static**	 
IServiceCollection** "
AddBlogProviders**# 3
(**3 4
this**4 8
IServiceCollection**9 K
services**L T
)**T U
{++ 
services,, 
.,, 
	AddScoped,, 
<,, 
IAuthorProvider,, %
,,,% &
AuthorProvider,,' 5
>,,5 6
(,,6 7
),,7 8
;,,8 9
services-- 
.-- 
	AddScoped-- 
<-- 
IBlogProvider-- #
,--# $
BlogProvider--% 1
>--1 2
(--2 3
)--3 4
;--4 5
services.. 
... 
	AddScoped.. 
<.. 
IPostProvider.. #
,..# $
PostProvider..% 1
>..1 2
(..2 3
)..3 4
;..4 5
services// 
.// 
	AddScoped// 
<// 
IStorageProvider// &
,//& '
StorageProvider//( 7
>//7 8
(//8 9
)//9 :
;//: ;
services00 
.00 
	AddScoped00 
<00 
IFeedProvider00 #
,00# $
FeedProvider00% 1
>001 2
(002 3
)003 4
;004 5
services11 
.11 
	AddScoped11 
<11 
ICategoryProvider11 '
,11' (
CategoryProvider11) 9
>119 :
(11: ;
)11; <
;11< =
services22 
.22 
	AddScoped22 
<22 
IAnalyticsProvider22 (
,22( )
AnalyticsProvider22* ;
>22; <
(22< =
)22= >
;22> ?
services33 
.33 
	AddScoped33 
<33 
INewsletterProvider33 )
,33) *
NewsletterProvider33+ =
>33= >
(33> ?
)33? @
;33@ A
services44 
.44 
	AddScoped44 
<44 
IEmailProvider44 $
,44$ %
MailKitProvider44& 5
>445 6
(446 7
)447 8
;448 9
services55 
.55 
	AddScoped55 
<55 
IThemeProvider55 $
,55$ %
ThemeProvider55& 3
>553 4
(554 5
)555 6
;556 7
services66 
.66 
	AddScoped66 
<66  
ISyndicationProvider66 *
,66* +
SyndicationProvider66, ?
>66? @
(66@ A
)66A B
;66B C
services77 
.77 
	AddScoped77 
<77 
IAboutProvider77 $
,77$ %
AboutProvider77& 3
>773 4
(774 5
)775 6
;776 7
return99 	
services99
 
;99 
}:: 
};; 
}<< ±î
yC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Extensions\StringExtensions.cs
	namespace		 	
	Blogifier		
 
.		 
Core		 
.		 

Extensions		 #
{

 
public 
static 
class 
StringExtensions %
{ 
public 
static 
string 
ToThumb "
(" #
this# '
string( .
img/ 2
)2 3
{ 
if	 
( 
img 
. 
IndexOf 
( 
$char 
) 
< 
$num  !
)! "
return# )
img* -
;- .
var	 
first 
= 
img 
. 
	Substring "
(" #
$num# $
,$ %
img& )
.) *
LastIndexOf* 5
(5 6
$char6 9
)9 :
): ;
;; <
var	 
second 
= 
img 
. 
	Substring #
(# $
img$ '
.' (
LastIndexOf( 3
(3 4
$char4 7
)7 8
)8 9
;9 :
return	 
$" 
{ 
first 
} 
$str  
{  !
second! '
}' (
"( )
;) *
} 
public 
static 
string 

Capitalize %
(% &
this& *
string+ 1
str2 5
)5 6
{ 
if	 
( 
string 
. 
IsNullOrEmpty !
(! "
str" %
)% &
)& '
return 
string 
. 
Empty 
;  
char	 
[ 
] 
a 
= 
str 
. 
ToCharArray #
(# $
)$ %
;% &
a	 

[
 
$num 
] 
= 
char 
. 
ToUpper 
( 
a 
[ 
$num  
]  !
)! "
;" #
return	 
new 
string 
( 
a 
) 
; 
} 
public   
static   
string   
MdToHtml   #
(  # $
this  $ (
string  ) /
str  0 3
)  3 4
{!! 
var""	 
mpl"" 
="" 
new"" #
MarkdownPipelineBuilder"" .
("". /
)""/ 0
.## 
UsePipeTables## 
(## 
)## 
.$$ !
UseAdvancedExtensions$$ #
($$# $
)$$$ %
.%% 
Build%% 
(%% 
)%% 
;%% 
return''	 
Markdown'' 
.'' 
ToHtml'' 
(''  
str''  #
,''# $
mpl''% (
)''( )
;'') *
}(( 
public** 
static** 
bool** 
Contains** !
(**! "
this**" &
string**' -
source**. 4
,**4 5
string**6 <
toCheck**= D
,**D E
StringComparison**F V
comp**W [
)**[ \
{++ 
return,, 	
source,,
 
.,, 
IndexOf,, 
(,, 
toCheck,,  
,,,  !
comp,," &
),,& '
>=,,( *
$num,,+ ,
;,,, -
}-- 
private// 
static// 
readonly// 
Regex// #
RegexStripHtml//$ 2
=//3 4
new//5 8
Regex//9 >
(//> ?
$str//? H
,//H I
RegexOptions//J V
.//V W
Compiled//W _
)//_ `
;//` a
public11 
static11 
string11 
	StripHtml11 $
(11$ %
this11% )
string11* 0
str111 4
)114 5
{22 
return33	 
string33 
.33 
IsNullOrWhiteSpace33 )
(33) *
str33* -
)33- .
?33/ 0
string331 7
.337 8
Empty338 =
:33> ?
RegexStripHtml33@ N
.33N O
Replace33O V
(33V W
str33W Z
,33Z [
string33\ b
.33b c
Empty33c h
)33h i
.33i j
Trim33j n
(33n o
)33o p
;33p q
}44 
public;; 
static;; 
string;; 
ExtractTitle;; '
(;;' (
this;;( ,
string;;- 3
str;;4 7
);;7 8
{<< 
if==	 
(== 
str== 
.== 
Contains== 
(== 
$str== 
)== 
)==  
{>>	 

return?? 
string?? 
.?? 
IsNullOrWhiteSpace?? ,
(??, -
str??- 0
)??0 1
???2 3
string??4 :
.??: ;
Empty??; @
:??A B
str??C F
.??F G
	Substring??G P
(??P Q
str??Q T
.??T U
LastIndexOf??U `
(??` a
$str??a e
)??e f
)??f g
.??g h
Replace??h o
(??o p
$str??p t
,??t u
$str??v x
)??x y
;??y z
}@@	 

elseAA	 
ifAA 
(AA 
strAA 
.AA 
ContainsAA 
(AA 
$strAA "
)AA" #
)AA# $
{BB	 

returnCC 
stringCC 
.CC 
IsNullOrWhiteSpaceCC ,
(CC, -
strCC- 0
)CC0 1
?CC2 3
stringCC4 :
.CC: ;
EmptyCC; @
:CCA B
strCCC F
.CCF G
	SubstringCCG P
(CCP Q
strCCQ T
.CCT U
LastIndexOfCCU `
(CC` a
$strCCa d
)CCd e
)CCe f
.CCf g
ReplaceCCg n
(CCn o
$strCCo r
,CCr s
$strCCt v
)CCv w
;CCw x
}DD	 

elseEE	 
{FF	 

returnGG 
strGG 
;GG 
}HH	 

}II 
publicOO 
staticOO 
stringOO 
ToSlugOO !
(OO! "
thisOO" &
stringOO' -
titleOO. 3
)OO3 4
{PP 
varQQ	 
strQQ 
=QQ 
titleQQ 
.QQ 
ToLowerInvariantQQ )
(QQ) *
)QQ* +
;QQ+ ,
strRR	 
=RR 
strRR 
.RR 
TrimRR 
(RR 
$charRR 
,RR 
$charRR  
)RR  !
;RR! "
ifTT	 
(TT 
stringTT 
.TT 
IsNullOrEmptyTT !
(TT! "
strTT" %
)TT% &
)TT& '
returnUU 
stringUU 
.UU 
EmptyUU 
;UU  
varWW	 
bytesWW 
=WW 
EncodingWW 
.WW 
GetEncodingWW )
(WW) *
$strWW* 1
)WW1 2
.WW2 3
GetBytesWW3 ;
(WW; <
strWW< ?
)WW? @
;WW@ A
strXX	 
=XX 
EncodingXX 
.XX 
UTF8XX 
.XX 
	GetStringXX &
(XX& '
bytesXX' ,
)XX, -
;XX- .
strZZ	 
=ZZ 
RegexZZ 
.ZZ 
ReplaceZZ 
(ZZ 
strZZ  
,ZZ  !
$strZZ" '
,ZZ' (
$strZZ) ,
,ZZ, -
RegexOptionsZZ. :
.ZZ: ;
CompiledZZ; C
)ZZC D
;ZZD E
str\\	 
=\\ 
Regex\\ 
.\\ 
Replace\\ 
(\\ 
str\\  
,\\  !
$str\\" /
,\\/ 0
$str\\1 5
,\\5 6
RegexOptions\\7 C
.\\C D
Compiled\\D L
)\\L M
;\\M N
str^^	 
=^^ #
RemoveIllegalCharacters^^ &
(^^& '
str^^' *
)^^* +
;^^+ ,
return``	 
str`` 
;`` 
}aa 
publiccc 
staticcc 
stringcc 
Hashcc 
(cc  
thiscc  $
stringcc% +
sourcecc, 2
,cc2 3
stringcc4 :
saltcc; ?
)cc? @
{dd 
varee	 
bytesee 
=ee 
KeyDerivationee "
.ee" #
Pbkdf2ee# )
(ee) *
passwordff 
:ff 
sourceff #
,ff# $
saltgg 
:gg 
Encodinggg !
.gg! "
UTF8gg" &
.gg& '
GetBytesgg' /
(gg/ 0
saltgg0 4
)gg4 5
,gg5 6
prfhh 
:hh 
KeyDerivationPrfhh (
.hh( )

HMACSHA512hh) 3
,hh3 4
iterationCountii !
:ii! "
$numii# (
,ii( )
numBytesRequestedjj $
:jj$ %
$numjj& )
/jj* +
$numjj, -
)jj- .
;jj. /
returnll	 
Convertll 
.ll 
ToBase64Stringll &
(ll& '
bytesll' ,
)ll, -
;ll- .
}mm 
publicoo 
staticoo 
stringoo 
ReplaceIgnoreCaseoo ,
(oo, -
thisoo- 1
stringoo2 8
stroo9 <
,oo< =
stringoo> D
searchooE K
,ooK L
stringooM S
replacementooT _
)oo_ `
{pp 
stringqq	 
resultqq 
=qq 
Regexqq 
.qq 
Replaceqq &
(qq& '
strrr 
,rr 
Regexss 
.ss 
Escapess 
(ss 
searchss  
)ss  !
,ss! "
replacementtt 
.tt 
Replacett  
(tt  !
$strtt! $
,tt$ %
$strtt& *
)tt* +
,tt+ ,
RegexOptionsuu 
.uu 

IgnoreCaseuu $
)vv	 

;vv
 
returnww	 
resultww 
;ww 
}xx 
static|| 
string|| #
RemoveIllegalCharacters|| +
(||+ ,
string||, 2
text||3 7
)||7 8
{}} 
if~~	 
(~~ 
string~~ 
.~~ 
IsNullOrEmpty~~ !
(~~! "
text~~" &
)~~& '
)~~' (
{	 

return
ÄÄ 
text
ÄÄ 
;
ÄÄ 
}
ÅÅ	 

string
ÉÉ	 
[
ÉÉ 
]
ÉÉ 
chars
ÉÉ 
=
ÉÉ 
new
ÉÉ 
string
ÉÉ $
[
ÉÉ$ %
]
ÉÉ% &
{
ÉÉ' (
$str
ÑÑ 
,
ÑÑ 
$str
ÑÑ 
,
ÑÑ 
$str
ÑÑ 
,
ÑÑ 
$str
ÑÑ "
,
ÑÑ" #
$str
ÑÑ$ '
,
ÑÑ' (
$str
ÑÑ) ,
,
ÑÑ, -
$str
ÑÑ. 1
,
ÑÑ1 2
$str
ÑÑ3 6
,
ÑÑ6 7
$str
ÑÑ8 ;
,
ÑÑ; <
$str
ÑÑ= @
,
ÑÑ@ A
$str
ÑÑB E
,
ÑÑE F
$str
ÑÑG J
,
ÑÑJ K
$str
ÑÑL O
,
ÑÑO P
$str
ÖÖ 
,
ÖÖ 
$str
ÖÖ 
,
ÖÖ 
$str
ÖÖ 
,
ÖÖ 
$str
ÖÖ "
,
ÖÖ" #
$str
ÖÖ$ '
}
ÜÜ 
;
ÜÜ 
foreach
àà	 
(
àà 
var
àà 
ch
àà 
in
àà 
chars
àà !
)
àà! "
{
ââ	 

text
ää 
=
ää 
text
ää 
.
ää 
Replace
ää 
(
ää  
ch
ää  "
,
ää" #
string
ää$ *
.
ää* +
Empty
ää+ 0
)
ää0 1
;
ää1 2
}
ãã	 

text
çç	 
=
çç 
text
çç 
.
çç 
Replace
çç 
(
çç 
$str
çç  
,
çç  !
$str
çç" %
)
çç% &
;
çç& '
text
éé	 
=
éé 
text
éé 
.
éé 
Replace
éé 
(
éé 
$str
éé  
,
éé  !
$str
éé" %
)
éé% &
;
éé& '
text
êê	 
=
êê &
RemoveUnicodePunctuation
êê (
(
êê( )
text
êê) -
)
êê- .
;
êê. /
text
ëë	 
=
ëë 
RemoveDiacritics
ëë  
(
ëë  !
text
ëë! %
)
ëë% &
;
ëë& '
text
íí	 
=
íí 
RemoveExtraHyphen
íí !
(
íí! "
text
íí" &
)
íí& '
;
íí' (
return
îî	 
System
îî 
.
îî 
Web
îî 
.
îî 
HttpUtility
îî &
.
îî& '

HtmlEncode
îî' 1
(
îî1 2
text
îî2 6
)
îî6 7
.
îî7 8
Replace
îî8 ?
(
îî? @
$str
îî@ C
,
îîC D
string
îîE K
.
îîK L
Empty
îîL Q
)
îîQ R
;
îîR S
}
ïï 
static
óó 
string
óó &
RemoveUnicodePunctuation
óó ,
(
óó, -
string
óó- 3
text
óó4 8
)
óó8 9
{
òò 
var
ôô	 

normalized
ôô 
=
ôô 
text
ôô 
.
ôô 
	Normalize
ôô (
(
ôô( )
NormalizationForm
ôô) :
.
ôô: ;
FormD
ôô; @
)
ôô@ A
;
ôôA B
var
öö	 
sb
öö 
=
öö 
new
öö 
StringBuilder
öö #
(
öö# $
)
öö$ %
;
öö% &
foreach
úú	 
(
úú 
var
úú 
c
úú 
in
úú 

normalized
ùù 
.
ùù 
Where
ùù 
(
ùù 
c
ùù 
=>
ùù  "
CharUnicodeInfo
ùù# 2
.
ùù2 3 
GetUnicodeCategory
ùù3 E
(
ùùE F
c
ùùF G
)
ùùG H
!=
ùùI K
UnicodeCategory
ùùL [
.
ùù[ \%
InitialQuotePunctuation
ùù\ s
&&
ùùt v
CharUnicodeInfo
ûû# 2
.
ûû2 3 
GetUnicodeCategory
ûû3 E
(
ûûE F
c
ûûF G
)
ûûG H
!=
ûûI K
UnicodeCategory
ûûL [
.
ûû[ \#
FinalQuotePunctuation
ûû\ q
)
ûûq r
)
ûûr s
{
üü	 

sb
†† 
.
†† 
Append
†† 
(
†† 
c
†† 
)
†† 
;
†† 
}
°°	 

return
££	 
sb
££ 
.
££ 
ToString
££ 
(
££ 
)
££ 
;
££ 
}
§§ 
static
¶¶ 
string
¶¶ 
RemoveDiacritics
¶¶ $
(
¶¶$ %
string
¶¶% +
text
¶¶, 0
)
¶¶0 1
{
ßß 
var
®®	 

normalized
®® 
=
®® 
text
®® 
.
®® 
	Normalize
®® (
(
®®( )
NormalizationForm
®®) :
.
®®: ;
FormD
®®; @
)
®®@ A
;
®®A B
var
©©	 
sb
©© 
=
©© 
new
©© 
StringBuilder
©© #
(
©©# $
)
©©$ %
;
©©% &
foreach
´´	 
(
´´ 
var
´´ 
c
´´ 
in
´´ 

normalized
¨¨ 
.
¨¨ 
Where
¨¨ 
(
¨¨ 
c
¨¨ 
=>
¨¨  "
CharUnicodeInfo
¨¨# 2
.
¨¨2 3 
GetUnicodeCategory
¨¨3 E
(
¨¨E F
c
¨¨F G
)
¨¨G H
!=
¨¨I K
UnicodeCategory
¨¨L [
.
¨¨[ \
NonSpacingMark
¨¨\ j
)
¨¨j k
)
¨¨k l
{
≠≠	 

sb
ÆÆ 
.
ÆÆ 
Append
ÆÆ 
(
ÆÆ 
c
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ØØ	 

return
±±	 
sb
±± 
.
±± 
ToString
±± 
(
±± 
)
±± 
;
±± 
}
≤≤ 
static
¥¥ 
string
¥¥ 
RemoveExtraHyphen
¥¥ %
(
¥¥% &
string
¥¥& ,
text
¥¥- 1
)
¥¥1 2
{
µµ 
if
∂∂	 
(
∂∂ 
text
∂∂ 
.
∂∂ 
Contains
∂∂ 
(
∂∂ 
$str
∂∂ 
)
∂∂  
)
∂∂  !
{
∑∑	 

text
∏∏ 
=
∏∏ 
text
∏∏ 
.
∏∏ 
Replace
∏∏ 
(
∏∏  
$str
∏∏  $
,
∏∏$ %
$str
∏∏& )
)
∏∏) *
;
∏∏* +
return
ππ 
RemoveExtraHyphen
ππ $
(
ππ$ %
text
ππ% )
)
ππ) *
;
ππ* +
}
∫∫	 

return
ºº	 
text
ºº 
;
ºº 
}
ΩΩ 
public
øø 
static
øø 
string
øø 
SanitizePath
øø '
(
øø' (
this
øø( ,
string
øø- 3
str
øø4 7
)
øø7 8
{
¿¿ 
if
¡¡	 
(
¡¡ 
string
¡¡ 
.
¡¡  
IsNullOrWhiteSpace
¡¡ &
(
¡¡& '
str
¡¡' *
)
¡¡* +
)
¡¡+ ,
return
¬¬ 
string
¬¬ 
.
¬¬ 
Empty
¬¬ 
;
¬¬  
str
ƒƒ	 
=
ƒƒ 
str
ƒƒ 
.
ƒƒ 
Replace
ƒƒ 
(
ƒƒ 
$str
ƒƒ  
,
ƒƒ  !
$str
ƒƒ" %
)
ƒƒ% &
.
ƒƒ& '
Replace
ƒƒ' .
(
ƒƒ. /
$str
ƒƒ/ 4
,
ƒƒ4 5
$str
ƒƒ6 9
)
ƒƒ9 :
;
ƒƒ: ;
if
∆∆	 
(
∆∆ 
str
∆∆ 
.
∆∆ 
Contains
∆∆ 
(
∆∆ 
$str
∆∆ 
)
∆∆ 
||
∆∆  "
str
∆∆# &
.
∆∆& '
Contains
∆∆' /
(
∆∆/ 0
$str
∆∆0 4
)
∆∆4 5
)
∆∆5 6
throw
«« 
new
«« "
ApplicationException
«« *
(
««* +
$str
««+ C
)
««C D
;
««D E
return
……	 
str
…… 
;
…… 
}
   
public
ÃÃ 
static
ÃÃ 
string
ÃÃ 
SanitizeFileName
ÃÃ +
(
ÃÃ+ ,
this
ÃÃ, 0
string
ÃÃ1 7
str
ÃÃ8 ;
)
ÃÃ; <
{
ÕÕ 
str
ŒŒ	 
=
ŒŒ 
str
ŒŒ 
.
ŒŒ 
SanitizePath
ŒŒ 
(
ŒŒ  
)
ŒŒ  !
;
ŒŒ! "
return
““	 
str
““ 
;
““ 
}
”” 
}
÷÷ 
}◊◊ ﬂ
uC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\AboutProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{ 
public 

	interface 
IAboutProvider #
{		 
Task

 
<

 

AboutModel

 
>

 
GetAboutModel

 &
(

& '
)

' (
;

( )
} 
public 

class 
AboutProvider 
:  
IAboutProvider! /
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
public 
AboutProvider 
( 
AppDbContext )
db* ,
), -
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 

AboutModel $
>$ %
GetAboutModel& 3
(3 4
)4 5
{ 	
var 
model 
= 
new 

AboutModel &
(& '
)' (
;( )
model 
. 
Version 
= 
typeof "
(" #
AboutProvider# 0
)0 1
. 
GetTypeInfo 
(  
)  !
. 
Assembly 
. 
GetCustomAttribute &
<& '1
%AssemblyInformationalVersionAttribute' L
>L M
(M N
)N O
.  
InformationalVersion (
;( )
model 
. 
DatabaseProvider "
=# $
_db% (
.( )
Database) 1
.1 2
ProviderName2 >
;> ?
model!! 
.!! 
OperatingSystem!! !
=!!" #
System!!$ *
.!!* +
Runtime!!+ 2
.!!2 3
InteropServices!!3 B
.!!B C
RuntimeInformation!!C U
.!!U V
OSDescription!!V c
;!!c d
return## 
await## 
Task## 
.## 

FromResult## (
(##( )
model##) .
)##. /
;##/ 0
}$$ 	
}%% 
}&& ∆K
yC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\AnalyticsProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{		 
public

 

	interface

 
IAnalyticsProvider

 '
{ 
Task 
< 
AnalyticsModel 
> 
GetAnalytics #
(# $
)$ %
;% &
Task 
< 
bool 
> 
SaveDisplayType "
(" #
int# &
type' +
)+ ,
;, -
Task 
< 
bool 
> 
SaveDisplayPeriod $
($ %
int% (
period) /
)/ 0
;0 1
} 
public 
class 
AnalyticsProvider 
:  !
IAnalyticsProvider" 4
{ 
private 	
readonly
 
AppDbContext 
_db  #
;# $
public 
AnalyticsProvider	 
( 
AppDbContext '
db( *
)* +
{ 
_db 
= 
db	 
; 
} 
public 
async	 
Task 
< 
AnalyticsModel "
>" #
GetAnalytics$ 0
(0 1
)1 2
{ 
var 
blog 
= 
await 
_db  
.  !
Blogs! &
.& '
FirstOrDefaultAsync' :
(: ;
); <
;< =
var 
model 
= 
new 
AnalyticsModel !
(! "
)" #
{ 

TotalPosts 
= 
_db 
. 
Posts 
. 
Where  
(  !
p! "
=># %
p& '
.' (
PostType( 0
==1 3
PostType4 <
.< =
Post= A
)A B
.B C
CountC H
(H I
)I J
,J K

TotalPages   
=   
_db    
.    !
Posts  ! &
.  & '
Where  ' ,
(  , -
p  - .
=>  / 1
p  2 3
.  3 4
PostType  4 <
==  = ?
PostType  @ H
.  H I
Page  I M
)  M N
.  N O
Count  O T
(  T U
)  U V
,  V W

TotalViews!! 
=!! 
_db!! 
.!! 
Posts!! 
.!! 
Select!! !
(!!! "
v!!" #
=>!!$ &
v!!' (
.!!( )
	PostViews!!) 2
)!!2 3
.!!3 4
Sum!!4 7
(!!7 8
)!!8 9
,!!9 :
TotalSubscribers"" 
="" 
_db"" 
."" 
Subscribers"" &
.""& '
Count""' ,
("", -
)""- .
,"". /
LatestPostViews## 
=## 
GetLatestPostViews## (
(##( )
)##) *
,##* +
DisplayType$$ 
=$$ 
blog$$ "
.$$" #
AnalyticsListType$$# 4
>$$5 6
$num$$7 8
?$$9 :
($$; <
AnalyticsListType$$< M
)$$M N
blog$$N R
.$$R S
AnalyticsListType$$S d
:$$e f
AnalyticsListType$$g x
.$$x y
Graph$$y ~
,$$~ 
DisplayPeriod%% 
=%% 
blog%%  $
.%%$ %
AnalyticsPeriod%%% 4
>%%5 6
$num%%7 8
?%%9 :
(%%; <
AnalyticsPeriod%%< K
)%%K L
blog%%L P
.%%P Q
AnalyticsPeriod%%Q `
:%%a b
AnalyticsPeriod%%c r
.%%r s
Days7%%s x
}&& 
;&& 
return(( 	
await((
 
Task(( 
.(( 

FromResult(( 
(((  
model((  %
)((% &
;((& '
})) 
public++ 
async++ 
Task++ 
<++ 
bool++ 
>++ 
SaveDisplayType++  /
(++/ 0
int++0 3
type++4 8
)++8 9
{,, 	
var-- 
blog-- 
=-- 
await-- 
_db--  
.--  !
Blogs--! &
.--& '
FirstOrDefaultAsync--' :
(--: ;
)--; <
;--< =
blog.. 
... 
AnalyticsListType.. "
=..# $
type..% )
;..) *
return// 
await// 
_db// 
.// 
SaveChangesAsync// -
(//- .
)//. /
>//0 1
$num//2 3
;//3 4
}00 	
public22 
async22 
Task22 
<22 
bool22 
>22 
SaveDisplayPeriod22  1
(221 2
int222 5
period226 <
)22< =
{33 	
var44 
blog44 
=44 
await44 
_db44  
.44  !
Blogs44! &
.44& '
OrderBy44' .
(44. /
b44/ 0
=>441 3
b444 5
.445 6
Id446 8
)448 9
.449 :

FirstAsync44: D
(44D E
)44E F
;44F G
blog55 
.55 
AnalyticsPeriod55  
=55! "
period55# )
;55) *
return66 
await66 
_db66 
.66 
SaveChangesAsync66 -
(66- .
)66. /
>660 1
$num662 3
;663 4
}77 	
private99 
BarChartModel99 
GetLatestPostViews99 0
(990 1
)991 2
{:: 
var;; 
blog;; 
=;; 
_db;; 
.;; 
Blogs;;  
.;;  !
OrderBy;;! (
(;;( )
b;;) *
=>;;+ -
b;;. /
.;;/ 0
Id;;0 2
);;2 3
.;;3 4
First;;4 9
(;;9 :
);;: ;
;;;; <
var<< 
period<< 
=<< 
blog<< 
.<< 
AnalyticsPeriod<< -
==<<. 0
$num<<1 2
?<<3 4
$num<<5 6
:<<7 8
blog<<9 =
.<<= >
AnalyticsPeriod<<> M
;<<M N
var>> 
posts>> 
=>> 
_db>> 
.>> 
Posts>> !
.>>! "
AsNoTracking>>" .
(>>. /
)>>/ 0
.>>0 1
Where>>1 6
(>>6 7
p>>7 8
=>>>9 ;
p>>< =
.>>= >
	Published>>> G
>>>H I
DateTime>>J R
.>>R S
MinValue>>S [
)>>[ \
.>>\ ]
OrderByDescending>>] n
(>>n o
p>>o p
=>>>q s
p>>t u
.>>u v
	Published>>v 
)	>> Ä
.
>>Ä Å
Take
>>Å Ö
(
>>Ö Ü
GetDays
>>Ü ç
(
>>ç é
period
>>é î
)
>>î ï
)
>>ï ñ
;
>>ñ ó
if?? 
(?? 
posts?? 
==?? 
null?? 
||?? 
posts?? 
.?? 
Count?? #
(??# $
)??$ %
<??& '
$num??( )
)??) *
return@@ 

null@@ 
;@@ 
postsBB 
=BB	 

postsBB 
.BB 
OrderByBB 
(BB 
pBB 
=>BB 
pBB 
.BB  
	PublishedBB  )
)BB) *
;BB* +
returnDD 	
newDD
 
BarChartModelDD 
(DD 
)DD 
{EE 
LabelsFF 

=FF 
postsFF 
.FF 
SelectFF 
(FF 
pFF 
=>FF 
pFF  
.FF  !
TitleFF! &
)FF& '
.FF' (
ToListFF( .
(FF. /
)FF/ 0
,FF0 1
DataGG 
=GG	 

postsGG 
.GG 
SelectGG 
(GG 
pGG 
=>GG 
pGG 
.GG 
	PostViewsGG (
)GG( )
.GG) *
ToListGG* 0
(GG0 1
)GG1 2
}HH 
;HH 
}II 
privateKK 
intKK 
GetDaysKK 
(KK 
intKK 
idKK  "
)KK" #
{LL 	
switchMM 
(MM 
(MM 
AnalyticsPeriodMM $
)MM$ %
idMM% '
)MM' (
{NN 
caseOO 
AnalyticsPeriodOO $
.OO$ %
TodayOO% *
:OO* +
returnPP 
$numPP 
;PP 
caseQQ 
AnalyticsPeriodQQ $
.QQ$ %
	YesterdayQQ% .
:QQ. /
returnRR 
$numRR 
;RR 
caseSS 
AnalyticsPeriodSS $
.SS$ %
Days7SS% *
:SS* +
returnTT 
$numTT 
;TT 
caseUU 
AnalyticsPeriodUU $
.UU$ %
Days30UU% +
:UU+ ,
returnVV 
$numVV 
;VV 
caseWW 
AnalyticsPeriodWW $
.WW$ %
Days90WW% +
:WW+ ,
returnXX 
$numXX 
;XX 
defaultYY 
:YY 
throwZZ 
newZZ  
ApplicationExceptionZZ 2
(ZZ2 3
$strZZ3 M
)ZZM N
;ZZN O
}[[ 
}\\ 	
}]] 
}^^ ≤ñ
vC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\AuthorProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{ 
public 
	interface 
IAuthorProvider !
{ 
Task 
< 
List 
< 
Author 
> 
> 

GetAuthors 
(  
)  !
;! "
Task 
< 
Author 
> 
FindByEmail 
( 
string !
email" '
)' (
;( )
Task 
< 
bool 
> 
Verify 
( 

LoginModel 
model $
)$ %
;% &
Task 
< 
bool 
> 
Register 
( 
RegisterModel #
model$ )
)) *
;* +
Task 
< 
bool 
> 
Add 
( 
Author 
author 
) 
;  
Task 
< 
bool 
> 
Update 
( 
Author 
author !
)! "
;" #
Task 
< 
bool 
> 
ChangePassword 
( 
RegisterModel )
model* /
)/ 0
;0 1
Task 
< 
bool 
> 
Remove 
( 
int 
id 
) 
; 
} 
public 
class 
AuthorProvider 
: 
IAuthorProvider .
{ 
private 	
readonly
 
AppDbContext 
_db  #
;# $
private 	
static
 
string 
_salt 
; 
public 
AuthorProvider	 
( 
AppDbContext $
db% '
,' (
IConfiguration) 7
configuration8 E
)E F
{ 
_db   
=   
db  	 
;   
_salt!! 
=!!	 

configuration!! 
.!! 

GetSection!! #
(!!# $
$str!!$ /
)!!/ 0
.!!0 1
GetValue!!1 9
<!!9 :
string!!: @
>!!@ A
(!!A B
$str!!B H
)!!H I
;!!I J
}"" 
public$$ 
async$$	 
Task$$ 
<$$ 
List$$ 
<$$ 
Author$$ 
>$$  
>$$  !

GetAuthors$$" ,
($$, -
)$$- .
{%% 
return&& 	
await&&
 
_db&& 
.&& 
Authors&& 
.&& 
ToListAsync&& '
(&&' (
)&&( )
;&&) *
}'' 
public)) 
async))	 
Task)) 
<)) 
Author)) 
>)) 
FindByEmail)) '
())' (
string))( .
email))/ 4
)))4 5
{** 
return++ 	
await++
 
Task++ 
.++ 

FromResult++ 
(++  
_db++  #
.++# $
Authors++$ +
.+++ ,
Where++, 1
(++1 2
a++2 3
=>++4 6
a++7 8
.++8 9
Email++9 >
==++? A
email++B G
)++G H
.++H I
FirstOrDefault++I W
(++W X
)++X Y
)++Y Z
;++Z [
},, 
public.. 
async..	 
Task.. 
<.. 
bool.. 
>.. 
Verify..  
(..  !

LoginModel..! +
model.., 1
)..1 2
{// 
Serilog00 

.00
 
Log00 
.00 
Warning00 
(00 
$"00 
$str00 0
{000 1
model001 6
.006 7
Email007 <
}00< =
"00= >
)00> ?
;00? @
Author22 	
existing22
 
=22 
await22 
Task22 
.22  

FromResult22  *
(22* +
_db22+ .
.22. /
Authors22/ 6
.226 7
Where227 <
(22< =
a22= >
=>22? A
a33 
.33 
Email33 
==33 
model33 
.33 
Email33 
)33 
.33 
FirstOrDefault33 *
(33* +
)33+ ,
)33, -
;33- .
if55 
(55 
existing55 
==55 
null55 
)55 
{66 
Serilog77 
.77 
Log77 
.77 
Warning77 
(77 
$"77 
$str77 *
{77* +
model77+ 0
.770 1
Email771 6
}776 7
$str777 A
"77A B
)77B C
;77C D
return88 

false88 
;88 
}99 
if;; 
(;; 
existing;; 
.;; 
Password;; 
==;; 
model;;  
.;;  !
Password;;! )
.;;) *
Hash;;* .
(;;. /
_salt;;/ 4
);;4 5
);;5 6
{<< 
Serilog== 
.== 
Log== 
.== 
Warning== 
(== 
$"== 
$str== /
{==/ 0
model==0 5
.==5 6
Email==6 ;
}==; <
"==< =
)=== >
;==> ?
return>> 

true>> 
;>> 
}?? 
else@@ 
{AA 
SerilogBB 
.BB 
LogBB 
.BB 
WarningBB 
(BB 
$"BB 
$strBB 1
"BB1 2
)BB2 3
;BB3 4
returnCC 

falseCC 
;CC 
}DD 
}EE 
publicGG 
asyncGG	 
TaskGG 
<GG 
boolGG 
>GG 
RegisterGG "
(GG" #
RegisterModelGG# 0
modelGG1 6
)GG6 7
{HH 
boolII 
isAdminII 
=II 
falseII 
;II 
varJJ 
authorJJ 
=JJ 
awaitJJ 
_dbJJ 
.JJ 
AuthorsJJ !
.JJ! "
WhereJJ" '
(JJ' (
aJJ( )
=>JJ* ,
aJJ- .
.JJ. /
EmailJJ/ 4
==JJ5 7
modelJJ8 =
.JJ= >
EmailJJ> C
)JJC D
.JJD E
FirstOrDefaultAsyncJJE X
(JJX Y
)JJY Z
;JJZ [
ifKK 
(KK 
authorKK 
!=KK 
nullKK 
)KK 
returnLL 

falseLL 
;LL 
varNN 
blogNN 
=NN 
awaitNN 
_dbNN 
.NN 
BlogsNN 
.NN 
IncludeNN %
(NN% &
bNN& '
=>NN( *
bNN+ ,
.NN, -
AuthorsNN- 4
)NN4 5
.NN5 6
FirstOrDefaultAsyncNN6 I
(NNI J
)NNJ K
;NNK L
ifOO 
(OO 
blogOO 
==OO 
nullOO 
)OO 
{PP 
isAdminQQ 
=QQ 
trueQQ 
;QQ 
blogRR 
=RR	 

newRR 
BlogRR 
{SS 
TitleTT 

=TT 
$strTT 
,TT 
DescriptionUU 
=UU 
$strUU +
,UU+ ,
ThemeVV 

=VV 
$strVV 
,VV 
ItemsPerPageWW 
=WW 
$numWW 
,WW 
DateCreatedXX 
=XX 
DateTimeXX 
.XX 
UtcNowXX "
}YY 
;YY 
_db[[ 
.[[ 
Blogs[[ 
.[[ 
Add[[ 
([[ 
blog[[ 
)[[ 
;[[ 
try\\ 
{]] 
await^^ 

_db^^ 
.^^ 
SaveChangesAsync^^ 
(^^  
)^^  !
;^^! "
}__ 
catch`` 	
(``
 
	Exception`` 
ex`` 
)`` 
{aa 
Serilogbb 
.bb 
Logbb 
.bb 
Warningbb 
(bb 
$"bb 
$strbb 7
{bb7 8
exbb8 :
.bb: ;
Messagebb; B
}bbB C
"bbC D
)bbD E
;bbE F
returncc 
falsecc 
;cc 
}dd 
}ee 
bloggg 
=gg 	
awaitgg
 
_dbgg 
.gg 
Blogsgg 
.gg 
Includegg !
(gg! "
bgg" #
=>gg$ &
bgg' (
.gg( )
Authorsgg) 0
)gg0 1
.gg1 2
FirstOrDefaultAsyncgg2 E
(ggE F
)ggF G
;ggG H
ifhh 
(hh 
bloghh 
==hh 
nullhh 
)hh 
returnii 

falseii 
;ii 
authorkk 	
=kk
 
newkk 
Authorkk 
{ll 
DisplayNamemm 
=mm 
modelmm 
.mm 
Namemm 
,mm 
Emailnn 	
=nn
 
modelnn 
.nn 
Emailnn 
,nn 
Passwordoo 
=oo 
modeloo 
.oo 
Passwordoo 
.oo 
Hashoo "
(oo" #
_saltoo# (
)oo( )
,oo) *
IsAdminpp 
=pp 
isAdminpp 
,pp 
Avatarqq 

=qq 
stringqq 
.qq 
Formatqq 
(qq 
	Constantsqq $
.qq$ %
AvatarDataImageqq% 4
,qq4 5
modelqq6 ;
.qq; <
Nameqq< @
.qq@ A
	SubstringqqA J
(qqJ K
$numqqK L
,qqL M
$numqqN O
)qqO P
.qqP Q
ToUpperqqQ X
(qqX Y
)qqY Z
)qqZ [
,qq[ \
Biorr 
=rr 	
$strrr
 !
,rr! "
DateCreatedss 
=ss 
DateTimess 
.ss 
UtcNowss !
}tt 
;tt 
blogvv 
.vv 
Authorsvv 
.vv 
Addvv 
(vv 
authorvv 
)vv 
;vv 
returnxx 	
awaitxx
 
_dbxx 
.xx 
SaveChangesAsyncxx $
(xx$ %
)xx% &
>xx' (
$numxx) *
;xx* +
}yy 
public{{ 
async{{	 
Task{{ 
<{{ 
bool{{ 
>{{ 
Add{{ 
({{ 
Author{{ $
author{{% +
){{+ ,
{|| 
var}} 
existing}} 
=}} 
await}} 
_db}} 
.}} 
Authors}} #
.}}# $
Where}}$ )
(}}) *
a}}* +
=>}}, .
a}}/ 0
.}}0 1
Email}}1 6
==}}7 9
author}}: @
.}}@ A
Email}}A F
)}}F G
.}}G H
OrderBy}}H O
(}}O P
a}}P Q
=>}}R T
a}}U V
.}}V W
Id}}W Y
)}}Y Z
.}}Z [
FirstOrDefaultAsync}}[ n
(}}n o
)}}o p
;}}p q
if~~ 
(~~ 
existing~~ 
!=~~ 
null~~ 
)~~ 
return 

false 
; 
var
ÅÅ 
blog
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_db
ÅÅ 
.
ÅÅ 
Blogs
ÅÅ 
.
ÅÅ 
Include
ÅÅ %
(
ÅÅ% &
b
ÅÅ& '
=>
ÅÅ( *
b
ÅÅ+ ,
.
ÅÅ, -
Authors
ÅÅ- 4
)
ÅÅ4 5
.
ÅÅ5 6
OrderBy
ÅÅ6 =
(
ÅÅ= >
b
ÅÅ> ?
=>
ÅÅ@ B
b
ÅÅC D
.
ÅÅD E
Id
ÅÅE G
)
ÅÅG H
.
ÅÅH I!
FirstOrDefaultAsync
ÅÅI \
(
ÅÅ\ ]
)
ÅÅ] ^
;
ÅÅ^ _
if
ÇÇ 
(
ÇÇ 
blog
ÇÇ 
==
ÇÇ 
null
ÇÇ 
)
ÇÇ 
return
ÉÉ 

false
ÉÉ 
;
ÉÉ 
author
ÖÖ 
.
ÖÖ 
IsAdmin
ÖÖ 
=
ÖÖ 
false
ÖÖ "
;
ÖÖ" #
author
ÜÜ 
.
ÜÜ 
Password
ÜÜ 
=
ÜÜ 
author
ÜÜ $
.
ÜÜ$ %
Password
ÜÜ% -
.
ÜÜ- .
Hash
ÜÜ. 2
(
ÜÜ2 3
_salt
ÜÜ3 8
)
ÜÜ8 9
;
ÜÜ9 :
author
áá 
.
áá 
Avatar
áá 
=
áá 
string
áá "
.
áá" #
Format
áá# )
(
áá) *
	Constants
áá* 3
.
áá3 4
AvatarDataImage
áá4 C
,
ááC D
author
ááE K
.
ááK L
DisplayName
ááL W
.
ááW X
	Substring
ááX a
(
ááa b
$num
ááb c
,
áác d
$num
ááe f
)
ááf g
.
áág h
ToUpper
ááh o
(
ááo p
)
ááp q
)
ááq r
;
áár s
author
àà 
.
àà 
DateCreated
àà 
=
àà  
DateTime
àà! )
.
àà) *
UtcNow
àà* 0
;
àà0 1
blog
ää 
.
ää 
Authors
ää 
.
ää 
Add
ää 
(
ää 
author
ää 
)
ää 
;
ää 
return
åå 	
await
åå
 
_db
åå 
.
åå 
SaveChangesAsync
åå $
(
åå$ %
)
åå% &
>
åå' (
$num
åå) *
;
åå* +
}
çç 
public
èè 
async
èè	 
Task
èè 
<
èè 
bool
èè 
>
èè 
Update
èè  
(
èè  !
Author
èè! '
author
èè( .
)
èè. /
{
êê 
var
ëë 
existing
ëë 
=
ëë 
await
ëë 
_db
ëë 
.
ëë 
Authors
ëë #
.
íí 
Where
íí 

(
íí
 
a
íí 
=>
íí 
a
íí 
.
íí 
Email
íí 
==
íí 
author
íí !
.
íí! "
Email
íí" '
)
íí' (
.
ìì !
FirstOrDefaultAsync
ìì 
(
ìì 
)
ìì 
;
ìì 
if
ïï 
(
ïï 
existing
ïï 
==
ïï 
null
ïï 
)
ïï 
return
ññ 

false
ññ 
;
ññ 
if
òò 
(
òò 
existing
òò 
.
òò 
IsAdmin
òò 
&&
òò  "
!
òò# $
author
òò$ *
.
òò* +
IsAdmin
òò+ 2
)
òò2 3
{
ôô 
if
õõ 
(
õõ 
_db
õõ 
.
õõ 
Authors
õõ 
.
õõ  
Where
õõ  %
(
õõ% &
a
õõ& '
=>
õõ( *
a
õõ+ ,
.
õõ, -
IsAdmin
õõ- 4
)
õõ4 5
.
õõ5 6
Count
õõ6 ;
(
õõ; <
)
õõ< =
==
õõ> @
$num
õõA B
)
õõB C
return
úú 
false
úú  
;
úú  !
}
ùù 
existing
üü 
.
üü 
Email
üü 
=
üü 
author
üü 
.
üü 
Email
üü  
;
üü  !
existing
†† 
.
†† 
DisplayName
†† 
=
†† 
author
††  
.
††  !
DisplayName
††! ,
;
††, -
existing
°° 
.
°° 
Bio
°° 
=
°° 
author
°° 
.
°° 
Bio
°° 
;
°° 
existing
¢¢ 
.
¢¢ 
Avatar
¢¢ 
=
¢¢ 
author
¢¢ 
.
¢¢ 
Avatar
¢¢ "
;
¢¢" #
existing
££ 
.
££ 
IsAdmin
££ 
=
££ 
author
££ %
.
££% &
IsAdmin
££& -
;
££- .
return
•• 	
await
••
 
_db
•• 
.
•• 
SaveChangesAsync
•• $
(
••$ %
)
••% &
>
••' (
$num
••) *
;
••* +
}
¶¶ 
public
®® 
async
®®	 
Task
®® 
<
®® 
bool
®® 
>
®® 
ChangePassword
®® (
(
®®( )
RegisterModel
®®) 6
model
®®7 <
)
®®< =
{
©© 
var
™™ 
existing
™™ 
=
™™ 
await
™™ 
_db
™™ 
.
™™ 
Authors
™™ #
.
´´ 
Where
´´ 

(
´´
 
a
´´ 
=>
´´ 
a
´´ 
.
´´ 
Email
´´ 
==
´´ 
model
´´  
.
´´  !
Email
´´! &
)
´´& '
.
¨¨ !
FirstOrDefaultAsync
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨ 
if
ÆÆ 
(
ÆÆ 
existing
ÆÆ 
==
ÆÆ 
null
ÆÆ 
)
ÆÆ 
return
ØØ 

false
ØØ 
;
ØØ 
existing
±± 
.
±± 
Password
±± 
=
±± 
model
±± 
.
±± 
Password
±± %
.
±±% &
Hash
±±& *
(
±±* +
_salt
±±+ 0
)
±±0 1
;
±±1 2
return
≥≥ 	
await
≥≥
 
_db
≥≥ 
.
≥≥ 
SaveChangesAsync
≥≥ $
(
≥≥$ %
)
≥≥% &
>
≥≥' (
$num
≥≥) *
;
≥≥* +
}
¥¥ 
public
∂∂ 
async
∂∂	 
Task
∂∂ 
<
∂∂ 
bool
∂∂ 
>
∂∂ 
Remove
∂∂  
(
∂∂  !
int
∂∂! $
id
∂∂% '
)
∂∂' (
{
∑∑ 
var
∏∏ 
existingAuthor
∏∏ 
=
∏∏ 
await
∏∏ 
_db
∏∏ !
.
∏∏! "
Authors
∏∏" )
.
∏∏) *
Where
∏∏* /
(
∏∏/ 0
a
∏∏0 1
=>
∏∏2 4
a
∏∏5 6
.
∏∏6 7
Id
∏∏7 9
==
∏∏: <
id
∏∏= ?
)
∏∏? @
.
∏∏@ A!
FirstOrDefaultAsync
∏∏A T
(
∏∏T U
)
∏∏U V
;
∏∏V W
if
ππ 
(
ππ 
existingAuthor
ππ 
==
ππ 
null
ππ 
)
ππ 
return
∫∫ 

false
∫∫ 
;
∫∫ 
_db
ºº 
.
ºº 
Authors
ºº 
.
ºº 
Remove
ºº 
(
ºº 
existingAuthor
ºº $
)
ºº$ %
;
ºº% &
await
ΩΩ 
_db
ΩΩ	 
.
ΩΩ 
SaveChangesAsync
ΩΩ 
(
ΩΩ 
)
ΩΩ 
;
ΩΩ  
return
ææ 	
true
ææ
 
;
ææ 
}
øø 
}
¿¿ 
}¡¡ öK
tC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\BlogProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{		 
public

 

	interface

 
IBlogProvider

 "
{ 
Task 
< 
Blog 
> 
GetBlog 
( 
) 
; 
Task 
< 
ICollection 
< 
Category 
> 
> 
GetBlogCategories /
(/ 0
)0 1
;1 2
Task 
< 
BlogItem 
> 
GetBlogItem 
( 
) 
; 
Task 
< 
bool 
> 
Update 
( 
Blog 
blog 
) 
; 
} 
public 
class 
BlogProvider 
: 
IBlogProvider *
{ 
private 	
readonly
 
AppDbContext 
_db  #
;# $
private 	
readonly
 
IStorageProvider #
_storageProvider$ 4
;4 5
public 
BlogProvider	 
( 
AppDbContext "
db# %
,% &
IStorageProvider' 7
storageProvider8 G
)G H
{ 
_db 
= 
db	 
; 
_storageProvider 
= 
storageProvider %
;% &
} 
public 
async	 
Task 
< 
BlogItem 
> 
GetBlogItem )
() *
)* +
{ 
var 
blog 
= 
await 
_db 
. 
Blogs 
. 
AsNoTracking *
(* +
)+ ,
., -
OrderBy- 4
(4 5
b5 6
=>7 9
b: ;
.; <
Id< >
)> ?
.? @

FirstAsync@ J
(J K
)K L
;L M
blog   
.   
Theme   
=   
blog   
.   
Theme   
.   
ToLower   "
(  " #
)  # $
;  $ %
return!! 	
new!!
 
BlogItem!! 
{"" 
Title## 	
=##
 
blog## 
.## 
Title## 
,## 
Description$$ 
=$$ 
blog$$ 
.$$ 
Description$$ "
,$$" #
Theme%% 	
=%%
 
blog%% 
.%% 
Theme%% 
,%% 
IncludeFeatured&& 
=&&  !
blog&&" &
.&&& '
IncludeFeatured&&' 6
,&&6 7
ItemsPerPage'' 
='' 
blog'' 
.'' 
ItemsPerPage'' $
,''$ %
SocialFields(( 
=(( 
new(( 
List(( 
<(( 
SocialField(( '
>((' (
(((( )
)(() *
,((* +
Cover)) 	
=))
 
string)) 
.)) 
IsNullOrEmpty))  
())  !
blog))! %
.))% &
Cover))& +
)))+ ,
?))- .
blog))/ 3
.))3 4
Cover))4 9
:)): ;
	Constants))< E
.))E F
DefaultCover))F R
,))R S
Logo** 
=**	 

string** 
.** 
IsNullOrEmpty** 
(**  
blog**  $
.**$ %
Logo**% )
)**) *
?**+ ,
blog**- 1
.**1 2
Logo**2 6
:**7 8
	Constants**9 B
.**B C
DefaultLogo**C N
,**N O
HeaderScript++ 
=++ 
blog++ #
.++# $
HeaderScript++$ 0
,++0 1
FooterScript,, 
=,, 
blog,, #
.,,# $
FooterScript,,$ 0
,,,0 1
values-- 

=-- 
await-- 
	GetValues-- 
(-- 
blog-- !
.--! "
Theme--" '
)--' (
}.. 
;.. 
}// 
public11 
async11	 
Task11 
<11 
Blog11 
>11 
GetBlog11 !
(11! "
)11" #
{22 
return33 	
await33
 
_db33 
.33 
Blogs33 
.33 
OrderBy33 !
(33! "
b33" #
=>33$ &
b33' (
.33( )
Id33) +
)33+ ,
.33, -
AsNoTracking33- 9
(339 :
)33: ;
.33; <

FirstAsync33< F
(33F G
)33G H
;33H I
}44 
public66 
async66	 
Task66 
<66 
ICollection66 
<66  
Category66  (
>66( )
>66) *
GetBlogCategories66+ <
(66< =
)66= >
{77 
return88 	
await88
 
_db88 
.88 

Categories88 
.88 
AsNoTracking88 +
(88+ ,
)88, -
.88- .
ToListAsync88. 9
(889 :
)88: ;
;88; <
}99 
public;; 
async;;	 
Task;; 
<;; 
bool;; 
>;; 
Update;;  
(;;  !
Blog;;! %
blog;;& *
);;* +
{<< 
var== 
existing== 
=== 
await== 
_db== 
.== 
Blogs== !
.==! "
OrderBy==" )
(==) *
b==* +
=>==, .
b==/ 0
.==0 1
Id==1 3
)==3 4
.==4 5

FirstAsync==5 ?
(==? @
)==@ A
;==A B
existing?? 
.?? 
Title?? 
=?? 
blog?? 
.?? 
Title?? 
;?? 
existing@@ 
.@@ 
Description@@ 
=@@ 
blog@@ 
.@@ 
Description@@ *
;@@* +
existingAA 
.AA 
ItemsPerPageAA 
=AA 
blogAA 
.AA  
ItemsPerPageAA  ,
;AA, -
existingBB 
.BB 
IncludeFeaturedBB 
=BB 
blogBB "
.BB" #
IncludeFeaturedBB# 2
;BB2 3
existingCC 
.CC 
ThemeCC 
=CC 
blogCC 
.CC 
ThemeCC 
;CC 
existingDD 
.DD 
CoverDD 
=DD 
blogDD 
.DD 
CoverDD 
;DD 
existingEE 
.EE 
LogoEE 
=EE 
blogEE 
.EE 
LogoEE 
;EE 
existingFF 
.FF 
HeaderScriptFF !
=FF" #
blogFF$ (
.FF( )
HeaderScriptFF) 5
;FF5 6
existingGG 
.GG 
FooterScriptGG !
=GG" #
blogGG$ (
.GG( )
FooterScriptGG) 5
;GG5 6
existingHH 
.HH 
AnalyticsListTypeHH &
=HH' (
blogHH) -
.HH- .
AnalyticsListTypeHH. ?
;HH? @
existingII 
.II 
AnalyticsPeriodII $
=II% &
blogII' +
.II+ ,
AnalyticsPeriodII, ;
;II; <
returnKK 	
awaitKK
 
_dbKK 
.KK 
SaveChangesAsyncKK $
(KK$ %
)KK% &
>KK' (
$numKK) *
;KK* +
}LL 
privateNN 	
asyncNN
 
TaskNN 
<NN 
dynamicNN 
>NN 
	GetValuesNN '
(NN' (
stringNN( .
themeNN/ 4
)NN4 5
{OO 
varPP 
settingsPP 
=PP 
awaitPP 
_storageProviderPP (
.PP( )
GetThemeSettingsPP) 9
(PP9 :
themePP: ?
)PP? @
;PP@ A
varQQ 
valuesQQ 
=QQ 
newQQ 

DictionaryQQ 
<QQ 
stringQQ %
,QQ% &
stringQQ' -
>QQ- .
(QQ. /
)QQ/ 0
;QQ0 1
ifSS 
(SS 
settingsSS 
!=SS 
nullSS 
&&SS 
settingsSS #
.SS# $
SectionsSS$ ,
!=SS- /
nullSS0 4
)SS4 5
{TT 
foreachUU 
(UU 
varUU 
sectionUU 
inUU 
settingsUU $
.UU$ %
SectionsUU% -
)UU- .
{VV 
ifWW 
(WW 	
sectionWW	 
.WW 
FieldsWW 
!=WW 
nullWW 
)WW  
{XX 
foreachYY 
(YY 
varYY 
fieldYY 
inYY 
sectionYY #
.YY# $
FieldsYY$ *
)YY* +
{ZZ 
values[[ 
.[[ 
Add[[ 
([[ 
field[[ 
.[[ 
Id[[ 
,[[ 
field[[ !
.[[! "
Value[[" '
)[[' (
;[[( )
}\\ 
}]] 
}^^ 
}__ 
return`` 	
values``
 
;`` 
}aa 
}bb 
}cc  ë
xC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\CategoryProvider.cs
	namespace		 	
	Blogifier		
 
.		 
Core		 
.		 
	Providers		 "
{

 
public 
	interface 
ICategoryProvider #
{ 
Task 
< 
List 
< 
CategoryItem 
> 
>  

Categories! +
(+ ,
), -
;- .
Task 
< 
List 
< 
CategoryItem 
> 
>  
SearchCategories! 1
(1 2
string2 8
term9 =
)= >
;> ?
Task 
< 
Category 
> 
GetCategory "
(" #
int# &

categoryId' 1
)1 2
;2 3
Task 
< 
ICollection 
< 
Category !
>! "
>" #
GetPostCategories$ 5
(5 6
int6 9
postId: @
)@ A
;A B
Task 
< 
bool 
> 
SaveCategory 
(  
Category  (
category) 1
)1 2
;2 3
Task 
< 
Category 
> 
SaveCategory #
(# $
string$ *
tag+ .
). /
;/ 0
Task 
< 
bool 
> 
AddPostCategory "
(" #
int# &
postId' -
,- .
string/ 5
tag6 9
)9 :
;: ;
Task 
< 
bool 
> 
SavePostCategories %
(% &
int& )
postId* 0
,0 1
List2 6
<6 7
Category7 ?
>? @

categoriesA K
)K L
;L M
Task 
< 
bool 
> 
RemoveCategory !
(! "
int" %

categoryId& 0
)0 1
;1 2
} 
public 
class 
CategoryProvider 
:  
ICategoryProvider! 2
{ 
private 	
readonly
 
AppDbContext 
_db  #
;# $
public   
CategoryProvider  	 
(   
AppDbContext   &
db  ' )
)  ) *
{!! 
_db"" 
="" 
db""	 
;"" 
}## 
public%% 
async%% 
Task%% 
<%% 
List%% 
<%% 
CategoryItem%% +
>%%+ ,
>%%, -

Categories%%. 8
(%%8 9
)%%9 :
{&& 	
var'' 
cats'' 
='' 
new'' 
List'' 
<''  
CategoryItem''  ,
>'', -
(''- .
)''. /
;''/ 0
if)) 
()) 
_db)) 
.)) 
Posts)) 
!=)) 
null)) !
&&))" $
_db))% (
.))( )
Posts))) .
.)). /
Count))/ 4
())4 5
)))5 6
>))7 8
$num))9 :
))): ;
{** 
foreach++ 
(++ 
var++ 
pc++ 
in++  "
_db++# &
.++& '
PostCategories++' 5
.++5 6
Include++6 =
(++= >
pc++> @
=>++A C
pc++D F
.++F G
Category++G O
)++O P
.++P Q
AsNoTracking++Q ]
(++] ^
)++^ _
)++_ `
{,, 
if-- 
(-- 
!-- 
cats-- 
.-- 
Exists-- $
(--$ %
c--% &
=>--' )
c--* +
.--+ ,
Category--, 4
.--4 5
ToLower--5 <
(--< =
)--= >
==--? A
pc--B D
.--D E
Category--E M
.--M N
Content--N U
.--U V
ToLower--V ]
(--] ^
)--^ _
)--_ `
)--` a
{.. 
cats// 
.// 
Add//  
(//  !
new//! $
CategoryItem//% 1
{00 
Selected11 $
=11% &
false11' ,
,11, -
Id22 
=22  
pc22! #
.22# $

CategoryId22$ .
,22. /
Category33 $
=33% &
pc33' )
.33) *
Category33* 2
.332 3
Content333 :
.33: ;
ToLower33; B
(33B C
)33C D
,33D E
	PostCount44 %
=44& '
$num44( )
,44) *
DateCreated55 '
=55( )
pc55* ,
.55, -
Category55- 5
.555 6
DateCreated556 A
}66 
)66 
;66 
}77 
else88 
{99 
var;; 
tmp;; 
=;;  !
cats;;" &
.;;& '
Where;;' ,
(;;, -
c;;- .
=>;;/ 1
c;;2 3
.;;3 4
Category;;4 <
.;;< =
ToLower;;= D
(;;D E
);;E F
==;;G I
pc;;J L
.;;L M
Category;;M U
.;;U V
Content;;V ]
.;;] ^
ToLower;;^ e
(;;e f
);;f g
);;g h
.;;h i
FirstOrDefault;;i w
(;;w x
);;x y
;;;y z
tmp<< 
.<< 
	PostCount<< %
++<<% '
;<<' (
}== 
}>> 
}?? 
return@@ 
await@@ 
Task@@ 
.@@ 

FromResult@@ (
(@@( )
cats@@) -
)@@- .
;@@. /
}AA 	
publicCC 
asyncCC 
TaskCC 
<CC 
ListCC 
<CC 
CategoryItemCC +
>CC+ ,
>CC, -
SearchCategoriesCC. >
(CC> ?
stringCC? E
termCCF J
)CCJ K
{DD 	
varEE 
catsEE 
=EE 
awaitEE 

CategoriesEE '
(EE' (
)EE( )
;EE) *
ifGG 
(GG 
termGG 
==GG 
$strGG 
)GG 
returnHH 
catsHH 
;HH 
returnJJ 
catsJJ 
.JJ 
WhereJJ 
(JJ 
cJJ 
=>JJ  "
cJJ# $
.JJ$ %
CategoryJJ% -
.JJ- .
ToLowerJJ. 5
(JJ5 6
)JJ6 7
.JJ7 8
ContainsJJ8 @
(JJ@ A
termJJA E
.JJE F
ToLowerJJF M
(JJM N
)JJN O
)JJO P
)JJP Q
.JJQ R
ToListJJR X
(JJX Y
)JJY Z
;JJZ [
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
CategoryMM "
>MM" #
GetCategoryMM$ /
(MM/ 0
intMM0 3

categoryIdMM4 >
)MM> ?
{NN 	
returnOO 
awaitOO 
_dbOO 
.OO 

CategoriesOO '
.OO' (
AsNoTrackingOO( 4
(OO4 5
)OO5 6
.PP 
WherePP 
(PP 
cPP 
=>PP 
cPP 
.PP 
IdPP  
==PP! #

categoryIdPP$ .
)PP. /
.QQ 
FirstOrDefaultAsyncQQ $
(QQ$ %
)QQ% &
;QQ& '
}RR 	
publicTT 
asyncTT 
TaskTT 
<TT 
ICollectionTT %
<TT% &
CategoryTT& .
>TT. /
>TT/ 0
GetPostCategoriesTT1 B
(TTB C
intTTC F
postIdTTG M
)TTM N
{UU 
returnVV 
awaitVV 
_dbVV 
.VV 
PostCategoriesVV +
.VV+ ,
AsNoTrackingVV, 8
(VV8 9
)VV9 :
.WW 
WhereWW 
(WW 
pcWW 
=>WW 
pcWW 
.WW  
PostIdWW  &
==WW' )
postIdWW* 0
)WW0 1
.XX 
SelectXX 
(XX 
pcXX 
=>XX 
pcXX  
.XX  !
CategoryXX! )
)XX) *
.YY 
ToListAsyncYY 
(YY 
)YY 
;YY 
}ZZ 
public\\ 
async\\ 
Task\\ 
<\\ 
bool\\ 
>\\ 
SaveCategory\\  ,
(\\, -
Category\\- 5
category\\6 >
)\\> ?
{]] 	
Categorydd 

dbCategorydd 
=dd  !
awaitdd" '
_dbdd( +
.dd+ ,

Categoriesdd, 6
.dd6 7
Wheredd7 <
(dd< =
cdd= >
=>dd? A
cddB C
.ddC D
IdddD F
==ddG I
categoryddJ R
.ddR S
IdddS U
)ddU V
.ddV W
FirstOrDefaultAsyncddW j
(ddj k
)ddk l
;ddl m
ifee 
(ee 

dbCategoryee 
==ee 
nullee "
)ee" #
returnff 
falseff 
;ff 

dbCategoryhh 
.hh 
Contenthh 
=hh  
categoryhh! )
.hh) *
Contenthh* 1
;hh1 2

dbCategoryii 
.ii 
Descriptionii "
=ii# $
categoryii% -
.ii- .
Descriptionii. 9
;ii9 :

dbCategoryjj 
.jj 
DateUpdatedjj "
=jj# $
DateTimejj% -
.jj- .
UtcNowjj. 4
;jj4 5
returnll 
awaitll 
_dbll 
.ll 
SaveChangesAsyncll -
(ll- .
)ll. /
>ll0 1
$numll2 3
;ll3 4
}mm 	
publicoo 
asyncoo	 
Taskoo 
<oo 
Categoryoo 
>oo 
SaveCategoryoo *
(oo* +
stringoo+ 1
tagoo2 5
)oo5 6
{pp 
Categoryqq 
categoryqq 
=qq 
awaitqq 
_dbqq  
.qq  !

Categoriesqq! +
.rr 
AsNoTrackingrr 
(rr 
)rr 
.ss 
Wheress 
(ss 
css 
=>ss 
css 
.ss 
Contentss %
==ss& (
tagss) ,
)ss, -
.tt 
FirstOrDefaultAsynctt $
(tt$ %
)tt% &
;tt& '
ifvv 
(vv 
categoryvv 
!=vv 
nullvv  
)vv  !
returnww 
categoryww 
;ww  
categoryyy 
=yy 
newyy 
Categoryyy #
(yy# $
)yy$ %
{zz 
Content{{ 
={{ 
tag{{ 
,{{ 
DateCreated|| 
=|| 
DateTime|| &
.||& '
UtcNow||' -
}}} 
;}} 
_db~~ 
.~~ 

Categories~~ 
.~~ 
Add~~ 
(~~ 
category~~ '
)~~' (
;~~( )
await 
_db	 
. 
SaveChangesAsync 
( 
) 
;  
return
ÅÅ 
category
ÅÅ 
;
ÅÅ 
}
ÇÇ 
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
bool
ÑÑ 
>
ÑÑ 
AddPostCategory
ÑÑ  /
(
ÑÑ/ 0
int
ÑÑ0 3
postId
ÑÑ4 :
,
ÑÑ: ;
string
ÑÑ< B
tag
ÑÑC F
)
ÑÑF G
{
ÖÖ 	
Category
ÜÜ 
category
ÜÜ 
=
ÜÜ 
await
ÜÜ  %
SaveCategory
ÜÜ& 2
(
ÜÜ2 3
tag
ÜÜ3 6
)
ÜÜ6 7
;
ÜÜ7 8
if
àà 
(
àà 
category
àà 
==
àà 
null
àà  
)
àà  !
return
ââ 
false
ââ 
;
ââ 
Post
ãã 
post
ãã 
=
ãã 
await
ãã 
_db
ãã !
.
ãã! "
Posts
ãã" '
.
ãã' (
Where
ãã( -
(
ãã- .
p
ãã. /
=>
ãã0 2
p
ãã3 4
.
ãã4 5
Id
ãã5 7
==
ãã8 :
postId
ãã; A
)
ããA B
.
ããB C!
FirstOrDefaultAsync
ããC V
(
ããV W
)
ããW X
;
ããX Y
if
åå 
(
åå 
post
åå 
==
åå 
null
åå 
)
åå 
return
çç 
false
çç 
;
çç 
if
èè 
(
èè 
post
èè 
.
èè 
PostCategories
èè #
==
èè$ &
null
èè' +
)
èè+ ,
post
êê 
.
êê 
PostCategories
êê #
=
êê$ %
new
êê& )
List
êê* .
<
êê. /
PostCategory
êê/ ;
>
êê; <
(
êê< =
)
êê= >
;
êê> ?
PostCategory
íí 
postCategory
íí %
=
íí& '
await
íí( -
_db
íí. 1
.
íí1 2
PostCategories
íí2 @
.
ìì 
AsNoTracking
ìì 
(
ìì 
)
ìì 
.
îî 
Where
îî 
(
îî 
pc
îî 
=>
îî 
pc
îî 
.
îî  

CategoryId
îî  *
==
îî+ -
category
îî. 6
.
îî6 7
Id
îî7 9
)
îî9 :
.
ïï 
Where
ïï 
(
ïï 
pc
ïï 
=>
ïï 
pc
ïï 
.
ïï  
PostId
ïï  &
==
ïï' )
postId
ïï* 0
)
ïï0 1
.
ññ !
FirstOrDefaultAsync
ññ $
(
ññ$ %
)
ññ% &
;
ññ& '
if
òò 
(
òò 
postCategory
òò 
==
òò 
null
òò  $
)
òò$ %
{
ôô 
_db
öö 
.
öö 
PostCategories
öö "
.
öö" #
Add
öö# &
(
öö& '
new
öö' *
PostCategory
öö+ 7
{
õõ 

CategoryId
úú 
=
úú  
category
úú! )
.
úú) *
Id
úú* ,
,
úú, -
PostId
ùù 
=
ùù 
postId
ùù #
}
ûû 
)
ûû 
;
ûû 
return
üü 
await
üü 
_db
üü  
.
üü  !
SaveChangesAsync
üü! 1
(
üü1 2
)
üü2 3
>
üü4 5
$num
üü6 7
;
üü7 8
}
†† 
return
¢¢ 
false
¢¢ 
;
¢¢ 
}
££ 	
public
•• 
async
•• 
Task
•• 
<
•• 
bool
•• 
>
••  
SavePostCategories
••  2
(
••2 3
int
••3 6
postId
••7 =
,
••= >
List
••? C
<
••C D
Category
••D L
>
••L M

categories
••N X
)
••X Y
{
¶¶ 	
List
ßß 
<
ßß 
PostCategory
ßß 
>
ßß $
existingPostCategories
ßß 5
=
ßß6 7
await
ßß8 =
_db
ßß> A
.
ßßA B
PostCategories
ßßB P
.
ßßP Q
AsNoTracking
ßßQ ]
(
ßß] ^
)
ßß^ _
.
®® 
Where
®® 
(
®® 
pc
®® 
=>
®® 
pc
®® 
.
®®  
PostId
®®  &
==
®®' )
postId
®®* 0
)
®®0 1
.
®®1 2
ToListAsync
®®2 =
(
®®= >
)
®®> ?
;
®®? @
_db
™™ 
.
™™ 
PostCategories
™™ 
.
™™ 
RemoveRange
™™ *
(
™™* +$
existingPostCategories
™™+ A
)
™™A B
;
™™B C
await
¨¨ 
_db
¨¨ 
.
¨¨ 
SaveChangesAsync
¨¨ &
(
¨¨& '
)
¨¨' (
;
¨¨( )
foreach
ÆÆ 
(
ÆÆ 
var
ÆÆ 
cat
ÆÆ 
in
ÆÆ 

categories
ÆÆ  *
)
ÆÆ* +
{
ØØ 
await
∞∞ 
AddPostCategory
∞∞ %
(
∞∞% &
postId
∞∞& ,
,
∞∞, -
cat
∞∞. 1
.
∞∞1 2
Content
∞∞2 9
)
∞∞9 :
;
∞∞: ;
}
±± 
return
≥≥ 
await
≥≥ 
_db
≥≥ 
.
≥≥ 
SaveChangesAsync
≥≥ -
(
≥≥- .
)
≥≥. /
>
≥≥0 1
$num
≥≥2 3
;
≥≥3 4
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
bool
∂∂ 
>
∂∂ 
RemoveCategory
∂∂  .
(
∂∂. /
int
∂∂/ 2

categoryId
∂∂3 =
)
∂∂= >
{
∑∑ 	
List
∏∏ 
<
∏∏ 
PostCategory
∏∏ 
>
∏∏ 
postCategories
∏∏ -
=
∏∏. /
await
∏∏0 5
_db
∏∏6 9
.
∏∏9 :
PostCategories
∏∏: H
.
ππ 
AsNoTracking
ππ 
(
ππ 
)
ππ 
.
∫∫ 
Where
∫∫ 
(
∫∫ 
pc
∫∫ 
=>
∫∫ 
pc
∫∫ 
.
∫∫  

CategoryId
∫∫  *
==
∫∫+ -

categoryId
∫∫. 8
)
∫∫8 9
.
ªª 
ToListAsync
ªª 
(
ªª 
)
ªª 
;
ªª 
_db
ºº 
.
ºº 
PostCategories
ºº 
.
ºº 
RemoveRange
ºº *
(
ºº* +
postCategories
ºº+ 9
)
ºº9 :
;
ºº: ;
Category
ææ 
category
ææ 
=
ææ 
_db
ææ  #
.
ææ# $

Categories
ææ$ .
.
øø 
Where
øø 
(
øø 
c
øø  
=>
øø! #
c
øø$ %
.
øø% &
Id
øø& (
==
øø) +

categoryId
øø, 6
)
øø6 7
.
¿¿ 
FirstOrDefault
¿¿ '
(
¿¿' (
)
¿¿( )
;
¿¿) *
_db
¡¡ 
.
¡¡ 

Categories
¡¡ 
.
¡¡ 
Remove
¡¡ !
(
¡¡! "
category
¡¡" *
)
¡¡* +
;
¡¡+ ,
return
√√ 
await
√√ 
_db
√√ 
.
√√ 
SaveChangesAsync
√√ -
(
√√- .
)
√√. /
>
√√0 1
$num
√√2 3
;
√√3 4
}
ƒƒ 	
}
≈≈ 
}∆∆ ô.
uC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\EmailProvider.cs
	namespace		 	
	Blogifier		
 
.		 
Core		 
.		 
	Providers		 "
{

 
public 
	interface 
IEmailProvider  
{ 
Task 
< 
bool 
> 
	SendEmail 
( 
MailSetting "
settings# +
,+ ,
List- 1
<1 2

Subscriber2 <
>< =
subscribers> I
,I J
stringK Q
subjectR Y
,Y Z
string[ a
contentb i
)i j
;j k
} 
public 
class 
MailKitProvider 
: 
IEmailProvider  .
{ 
public 
MailKitProvider	 
( 
) 
{ 
} 
public 
async	 
Task 
< 
bool 
> 
	SendEmail #
(# $
MailSetting$ /
settings0 8
,8 9
List: >
<> ?

Subscriber? I
>I J
subscribersK V
,V W
stringX ^
subject_ f
,f g
stringh n
contento v
)v w
{ 
var	 
client 
= 
	GetClient 
(  
settings  (
)( )
;) *
if	 
( 
client 
== 
null 
) 
return 
false 
; 
var	 
bodyBuilder 
= 
new 
BodyBuilder *
(* +
)+ ,
;, -
bodyBuilder	 
. 
HtmlBody 
= 
content  '
;' (
foreach 

( 
var 

subscriber 
in 
subscribers )
)) *
{ 
try 
{   
var!! 
message!! 
=!! 
new!!  
MimeMessage!!! ,
(!!, -
)!!- .
;!!. /
message"" 
."" 
Subject"" 
=""  
subject""! (
;""( )
message## 
.## 
Body## 
=## 
bodyBuilder## )
.##) *
ToMessageBody##* 7
(##7 8
)##8 9
;##9 :
message%% 
.%% 
From%% 
.%% 
Add%% 
(%%  
new%%  #
MailboxAddress%%$ 2
(%%2 3
settings%%3 ;
.%%; <
FromName%%< D
,%%D E
settings%%F N
.%%N O
	FromEmail%%O X
)%%X Y
)%%Y Z
;%%Z [
message&& 
.&& 
To&& 
.&& 
Add&& 
(&& 
new&& !
MailboxAddress&&" 0
(&&0 1
settings&&1 9
.&&9 :
ToName&&: @
,&&@ A

subscriber&&B L
.&&L M
Email&&M R
)&&R S
)&&S T
;&&T U
client'' 
.'' 
Send'' 
('' 
message'' "
)''" #
;''# $
}(( 
catch)) 	
())
 
	Exception)) 
ex)) 
))) 
{** 
Serilog++ 
.++ 
Log++ 
.++ 
Warning++ "
(++" #
$"++# %
$str++% <
{++< =

subscriber++= G
.++G H
Email++H M
}++M N
$str++N P
{++P Q
ex++Q S
.++S T
Message++T [
}++[ \
"++\ ]
)++] ^
;++^ _
},, 
}--	 

client//	 
.// 

Disconnect// 
(// 
true// 
)//  
;//  !
return00	 
await00 
Task00 
.00 

FromResult00 %
(00% &
true00& *
)00* +
;00+ ,
}11 
private33 

SmtpClient33 
	GetClient33 "
(33" #
MailSetting33# .
settings33/ 7
)337 8
{44 
try55 
{66 
var77 
client77 
=77 
new77 

SmtpClient77 '
(77' (
)77( )
;77) *
client88 
.88 /
#ServerCertificateValidationCallback88 6
=887 8
(889 :
s88: ;
,88; <
c88= >
,88> ?
h88@ A
,88A B
e88C D
)88D E
=>88F H
true88I M
;88M N
client99 
.99 
Connect99 
(99 
settings99 #
.99# $
Host99$ (
,99( )
settings99* 2
.992 3
Port993 7
,997 8
SecureSocketOptions999 L
.99L M
Auto99M Q
)99Q R
;99R S
client:: 
.:: 
Authenticate:: 
(::  
settings::  (
.::( )
	UserEmail::) 2
,::2 3
settings::4 <
.::< =
UserPassword::= I
)::I J
;::J K
return<< 
client<< 
;<< 
}==	 

catch>> 
(>>	 

	Exception>>
 
ex>> 
)>> 
{?? 
Serilog@@ 
.@@ 
Log@@ 
.@@ 
Error@@ 
(@@ 
$"@@  
$str@@  A
{@@A B
ex@@B D
.@@D E
Message@@E L
}@@L M
"@@M N
)@@N O
;@@O P
returnAA 
nullAA 
;AA 
}BB 
}DD 
}EE 
}FF Û$
tC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\FeedProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{		 
public

 
	interface

 
IFeedProvider

 
{ 
Task 

<
 
IEnumerable 
< 
	AtomEntry  
>  !
>! "

GetEntries# -
(- .
string. 4
type5 9
,9 :
string; A
hostB F
)F G
;G H
} 
public 
class 
FeedProvider 
: 
IFeedProvider *
{ 
	protected 
readonly 
IPostProvider &
_postProvider' 4
;4 5
public 
FeedProvider	 
( 
IPostProvider #
postProvider$ 0
)0 1
{ 
_postProvider	 
= 
postProvider %
;% &
} 
public 
async 
Task 
< 
IEnumerable #
<# $
	AtomEntry$ -
>- .
>. /

GetEntries0 :
(: ;
string; A
typeB F
,F G
stringH N
hostO S
)S T
{ 
var	 
items 
= 
new 
List 
< 
	AtomEntry '
>' (
(( )
)) *
;* +
var	 
posts 
= 
await 
_postProvider (
.( )
GetList) 0
(0 1
new1 4
Pager5 :
(: ;
$num; <
)< =
,= >
$num? @
,@ A
$strB D
,D E
$strF I
)I J
;J K
foreach	 
( 
var 
post 
in 
posts #
)# $
{	 

var 
item 
= 
new 
	AtomEntry $
{   
Title!! 
=!! 
post!! 
.!! 
Title!! !
,!!! "
Description"" 
="" 
post"" !
.""! "
Content""" )
,"") *
Id## 
=## 
$"## 
{## 
host## 
}## 
$str## #
{### $
post##$ (
.##( )
Slug##) -
}##- .
"##. /
,##/ 0
	Published$$ 
=$$ 
post$$ 
.$$  
	Published$$  )
,$$) *
LastUpdated%% 
=%% 
post%% !
.%%! "
	Published%%" +
,%%+ ,
ContentType&& 
=&& 
$str&& #
,&&# $
}'' 
;'' 
if)) 
()) 
post)) 
.)) 

Categories)) 
!=))  "
null))# '
&&))( *
post))+ /
.))/ 0

Categories))0 :
.)): ;
Count)); @
>))A B
$num))C D
)))D E
{** 
foreach++ 
(++ 
Category++  
category++! )
in++* ,
post++- 1
.++1 2

Categories++2 <
)++< =
{,, 
item-- 
.-- 
AddCategory-- "
(--" #
new--# &
SyndicationCategory--' :
(--: ;
category--; C
.--C D
Content--D K
)--K L
)--L M
;--M N
}.. 
}// 
item11 
.11 
AddContributor11 
(11  
new11  #
SyndicationPerson11$ 5
(115 6
post116 :
.11: ;
Author11; A
.11A B
Email11B G
,11G H
post11I M
.11M N
Author11N T
.11T U
DisplayName11U `
)11` a
)11a b
;11b c
item22 
.22 
AddLink22 
(22 
new22 
SyndicationLink22 ,
(22, -
new22- 0
Uri221 4
(224 5
item225 9
.229 :
Id22: <
)22< =
)22= >
)22> ?
;22? @
items33 
.33 
Add33 
(33 
item33 
)33 
;33 
}44	 

return66	 
await66 
Task66 
.66 

FromResult66 %
(66% &
items66& +
)66+ ,
;66, -
}77 
}88 
}99 ÷á
zC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\NewsletterProvider.cs
	namespace

 	
	Blogifier


 
.

 
Core

 
.

 
	Providers

 "
{ 
public 
	interface 
INewsletterProvider %
{ 
Task 
< 
List 
< 

Subscriber 
> 
> 
GetSubscribers '
(' (
)( )
;) *
Task 
< 
bool 
> 
AddSubscriber 
( 

Subscriber %

subscriber& 0
)0 1
;1 2
Task 
< 
bool 
> 
RemoveSubscriber 
( 
int !
id" $
)$ %
;% &
Task 
< 
List 
< 

Newsletter 
> 
> 
GetNewsletters '
(' (
)( )
;) *
Task 
< 
bool 
> 
SendNewsletter 
( 
int 
postId  &
)& '
;' (
Task 
< 
bool 
> 
RemoveNewsletter 
( 
int !
id" $
)$ %
;% &
Task 
< 
MailSetting 
> 
GetMailSettings #
(# $
)$ %
;% &
Task 
< 
bool 
> 
SaveMailSettings 
( 
MailSetting )
mail* .
). /
;/ 0
} 
public 
class 
NewsletterProvider  
:! "
INewsletterProvider# 6
{ 
private 	
readonly
 
AppDbContext 
_db  #
;# $
private 	
readonly
 
IEmailProvider !
_emailProvider" 0
;0 1
public 
NewsletterProvider	 
( 
AppDbContext (
db) +
,+ ,
IEmailProvider- ;
emailProvider< I
)I J
{   
_db!! 
=!! 
db!!	 
;!! 
_emailProvider"" 
="" 
emailProvider"" !
;""! "
}## 
public&& 
async&&	 
Task&& 
<&& 
List&& 
<&& 

Subscriber&& #
>&&# $
>&&$ %
GetSubscribers&&& 4
(&&4 5
)&&5 6
{'' 
return(( 	
await((
 
_db(( 
.(( 
Subscribers(( 
.((  
AsNoTracking((  ,
(((, -
)((- .
.((. /
OrderByDescending((/ @
(((@ A
s((A B
=>((C E
s((F G
.((G H
Id((H J
)((J K
.((K L
ToListAsync((L W
(((W X
)((X Y
;((Y Z
})) 
public++ 
async++	 
Task++ 
<++ 
bool++ 
>++ 
AddSubscriber++ '
(++' (

Subscriber++( 2

subscriber++3 =
)++= >
{,, 
var-- 
existing-- 
=-- 
await-- 
_db-- 
.-- 
Subscribers-- '
.--' (
AsNoTracking--( 4
(--4 5
)--5 6
.--6 7
Where--7 <
(--< =
s--= >
=>--? A
s--B C
.--C D
Email--D I
==--J L

subscriber--M W
.--W X
Email--X ]
)--] ^
.--^ _
FirstOrDefaultAsync--_ r
(--r s
)--s t
;--t u
if.. 
(.. 
existing.. 
==.. 
null.. 
).. 
{// 

subscriber00 
.00 
DateCreated00 
=00 
DateTime00 %
.00% &
UtcNow00& ,
;00, -
_db11 
.11 
Subscribers11 
.11 
Add11 
(11 

subscriber11 "
)11" #
;11# $
return22 

await22 
_db22 
.22 
SaveChangesAsync22 %
(22% &
)22& '
>22( )
$num22* +
;22+ ,
}33 
return44 	
true44
 
;44 
}55 
public77 
async77	 
Task77 
<77 
bool77 
>77 
RemoveSubscriber77 *
(77* +
int77+ .
id77/ 1
)771 2
{88 
var99 
existing99 
=99 
_db99 
.99 
Subscribers99 !
.99! "
Where99" '
(99' (
s99( )
=>99* ,
s99- .
.99. /
Id99/ 1
==992 4
id995 7
)997 8
.998 9
FirstOrDefault999 G
(99G H
)99H I
;99I J
if:: 
(:: 
existing:: 
!=:: 
null:: 
):: 
{;; 
_db<< 
.<< 
Subscribers<< 
.<< 
Remove<< 
(<< 
existing<< #
)<<# $
;<<$ %
return== 

await== 
_db== 
.== 
SaveChangesAsync== %
(==% &
)==& '
>==( )
$num==* +
;==+ ,
}>> 
return?? 	
false??
 
;?? 
}@@ 
publicCC 
asyncCC	 
TaskCC 
<CC 
ListCC 
<CC 

NewsletterCC #
>CC# $
>CC$ %
GetNewslettersCC& 4
(CC4 5
)CC5 6
{DD 
returnEE 	
awaitEE
 
_dbEE 
.EE 
NewslettersEE 
.EE  
AsNoTrackingEE  ,
(EE, -
)EE- .
.FF 
IncludeFF 
(FF 
nFF 
=>FF 
nFF 
.FF 
PostFF 
)FF 
.GG 
OrderByDescendingGG 
(GG 
nGG 
=>GG 
nGG 
.GG 
IdGG  
)GG  !
.HH 
ToListAsyncHH 
(HH 
)HH 
;HH 
}II 
privateKK 	
asyncKK
 
TaskKK 
<KK 
boolKK 
>KK 
SaveNewsletterKK )
(KK) *
intKK* -
postIdKK. 4
,KK4 5
boolKK6 :
successKK; B
)KKB C
{LL 
varMM 
existingMM 
=MM 
awaitMM 
_dbMM 
.MM 
NewslettersMM '
.MM' (
WhereMM( -
(MM- .
nMM. /
=>MM0 2
nMM3 4
.MM4 5
PostIdMM5 ;
==MM< >
postIdMM? E
)MME F
.MMF G
FirstOrDefaultAsyncMMG Z
(MMZ [
)MM[ \
;MM\ ]
ifOO 
(OO 
existingOO 
!=OO 
nullOO 
)OO 
{PP 
existingQQ 
.QQ 
DateUpdatedQQ 
=QQ 
DateTimeQQ #
.QQ# $
UtcNowQQ$ *
;QQ* +
existingRR 
.RR 
SuccessRR 
=RR 
successRR 
;RR 
}SS 
elseTT 
{UU 
varVV 

newsletterVV 
=VV 
newVV 

NewsletterVV #
(VV# $
)VV$ %
{WW 
PostIdXX 
=XX 
postIdXX 
,XX 
DateCreatedYY 
=YY 
DateTimeYY 
.YY 
UtcNowYY "
,YY" #
SuccessZZ 
=ZZ 
successZZ 
,ZZ 
Post[[ 	
=[[
 
_db[[ 
.[[ 
Posts[[ 
.[[ 
Where[[ 
([[ 
p[[ 
=>[[  
p[[! "
.[[" #
Id[[# %
==[[& (
postId[[) /
)[[/ 0
.[[0 1
FirstOrDefault[[1 ?
([[? @
)[[@ A
}\\ 
;\\ 
_db]] 
.]] 
Newsletters]] 
.]] 
Add]] 
(]] 

newsletter]] "
)]]" #
;]]# $
}^^ 
return`` 	
await``
 
_db`` 
.`` 
SaveChangesAsync`` $
(``$ %
)``% &
>``' (
$num``) *
;``* +
}aa 
publiccc 
asynccc	 
Taskcc 
<cc 
boolcc 
>cc 
SendNewslettercc (
(cc( )
intcc) ,
postIdcc- 3
)cc3 4
{dd 
varee 
postee 
=ee 
awaitee 
_dbee 
.ee 
Postsee 
.ee 
AsNoTrackingee *
(ee* +
)ee+ ,
.ee, -
Whereee- 2
(ee2 3
pee3 4
=>ee5 7
pee8 9
.ee9 :
Idee: <
==ee= ?
postIdee@ F
)eeF G
.eeG H
FirstOrDefaultAsynceeH [
(ee[ \
)ee\ ]
;ee] ^
ifff 
(ff 
postff 
==ff 
nullff 
)ff 
returngg 

falsegg 
;gg 
varii 
subscribersii 
=ii 
awaitii 
_dbii 
.ii 
Subscribersii *
.ii* +
AsNoTrackingii+ 7
(ii7 8
)ii8 9
.ii9 :
ToListAsyncii: E
(iiE F
)iiF G
;iiG H
ifjj 
(jj 
subscribersjj 
==jj 
nulljj 
||jj 
subscribersjj )
.jj) *
Countjj* /
==jj0 2
$numjj3 4
)jj4 5
returnkk 

falsekk 
;kk 
varmm 
settingsmm 
=mm 
awaitmm 
_dbmm 
.mm 
MailSettingsmm (
.mm( )
AsNoTrackingmm) 5
(mm5 6
)mm6 7
.mm7 8
FirstOrDefaultAsyncmm8 K
(mmK L
)mmL M
;mmM N
ifnn 
(nn 
settingsnn 
==nn 
nullnn 
||nn 
settingsnn #
.nn# $
Enablednn$ +
==nn, .
falsenn/ 4
)nn4 5
returnoo 

falseoo 
;oo 
stringqq 	
subjectqq
 
=qq 
postqq 
.qq 
Titleqq 
;qq 
stringrr 	
contentrr
 
=rr 
postrr 
.rr 
Contentrr  
.rr  !
MdToHtmlrr! )
(rr) *
)rr* +
;rr+ ,
booltt 
senttt 
=tt 
awaittt 
_emailProvidertt #
.tt# $
	SendEmailtt$ -
(tt- .
settingstt. 6
,tt6 7
subscriberstt8 C
,ttC D
subjectttE L
,ttL M
contentttN U
)ttU V
;ttV W
booluu 
saveduu 
=uu 
awaituu 
SaveNewsletteruu $
(uu$ %
postIduu% +
,uu+ ,
sentuu- 1
)uu1 2
;uu2 3
returnww 	
sentww
 
&&ww 
savedww 
;ww 
}xx 
publiczz 
asynczz	 
Taskzz 
<zz 
boolzz 
>zz 
RemoveNewsletterzz *
(zz* +
intzz+ .
idzz/ 1
)zz1 2
{{{ 
var|| 
existing|| 
=|| 
_db|| 
.|| 
Newsletters|| !
.||! "
Where||" '
(||' (
s||( )
=>||* ,
s||- .
.||. /
Id||/ 1
==||2 4
id||5 7
)||7 8
.||8 9
FirstOrDefault||9 G
(||G H
)||H I
;||I J
if}} 
(}} 
existing}} 
!=}} 
null}} 
)}} 
{~~ 
_db 
. 
Newsletters 
. 
Remove 
( 
existing #
)# $
;$ %
return
ÄÄ 

await
ÄÄ 
_db
ÄÄ 
.
ÄÄ 
SaveChangesAsync
ÄÄ %
(
ÄÄ% &
)
ÄÄ& '
>
ÄÄ( )
$num
ÄÄ* +
;
ÄÄ+ ,
}
ÅÅ 
return
ÇÇ 	
false
ÇÇ
 
;
ÇÇ 
}
ÉÉ 
public
ÜÜ 
async
ÜÜ	 
Task
ÜÜ 
<
ÜÜ 
MailSetting
ÜÜ 
>
ÜÜ  
GetMailSettings
ÜÜ! 0
(
ÜÜ0 1
)
ÜÜ1 2
{
áá 
var
àà 
settings
àà 
=
àà 
await
àà 
_db
àà 
.
àà 
MailSettings
àà (
.
àà( )
AsNoTracking
àà) 5
(
àà5 6
)
àà6 7
.
àà7 8!
FirstOrDefaultAsync
àà8 K
(
ààK L
)
ààL M
;
ààM N
return
ââ 	
settings
ââ
 
==
ââ 
null
ââ 
?
ââ 
new
ââ  
MailSetting
ââ! ,
(
ââ, -
)
ââ- .
:
ââ/ 0
settings
ââ1 9
;
ââ9 :
}
ää 
public
åå 
async
åå	 
Task
åå 
<
åå 
bool
åå 
>
åå 
SaveMailSettings
åå *
(
åå* +
MailSetting
åå+ 6
mail
åå7 ;
)
åå; <
{
çç 
var
éé 
existing
éé 
=
éé 
await
éé 
_db
éé 
.
éé 
MailSettings
éé (
.
éé( )!
FirstOrDefaultAsync
éé) <
(
éé< =
)
éé= >
;
éé> ?
if
èè 
(
èè 
existing
èè 
==
èè 
null
èè 
)
èè 
{
êê 
var
ëë 
newMail
ëë 
=
ëë 
new
ëë 
MailSetting
ëë !
(
ëë! "
)
ëë" #
{
íí 
Host
ìì 	
=
ìì
 
mail
ìì 
.
ìì 
Host
ìì 
,
ìì 
Port
îî 	
=
îî
 
mail
îî 
.
îî 
Port
îî 
,
îî 
	UserEmail
ïï 
=
ïï 
mail
ïï 
.
ïï 
	UserEmail
ïï 
,
ïï  
UserPassword
ññ 
=
ññ 
mail
ññ 
.
ññ 
UserPassword
ññ %
,
ññ% &
	FromEmail
óó 
=
óó 
mail
óó 
.
óó 
	FromEmail
óó 
,
óó  
FromName
òò 
=
òò 
mail
òò 
.
òò 
FromName
òò 
,
òò 
ToName
ôô 
=
ôô 
mail
ôô 
.
ôô 
ToName
ôô 
,
ôô 
Enabled
öö 
=
öö 
mail
öö 
.
öö 
Enabled
öö 
,
öö 
DateCreated
õõ 
=
õõ 
DateTime
õõ 
.
õõ 
UtcNow
õõ "
,
õõ" #
Blog
úú 	
=
úú
 
_db
úú 
.
úú 
Blogs
úú 
.
úú 
FirstOrDefault
úú $
(
úú$ %
)
úú% &
}
ùù 
;
ùù 
_db
ûû 
.
ûû 
MailSettings
ûû 
.
ûû 
Add
ûû 
(
ûû 
newMail
ûû  
)
ûû  !
;
ûû! "
}
üü 
else
†† 
{
°° 
existing
¢¢ 
.
¢¢ 
Host
¢¢ 
=
¢¢ 
mail
¢¢ 
.
¢¢ 
Host
¢¢ 
;
¢¢ 
existing
££ 
.
££ 
Port
££ 
=
££ 
mail
££ 
.
££ 
Port
££ 
;
££ 
existing
§§ 
.
§§ 
	UserEmail
§§ 
=
§§ 
mail
§§ 
.
§§ 
	UserEmail
§§ '
;
§§' (
existing
•• 
.
•• 
UserPassword
•• 
=
•• 
mail
••  
.
••  !
UserPassword
••! -
;
••- .
existing
¶¶ 
.
¶¶ 
	FromEmail
¶¶ 
=
¶¶ 
mail
¶¶ 
.
¶¶ 
	FromEmail
¶¶ '
;
¶¶' (
existing
ßß 
.
ßß 
FromName
ßß 
=
ßß 
mail
ßß 
.
ßß 
FromName
ßß %
;
ßß% &
existing
®® 
.
®® 
ToName
®® 
=
®® 
mail
®® 
.
®® 
ToName
®® !
;
®®! "
existing
©© 
.
©© 
Enabled
©© 
=
©© 
mail
©© 
.
©© 
Enabled
©© #
;
©©# $
}
™™ 
return
´´ 	
await
´´
 
_db
´´ 
.
´´ 
SaveChangesAsync
´´ $
(
´´$ %
)
´´% &
>
´´' (
$num
´´) *
;
´´* +
}
¨¨ 
}
≠≠ 
}ÆÆ ƒ‚
tC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\PostProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{ 
public 
	interface 
IPostProvider 
{ 
Task 
< 
List 
< 
Post 
> 
> 
GetPosts 
( 
PublishedStatus +
filter, 2
,2 3
PostType4 <
postType= E
)E F
;F G
Task 
< 
List 
< 
Post 
> 
> 
SearchPosts 
( 
string %
term& *
)* +
;+ ,
Task 
< 
Post 
> 
GetPostById 
( 
int 
id 
)  
;  !
Task 
< 
Post 
> 
GetPostBySlug 
( 
string !
slug" &
)& '
;' (
Task 
< 
string 
> 
GetSlugFromTitle 
(  
string  &
title' ,
), -
;- .
Task 
< 
bool 
> 
Add 
( 
Post 
post 
) 
; 
Task 
< 
bool 
> 
Update 
( 
Post 
post 
) 
; 
Task 
< 
bool 
> 
Publish 
( 
int 
id 
, 
bool !
publish" )
)) *
;* +
Task 
< 
bool 
> 
Featured 
( 
int 
id 
, 
bool "
featured# +
)+ ,
;, -
Task 
< 
IEnumerable 
< 
PostItem 
> 
> 
GetPostItems *
(* +
)+ ,
;, -
Task 
< 
	PostModel 
> 
GetPostModel 
( 
string %
slug& *
)* +
;+ ,
Task 
< 
IEnumerable 
< 
PostItem 
> 
> 

GetPopular (
(( )
Pager) .
pager/ 4
,4 5
int6 9
author: @
=A B
$numC D
)D E
;E F
Task 
< 
IEnumerable 
< 
PostItem 
> 
> 
Search $
($ %
Pager% *
pager+ 0
,0 1
string2 8
term9 =
,= >
int? B
authorC I
=J K
$numL M
,M N
stringO U
includeV ]
=^ _
$str` b
,b c
boold h
sanitizei q
=r s
falset y
)y z
;z {
Task 
< 
IEnumerable 
< 
PostItem 
> 
> 
GetList %
(% &
Pager& +
pager, 1
,1 2
int3 6
author7 =
=> ?
$num@ A
,A B
stringC I
categoryJ R
=S T
$strU W
,W X
stringY _
include` g
=h i
$strj l
,l m
booln r
sanitizes {
=| }
true	~ Ç
)
Ç É
;
É Ñ
Task 
< 
bool 
> 
Remove 
( 
int 
id 
) 
; 
}   
public"" 
class"" 
PostProvider"" 
:"" 
IPostProvider"" *
{## 
private$$ 	
readonly$$
 
AppDbContext$$ 
_db$$  #
;$$# $
private%% 
readonly%% 
ICategoryProvider%% *
_categoryProvider%%+ <
;%%< =
private&& 
readonly&& 
IConfiguration&& '
_configuration&&( 6
;&&6 7
public(( 
PostProvider(( 
((( 
AppDbContext(( (
db(() +
,((+ ,
ICategoryProvider((- >
categoryProvider((? O
,((O P
IConfiguration((Q _
configuration((` m
)((m n
{)) 
_db** 
=** 
db**	 
;** 
_categoryProvider++ 
=++ 
categoryProvider++  0
;++0 1
_configuration,, 
=,, 
configuration,, *
;,,* +
}-- 
public// 
async//	 
Task// 
<// 
List// 
<// 
Post// 
>// 
>// 
GetPosts//  (
(//( )
PublishedStatus//) 8
filter//9 ?
,//? @
PostType//A I
postType//J R
)//R S
{00 
switch11 	
(11
 
filter11 
)11 
{22 
case33 
PublishedStatus33	 
.33 
	Published33 "
:33" #
return44 
await44 
_db44 
.44 
Posts44 
.44 
AsNoTracking44 (
(44( )
)44) *
.44* +
Where44+ 0
(440 1
p441 2
=>443 5
p446 7
.447 8
PostType448 @
==44A C
postType44D L
)44L M
.44M N
Where44N S
(44S T
p44T U
=>44V X
p44Y Z
.44Z [
	Published44[ d
>44e f
DateTime44g o
.44o p
MinValue44p x
)44x y
.44y z
OrderByDescending	44z ã
(
44ã å
p
44å ç
=>
44é ê
p
44ë í
.
44í ì
	Published
44ì ú
)
44ú ù
.
44ù û
ToListAsync
44û ©
(
44© ™
)
44™ ´
;
44´ ¨
case55 
PublishedStatus55	 
.55 
Drafts55 
:55  
return66 
await66 
_db66 
.66 
Posts66 
.66 
AsNoTracking66 (
(66( )
)66) *
.66* +
Where66+ 0
(660 1
p661 2
=>663 5
p666 7
.667 8
PostType668 @
==66A C
postType66D L
)66L M
.66M N
Where66N S
(66S T
p66T U
=>66V X
p66Y Z
.66Z [
	Published66[ d
==66e g
DateTime66h p
.66p q
MinValue66q y
)66y z
.66z {
OrderByDescending	66{ å
(
66å ç
p
66ç é
=>
66è ë
p
66í ì
.
66ì î
Id
66î ñ
)
66ñ ó
.
66ó ò
ToListAsync
66ò £
(
66£ §
)
66§ •
;
66• ¶
case77 
PublishedStatus77	 
.77 
Featured77 !
:77! "
return88 
await88 
_db88 
.88 
Posts88 
.88 
AsNoTracking88 (
(88( )
)88) *
.88* +
Where88+ 0
(880 1
p881 2
=>883 5
p886 7
.887 8
PostType888 @
==88A C
postType88D L
)88L M
.88M N
Where88N S
(88S T
p88T U
=>88V X
p88Y Z
.88Z [

IsFeatured88[ e
)88e f
.88f g
OrderByDescending88g x
(88x y
p88y z
=>88{ }
p88~ 
.	88 Ä
Id
88Ä Ç
)
88Ç É
.
88É Ñ
ToListAsync
88Ñ è
(
88è ê
)
88ê ë
;
88ë í
default99 
:99 
return:: 
await:: 
_db:: 
.:: 
Posts:: 
.:: 
AsNoTracking:: (
(::( )
)::) *
.::* +
Where::+ 0
(::0 1
p::1 2
=>::3 5
p::6 7
.::7 8
PostType::8 @
==::A C
postType::D L
)::L M
.::M N
OrderByDescending::N _
(::_ `
p::` a
=>::b d
p::e f
.::f g
Id::g i
)::i j
.::j k
ToListAsync::k v
(::v w
)::w x
;::x y
};; 
}<< 
public>> 
async>>	 
Task>> 
<>> 
List>> 
<>> 
Post>> 
>>> 
>>> 
SearchPosts>>  +
(>>+ ,
string>>, 2
term>>3 7
)>>7 8
{?? 
if@@ 
(@@ 
term@@ 
==@@ 
$str@@ 
)@@ 
returnAA 

awaitAA 
_dbAA 
.AA 
PostsAA 
.AA 
ToListAsyncAA &
(AA& '
)AA' (
;AA( )
returnCC 	
awaitCC
 
_dbCC 
.CC 
PostsCC 
.DD 
AsNoTrackingDD 
(DD 
)DD 
.EE 
WhereEE 

(EE
 
pEE 
=>EE 
pEE 
.EE 
TitleEE 
.EE 
ToLowerEE 
(EE  
)EE  !
.EE! "
ContainsEE" *
(EE* +
termEE+ /
.EE/ 0
ToLowerEE0 7
(EE7 8
)EE8 9
)EE9 :
)EE: ;
.FF 
ToListAsyncFF 
(FF 
)FF 
;FF 
}GG 
publicII 
asyncII	 
TaskII 
<II 
IEnumerableII 
<II  
PostItemII  (
>II( )
>II) *
SearchII+ 1
(II1 2
PagerII2 7
pagerII8 =
,II= >
stringII? E
termIIF J
,IIJ K
intIIL O
authorIIP V
=IIW X
$numIIY Z
,IIZ [
stringII\ b
includeIIc j
=IIk l
$strIIm o
,IIo p
boolIIq u
sanitizeIIv ~
=	II Ä
false
IIÅ Ü
)
IIÜ á
{JJ 
termKK 
=KK 
termKK 
.KK 
ToLowerKK 
(KK  
)KK  !
;KK! "
varLL 
skipLL 
=LL 
pagerLL 
.LL 
CurrentPageLL (
*LL) *
pagerLL+ 0
.LL0 1
ItemsPerPageLL1 =
-LL> ?
pagerLL@ E
.LLE F
ItemsPerPageLLF R
;LLR S
varNN 
resultsNN 
=NN 
newNN 
ListNN 
<NN 
SearchResultNN &
>NN& '
(NN' (
)NN( )
;NN) *
varOO 
termListOO 
=OO 
termOO 
.OO 
ToLowerOO 
(OO 
)OO  
.OO  !
SplitOO! &
(OO& '
$charOO' *
)OO* +
.OO+ ,
ToListOO, 2
(OO2 3
)OO3 4
;OO4 5
varPP 

categoriesPP 
=PP 
awaitPP "
_dbPP# &
.PP& '

CategoriesPP' 1
.PP1 2
ToListAsyncPP2 =
(PP= >
)PP> ?
;PP? @
foreachRR 

(RR 
varRR 
pRR 
inRR 
GetPostsRR 
(RR 
includeRR %
,RR% &
authorRR' -
)RR- .
)RR. /
{SS 
varTT 
rankTT 
=TT 
$numTT 
;TT 
varUU 
hitsUU 
=UU 
$numUU 
;UU 
foreachWW 
(WW 
varWW 
termItemWW 
inWW 
termListWW %
)WW% &
{XX 
ifYY 
(YY 	
termItemYY	 
.YY 
LengthYY 
<YY 
$numYY 
&&YY 
rankYY  $
>YY% &
$numYY' (
)YY( )
continueYY* 2
;YY2 3
if\\ 
(\\ 	
p\\	 

.\\
 
PostCategories\\ 
!=\\ 
null\\ !
&&\\" $
p\\% &
.\\& '
PostCategories\\' 5
.\\5 6
Count\\6 ;
>\\< =
$num\\> ?
)\\? @
{]] 
foreach^^ 
(^^  !
var^^! $
pc^^% '
in^^( *
p^^+ ,
.^^, -
PostCategories^^- ;
)^^; <
{__ 
if`` 
(``  
pc``  "
.``" #
Category``# +
.``+ ,
Content``, 3
.``3 4
ToLower``4 ;
(``; <
)``< =
==``> @
termItem``A I
)``I J
rank``K O
+=``P R
$num``S U
;``U V
}aa 
}bb 
ifcc 
(cc 	
pcc	 

.cc
 
Titlecc 
.cc 
ToLowercc 
(cc 
)cc 
.cc 
Containscc #
(cc# $
termItemcc$ ,
)cc, -
)cc- .
{dd 
hitsee 

=ee 
Regexee 
.ee 
Matchesee 
(ee 
pee 
.ee 
Titleee "
.ee" #
ToLoweree# *
(ee* +
)ee+ ,
,ee, -
termItemee. 6
)ee6 7
.ee7 8
Countee8 =
;ee= >
rankff 

+=ff 
hitsff 
*ff 
$numff 
;ff 
}gg 
ifhh 
(hh 	
phh	 

.hh
 
Descriptionhh 
.hh 
ToLowerhh 
(hh 
)hh  
.hh  !
Containshh! )
(hh) *
termItemhh* 2
)hh2 3
)hh3 4
{ii 
hitsjj 

=jj 
Regexjj 
.jj 
Matchesjj 
(jj 
pjj 
.jj 
Descriptionjj (
.jj( )
ToLowerjj) 0
(jj0 1
)jj1 2
,jj2 3
termItemjj4 <
)jj< =
.jj= >
Countjj> C
;jjC D
rankkk 

+=kk 
hitskk 
*kk 
$numkk 
;kk 
}ll 
ifmm 
(mm 	
pmm	 

.mm
 
Contentmm 
.mm 
ToLowermm 
(mm 
)mm 
.mm 
Containsmm %
(mm% &
termItemmm& .
)mm. /
)mm/ 0
{nn 
rankoo 

+=oo 
Regexoo 
.oo 
Matchesoo 
(oo 
poo 
.oo 
Contentoo %
.oo% &
ToLoweroo& -
(oo- .
)oo. /
,oo/ 0
termItemoo1 9
)oo9 :
.oo: ;
Countoo; @
;oo@ A
}pp 
}qq 
ifrr 
(rr 
rankrr 
>rr 
$numrr 
)rr 
{ss 
resultstt 
.tt 
Addtt 
(tt 
newtt 
SearchResulttt !
{tt" #
Ranktt$ (
=tt) *
ranktt+ /
,tt/ 0
Itemtt1 5
=tt6 7
awaittt8 =

PostToItemtt> H
(ttH I
pttI J
,ttJ K
sanitizettL T
)ttT U
}ttV W
)ttW X
;ttX Y
}uu 
}vv 
resultsxx 

=xx 
resultsxx 
.xx 
OrderByDescendingxx &
(xx& '
rxx' (
=>xx) +
rxx, -
.xx- .
Rankxx. 2
)xx2 3
.xx3 4
ToListxx4 :
(xx: ;
)xx; <
;xx< =
varzz 
postszz 
=zz 
newzz 
Listzz 
<zz 
PostItemzz  
>zz  !
(zz! "
)zz" #
;zz# $
for{{ 
({{ 
int{{ 
i{{ 
={{ 
$num{{ 
;{{ 
i{{ 
<{{ 
results{{ 
.{{ 
Count{{ $
;{{$ %
i{{& '
++{{' )
){{) *
{|| 
posts}} 	
.}}	 

Add}}
 
(}} 
results}} 
[}} 
i}} 
]}} 
.}} 
Item}} 
)}} 
;}} 
}~~ 
pager 
. 	
	Configure	 
( 
posts 
. 
Count 
) 
;  
return
ÄÄ 	
await
ÄÄ
 
Task
ÄÄ 
.
ÄÄ 
Run
ÄÄ 
(
ÄÄ 
(
ÄÄ 
)
ÄÄ 
=>
ÄÄ 
posts
ÄÄ $
.
ÄÄ$ %
Skip
ÄÄ% )
(
ÄÄ) *
skip
ÄÄ* .
)
ÄÄ. /
.
ÄÄ/ 0
Take
ÄÄ0 4
(
ÄÄ4 5
pager
ÄÄ5 :
.
ÄÄ: ;
ItemsPerPage
ÄÄ; G
)
ÄÄG H
.
ÄÄH I
ToList
ÄÄI O
(
ÄÄO P
)
ÄÄP Q
)
ÄÄQ R
;
ÄÄR S
}
ÅÅ 
public
ÉÉ 
async
ÉÉ	 
Task
ÉÉ 
<
ÉÉ 
Post
ÉÉ 
>
ÉÉ 
GetPostById
ÉÉ %
(
ÉÉ% &
int
ÉÉ& )
id
ÉÉ* ,
)
ÉÉ, -
{
ÑÑ 
return
ÖÖ 	
await
ÖÖ
 
_db
ÖÖ 
.
ÖÖ 
Posts
ÖÖ 
.
ÖÖ 
Where
ÖÖ 
(
ÖÖ  
p
ÖÖ  !
=>
ÖÖ" $
p
ÖÖ% &
.
ÖÖ& '
Id
ÖÖ' )
==
ÖÖ* ,
id
ÖÖ- /
)
ÖÖ/ 0
.
ÖÖ0 1!
FirstOrDefaultAsync
ÖÖ1 D
(
ÖÖD E
)
ÖÖE F
;
ÖÖF G
}
ÜÜ 
public
àà 
async
àà	 
Task
àà 
<
àà 
IEnumerable
àà 
<
àà  
PostItem
àà  (
>
àà( )
>
àà) *
GetPostItems
àà+ 7
(
àà7 8
)
àà8 9
{
ââ 
var
ää 
posts
ää 
=
ää 
await
ää 
_db
ää 
.
ää 
Posts
ää 
.
ää 
ToListAsync
ää *
(
ää* +
)
ää+ ,
;
ää, -
var
ãã 
	postItems
ãã 
=
ãã 
new
ãã 
List
ãã 
<
ãã 
PostItem
ãã $
>
ãã$ %
(
ãã% &
)
ãã& '
;
ãã' (
foreach
çç 

(
çç 
var
çç 
post
çç 
in
çç 
posts
çç 
)
çç 
{
éé 
	postItems
èè 
.
èè 
Add
èè 
(
èè 
new
èè 
PostItem
èè 
{
êê 
Id
ëë 
=
ëë 	
post
ëë
 
.
ëë 
Id
ëë 
,
ëë 
Title
íí 

=
íí 
post
íí 
.
íí 
Title
íí 
,
íí 
Description
ìì 
=
ìì 
post
ìì 
.
ìì 
Description
ìì #
,
ìì# $
Content
îî 
=
îî 
post
îî 
.
îî 
Content
îî 
,
îî 
Slug
ïï 	
=
ïï
 
post
ïï 
.
ïï 
Slug
ïï 
,
ïï 
Author
ññ 
=
ññ 
_db
ññ 
.
ññ 
Authors
ññ 
.
ññ 
Where
ññ 
(
ññ  
a
ññ  !
=>
ññ" $
a
ññ% &
.
ññ& '
Id
ññ' )
==
ññ* ,
post
ññ- 1
.
ññ1 2
AuthorId
ññ2 :
)
ññ: ;
.
ññ; <
First
ññ< A
(
ññA B
)
ññB C
,
ññC D
Cover
óó 

=
óó 
string
óó 
.
óó 
IsNullOrEmpty
óó !
(
óó! "
post
óó" &
.
óó& '
Cover
óó' ,
)
óó, -
?
óó. /
	Constants
óó0 9
.
óó9 :
DefaultCover
óó: F
:
óóG H
post
óóI M
.
óóM N
Cover
óóN S
,
óóS T
	Published
òò 
=
òò 
post
òò 
.
òò 
	Published
òò 
,
òò  
	PostViews
ôô 
=
ôô 
post
ôô 
.
ôô 
	PostViews
ôô 
,
ôô  
Featured
öö 
=
öö 
post
öö 
.
öö 

IsFeatured
öö 
}
õõ 
)
õõ 
;
õõ 
}
úú 
return
ûû 	
	postItems
ûû
 
;
ûû 
}
üü 
public
°° 
async
°°	 
Task
°° 
<
°° 
	PostModel
°° 
>
°° 
GetPostModel
°° +
(
°°+ ,
string
°°, 2
slug
°°3 7
)
°°7 8
{
¢¢ 	
var
££ 
model
££ 
=
££ 
new
££ 
	PostModel
££ %
(
££% &
)
££& '
;
££' (
var
•• 
all
•• 
=
•• 
_db
•• 
.
•• 
Posts
•• 
.
¶¶ 
AsNoTracking
¶¶ 
(
¶¶ 
)
¶¶ 
.
ßß 
Include
ßß 
(
ßß 
p
ßß 
=>
ßß 
p
ßß 
.
ßß 
PostCategories
ßß -
)
ßß- .
.
®® 
OrderByDescending
®® !
(
®®! "
p
®®" #
=>
®®$ &
p
®®' (
.
®®( )

IsFeatured
®®) 3
)
®®3 4
.
©© 
ThenByDescending
©©  
(
©©  !
p
©©! "
=>
©©# %
p
©©& '
.
©©' (
	Published
©©( 1
)
©©1 2
.
©©2 3
ToList
©©3 9
(
©©9 :
)
©©: ;
;
©©; <
await
´´  
SetOlderNewerPosts
´´ $
(
´´$ %
slug
´´% )
,
´´) *
model
´´+ 0
,
´´0 1
all
´´2 5
)
´´5 6
;
´´6 7
var
≠≠ 
post
≠≠ 
=
≠≠ 
_db
≠≠ 
.
≠≠ 
Posts
≠≠  
.
≠≠  !
Single
≠≠! '
(
≠≠' (
p
≠≠( )
=>
≠≠* ,
p
≠≠- .
.
≠≠. /
Slug
≠≠/ 3
==
≠≠4 6
slug
≠≠7 ;
)
≠≠; <
;
≠≠< =
post
ÆÆ 
.
ÆÆ 
	PostViews
ÆÆ 
++
ÆÆ 
;
ÆÆ 
await
ØØ 
_db
ØØ 
.
ØØ 
SaveChangesAsync
ØØ &
(
ØØ& '
)
ØØ' (
;
ØØ( )
model
±± 
.
±± 
Related
±± 
=
±± 
await
±± !
Search
±±" (
(
±±( )
new
±±) ,
Pager
±±- 2
(
±±2 3
$num
±±3 4
)
±±4 5
,
±±5 6
model
±±7 <
.
±±< =
Post
±±= A
.
±±A B
Title
±±B G
,
±±G H
$num
±±I J
,
±±J K
$str
±±L P
,
±±P Q
true
±±R V
)
±±V W
;
±±W X
model
≤≤ 
.
≤≤ 
Related
≤≤ 
=
≤≤ 
model
≤≤ !
.
≤≤! "
Related
≤≤" )
.
≤≤) *
Where
≤≤* /
(
≤≤/ 0
r
≤≤0 1
=>
≤≤2 4
r
≤≤5 6
.
≤≤6 7
Id
≤≤7 9
!=
≤≤: <
model
≤≤= B
.
≤≤B C
Post
≤≤C G
.
≤≤G H
Id
≤≤H J
)
≤≤J K
.
≤≤K L
ToList
≤≤L R
(
≤≤R S
)
≤≤S T
;
≤≤T U
return
¥¥ 
await
¥¥ 
Task
¥¥ 
.
¥¥ 

FromResult
¥¥ (
(
¥¥( )
model
¥¥) .
)
¥¥. /
;
¥¥/ 0
}
µµ 	
private
∑∑ 
async
∑∑ 
Task
∑∑  
SetOlderNewerPosts
∑∑ -
(
∑∑- .
string
∑∑. 4
slug
∑∑5 9
,
∑∑9 :
	PostModel
∑∑; D
model
∑∑E J
,
∑∑J K
List
∑∑L P
<
∑∑P Q
Post
∑∑Q U
>
∑∑U V
all
∑∑W Z
)
∑∑Z [
{
∏∏ 	
if
ππ 
(
ππ 
all
ππ 
!=
ππ 
null
ππ 
&&
ππ 
all
ππ "
.
ππ" #
Count
ππ# (
>
ππ) *
$num
ππ+ ,
)
ππ, -
{
∫∫ 
for
ªª 
(
ªª 
int
ªª 
i
ªª 
=
ªª 
$num
ªª 
;
ªª 
i
ªª  !
<
ªª" #
all
ªª$ '
.
ªª' (
Count
ªª( -
;
ªª- .
i
ªª/ 0
++
ªª0 2
)
ªª2 3
{
ºº 
if
ΩΩ 
(
ΩΩ 
all
ΩΩ 
[
ΩΩ 
i
ΩΩ 
]
ΩΩ 
.
ΩΩ 
Slug
ΩΩ #
==
ΩΩ$ &
slug
ΩΩ' +
)
ΩΩ+ ,
{
ææ 
model
øø 
.
øø 
Post
øø "
=
øø# $
await
øø% *

PostToItem
øø+ 5
(
øø5 6
all
øø6 9
[
øø9 :
i
øø: ;
]
øø; <
)
øø< =
;
øø= >
if
¡¡ 
(
¡¡ 
i
¡¡ 
>
¡¡ 
$num
¡¡  !
&&
¡¡" $
all
¡¡% (
[
¡¡( )
i
¡¡) *
-
¡¡+ ,
$num
¡¡- .
]
¡¡. /
.
¡¡/ 0
	Published
¡¡0 9
>
¡¡: ;
DateTime
¡¡< D
.
¡¡D E
MinValue
¡¡E M
)
¡¡M N
model
¬¬ !
.
¬¬! "
Newer
¬¬" '
=
¬¬( )
await
¬¬* /

PostToItem
¬¬0 :
(
¬¬: ;
all
¬¬; >
[
¬¬> ?
i
¬¬? @
-
¬¬A B
$num
¬¬C D
]
¬¬D E
)
¬¬E F
;
¬¬F G
if
ƒƒ 
(
ƒƒ 
i
ƒƒ 
+
ƒƒ 
$num
ƒƒ  !
<
ƒƒ" #
all
ƒƒ$ '
.
ƒƒ' (
Count
ƒƒ( -
&&
ƒƒ. 0
all
ƒƒ1 4
[
ƒƒ4 5
i
ƒƒ5 6
+
ƒƒ7 8
$num
ƒƒ9 :
]
ƒƒ: ;
.
ƒƒ; <
	Published
ƒƒ< E
>
ƒƒF G
DateTime
ƒƒH P
.
ƒƒP Q
MinValue
ƒƒQ Y
)
ƒƒY Z
model
≈≈ !
.
≈≈! "
Older
≈≈" '
=
≈≈( )
await
≈≈* /

PostToItem
≈≈0 :
(
≈≈: ;
all
≈≈; >
[
≈≈> ?
i
≈≈? @
+
≈≈A B
$num
≈≈C D
]
≈≈D E
)
≈≈E F
;
≈≈F G
break
«« 
;
«« 
}
»» 
}
…… 
}
   
}
ÀÀ 	
public
ÕÕ 
async
ÕÕ 
Task
ÕÕ 
<
ÕÕ 
Post
ÕÕ 
>
ÕÕ 
GetPostBySlug
ÕÕ  -
(
ÕÕ- .
string
ÕÕ. 4
slug
ÕÕ5 9
)
ÕÕ9 :
{
ŒŒ 
return
œœ 	
await
œœ
 
_db
œœ 
.
œœ 
Posts
œœ 
.
œœ 
Where
œœ 
(
œœ  
p
œœ  !
=>
œœ" $
p
œœ% &
.
œœ& '
Slug
œœ' +
==
œœ, .
slug
œœ/ 3
)
œœ3 4
.
œœ4 5!
FirstOrDefaultAsync
œœ5 H
(
œœH I
)
œœI J
;
œœJ K
}
–– 
public
““ 
async
““	 
Task
““ 
<
““ 
string
““ 
>
““ 
GetSlugFromTitle
““ ,
(
““, -
string
““- 3
title
““4 9
)
““9 :
{
”” 
string
‘‘ 	
slug
‘‘
 
=
‘‘ 
title
‘‘ 
.
‘‘ 
ToSlug
‘‘ 
(
‘‘ 
)
‘‘ 
;
‘‘  
var
’’ 
post
’’ 
=
’’ 
_db
’’ 
.
’’ 
Posts
’’ 
.
’’ 
Where
’’ 
(
’’ 
p
’’ 
=>
’’  "
p
’’# $
.
’’$ %
Slug
’’% )
==
’’* ,
slug
’’- 1
)
’’1 2
.
’’2 3
FirstOrDefault
’’3 A
(
’’A B
)
’’B C
;
’’C D
if
◊◊ 
(
◊◊ 
post
◊◊ 
!=
◊◊ 
null
◊◊ 
)
◊◊ 
{
ÿÿ 
for
ŸŸ 
(
ŸŸ 	
int
ŸŸ	 
i
ŸŸ 
=
ŸŸ 
$num
ŸŸ 
;
ŸŸ 
i
ŸŸ 
<
ŸŸ 
$num
ŸŸ 
;
ŸŸ 
i
ŸŸ 
++
ŸŸ  
)
ŸŸ  !
{
⁄⁄ 
slug
€€ 	
=
€€
 
$"
€€ 
{
€€ 
slug
€€ 
}
€€ 
{
€€ 
i
€€ 
}
€€ 
"
€€ 
;
€€ 
if
‹‹ 
(
‹‹ 	
_db
‹‹	 
.
‹‹ 
Posts
‹‹ 
.
‹‹ 
Where
‹‹ 
(
‹‹ 
p
‹‹ 
=>
‹‹ 
p
‹‹ 
.
‹‹  
Slug
‹‹  $
==
‹‹% '
slug
‹‹( ,
)
‹‹, -
.
‹‹- .
FirstOrDefault
‹‹. <
(
‹‹< =
)
‹‹= >
==
‹‹? A
null
‹‹B F
)
‹‹F G
{
›› 
return
ﬁﬁ 
await
ﬁﬁ 
Task
ﬁﬁ 
.
ﬁﬁ 

FromResult
ﬁﬁ "
(
ﬁﬁ" #
slug
ﬁﬁ# '
)
ﬁﬁ' (
;
ﬁﬁ( )
}
ﬂﬂ 
}
‡‡ 
}
·· 
return
‚‚ 	
await
‚‚
 
Task
‚‚ 
.
‚‚ 

FromResult
‚‚ 
(
‚‚  
slug
‚‚  $
)
‚‚$ %
;
‚‚% &
}
„„ 
public
ÂÂ 
async
ÂÂ	 
Task
ÂÂ 
<
ÂÂ 
bool
ÂÂ 
>
ÂÂ 
Add
ÂÂ 
(
ÂÂ 
Post
ÂÂ "
post
ÂÂ# '
)
ÂÂ' (
{
ÊÊ 
var
ÁÁ 
existing
ÁÁ 
=
ÁÁ 
await
ÁÁ 
_db
ÁÁ 
.
ÁÁ 
Posts
ÁÁ !
.
ÁÁ! "
Where
ÁÁ" '
(
ÁÁ' (
p
ÁÁ( )
=>
ÁÁ* ,
p
ÁÁ- .
.
ÁÁ. /
Slug
ÁÁ/ 3
==
ÁÁ4 6
post
ÁÁ7 ;
.
ÁÁ; <
Slug
ÁÁ< @
)
ÁÁ@ A
.
ÁÁA B!
FirstOrDefaultAsync
ÁÁB U
(
ÁÁU V
)
ÁÁV W
;
ÁÁW X
if
ËË 
(
ËË 
existing
ËË 
!=
ËË 
null
ËË 
)
ËË 
return
ÈÈ 

false
ÈÈ 
;
ÈÈ 
post
ÎÎ 
.
ÎÎ 
Blog
ÎÎ 
=
ÎÎ 
_db
ÎÎ 
.
ÎÎ 
Blogs
ÎÎ 
.
ÎÎ 
First
ÎÎ 
(
ÎÎ 
)
ÎÎ  
;
ÎÎ  !
post
ÏÏ 
.
ÏÏ 
DateCreated
ÏÏ 
=
ÏÏ 
DateTime
ÏÏ 
.
ÏÏ 
UtcNow
ÏÏ %
;
ÏÏ% &
post
ÔÔ 
.
ÔÔ 
Content
ÔÔ 
=
ÔÔ 
post
ÔÔ 
.
ÔÔ  
Content
ÔÔ  '
.
ÔÔ' (
RemoveScriptTags
ÔÔ( 8
(
ÔÔ8 9
)
ÔÔ9 :
.
ÔÔ: ;
RemoveImgTags
ÔÔ; H
(
ÔÔH I
)
ÔÔI J
;
ÔÔJ K
post
 
.
 
Description
 
=
 
post
 #
.
# $
Description
$ /
.
/ 0
RemoveScriptTags
0 @
(
@ A
)
A B
.
B C
RemoveImgTags
C P
(
P Q
)
Q R
;
R S
await
ÚÚ 
_db
ÚÚ	 
.
ÚÚ 
Posts
ÚÚ 
.
ÚÚ 
AddAsync
ÚÚ 
(
ÚÚ 
post
ÚÚ  
)
ÚÚ  !
;
ÚÚ! "
return
ÛÛ 	
await
ÛÛ
 
_db
ÛÛ 
.
ÛÛ 
SaveChangesAsync
ÛÛ $
(
ÛÛ$ %
)
ÛÛ% &
>
ÛÛ' (
$num
ÛÛ) *
;
ÛÛ* +
}
ÙÙ 
public
ˆˆ 
async
ˆˆ	 
Task
ˆˆ 
<
ˆˆ 
bool
ˆˆ 
>
ˆˆ 
Update
ˆˆ  
(
ˆˆ  !
Post
ˆˆ! %
post
ˆˆ& *
)
ˆˆ* +
{
˜˜ 
var
¯¯ 
existing
¯¯ 
=
¯¯ 
await
¯¯ 
_db
¯¯ 
.
¯¯ 
Posts
¯¯ !
.
¯¯! "
Where
¯¯" '
(
¯¯' (
p
¯¯( )
=>
¯¯* ,
p
¯¯- .
.
¯¯. /
Slug
¯¯/ 3
==
¯¯4 6
post
¯¯7 ;
.
¯¯; <
Slug
¯¯< @
)
¯¯@ A
.
¯¯A B!
FirstOrDefaultAsync
¯¯B U
(
¯¯U V
)
¯¯V W
;
¯¯W X
if
˘˘ 
(
˘˘ 
existing
˘˘ 
==
˘˘ 
null
˘˘ 
)
˘˘ 
return
˙˙ 

false
˙˙ 
;
˙˙ 
existing
¸¸ 
.
¸¸ 
Slug
¸¸ 
=
¸¸ 
post
¸¸ 
.
¸¸ 
Slug
¸¸ 
;
¸¸ 
existing
˝˝ 
.
˝˝ 
Title
˝˝ 
=
˝˝ 
post
˝˝ 
.
˝˝ 
Title
˝˝ 
;
˝˝ 
existing
˛˛ 
.
˛˛ 
Description
˛˛ 
=
˛˛ 
post
˛˛ 
.
˛˛ 
Description
˛˛ *
.
˛˛* +
RemoveScriptTags
˛˛+ ;
(
˛˛; <
)
˛˛< =
.
˛˛= >
RemoveImgTags
˛˛> K
(
˛˛K L
)
˛˛L M
;
˛˛M N
existing
ˇˇ 
.
ˇˇ 
Content
ˇˇ 
=
ˇˇ 
post
ˇˇ 
.
ˇˇ 
Content
ˇˇ "
.
ˇˇ" #
RemoveScriptTags
ˇˇ# 3
(
ˇˇ3 4
)
ˇˇ4 5
.
ˇˇ5 6
RemoveImgTags
ˇˇ6 C
(
ˇˇC D
)
ˇˇD E
;
ˇˇE F
existing
ÄÄ 
.
ÄÄ 
Cover
ÄÄ 
=
ÄÄ 
post
ÄÄ 
.
ÄÄ 
Cover
ÄÄ 
;
ÄÄ 
existing
ÅÅ 
.
ÅÅ 
PostType
ÅÅ 
=
ÅÅ 
post
ÅÅ 
.
ÅÅ 
PostType
ÅÅ $
;
ÅÅ$ %
existing
ÇÇ 
.
ÇÇ 
	Published
ÇÇ 
=
ÇÇ 
post
ÇÇ 
.
ÇÇ 
	Published
ÇÇ &
;
ÇÇ& '
return
ÑÑ 	
await
ÑÑ
 
_db
ÑÑ 
.
ÑÑ 
SaveChangesAsync
ÑÑ $
(
ÑÑ$ %
)
ÑÑ% &
>
ÑÑ' (
$num
ÑÑ) *
;
ÑÑ* +
}
ÖÖ 
public
áá 
async
áá	 
Task
áá 
<
áá 
bool
áá 
>
áá 
Publish
áá !
(
áá! "
int
áá" %
id
áá& (
,
áá( )
bool
áá* .
publish
áá/ 6
)
áá6 7
{
àà 
var
ââ 
existing
ââ 
=
ââ 
await
ââ 
_db
ââ 
.
ââ 
Posts
ââ !
.
ââ! "
Where
ââ" '
(
ââ' (
p
ââ( )
=>
ââ* ,
p
ââ- .
.
ââ. /
Id
ââ/ 1
==
ââ2 4
id
ââ5 7
)
ââ7 8
.
ââ8 9!
FirstOrDefaultAsync
ââ9 L
(
ââL M
)
ââM N
;
ââN O
if
ää 
(
ää 
existing
ää 
==
ää 
null
ää 
)
ää 
return
ãã 

false
ãã 
;
ãã 
existing
çç 
.
çç 
	Published
çç 
=
çç 
publish
çç 
?
çç  !
DateTime
çç" *
.
çç* +
UtcNow
çç+ 1
:
çç2 3
DateTime
çç4 <
.
çç< =
MinValue
çç= E
;
ççE F
return
èè 	
await
èè
 
_db
èè 
.
èè 
SaveChangesAsync
èè $
(
èè$ %
)
èè% &
>
èè' (
$num
èè) *
;
èè* +
}
êê 
public
íí 
async
íí	 
Task
íí 
<
íí 
bool
íí 
>
íí 
Featured
íí "
(
íí" #
int
íí# &
id
íí' )
,
íí) *
bool
íí+ /
featured
íí0 8
)
íí8 9
{
ìì 
var
îî 
existing
îî 
=
îî 
await
îî 
_db
îî 
.
îî 
Posts
îî !
.
îî! "
Where
îî" '
(
îî' (
p
îî( )
=>
îî* ,
p
îî- .
.
îî. /
Id
îî/ 1
==
îî2 4
id
îî5 7
)
îî7 8
.
îî8 9!
FirstOrDefaultAsync
îî9 L
(
îîL M
)
îîM N
;
îîN O
if
ïï 
(
ïï 
existing
ïï 
==
ïï 
null
ïï 
)
ïï 
return
ññ 

false
ññ 
;
ññ 
existing
òò 
.
òò 

IsFeatured
òò 
=
òò 
featured
òò !
;
òò! "
return
öö 	
await
öö
 
_db
öö 
.
öö 
SaveChangesAsync
öö $
(
öö$ %
)
öö% &
>
öö' (
$num
öö) *
;
öö* +
}
õõ 
public
ùù 
async
ùù	 
Task
ùù 
<
ùù 
IEnumerable
ùù 
<
ùù  
PostItem
ùù  (
>
ùù( )
>
ùù) *
GetList
ùù+ 2
(
ùù2 3
Pager
ùù3 8
pager
ùù9 >
,
ùù> ?
int
ùù@ C
author
ùùD J
=
ùùK L
$num
ùùM N
,
ùùN O
string
ùùP V
category
ùùW _
=
ùù` a
$str
ùùb d
,
ùùd e
string
ùùf l
include
ùùm t
=
ùùu v
$str
ùùw y
,
ùùy z
bool
ùù{ 
sanitizeùùÄ à
=ùùâ ä
trueùùã è
)ùùè ê
{
ûû 
var
üü 
skip
üü 
=
üü 
pager
üü 
.
üü 
CurrentPage
üü 
*
üü  !
pager
üü" '
.
üü' (
ItemsPerPage
üü( 4
-
üü5 6
pager
üü7 <
.
üü< =
ItemsPerPage
üü= I
;
üüI J
var
°° 
posts
°° 
=
°° 
new
°° 
List
°° 
<
°° 
Post
°° 
>
°° 
(
°° 
)
°° 
;
°°  
foreach
¢¢ 

(
¢¢ 
var
¢¢ 
p
¢¢ 
in
¢¢ 
GetPosts
¢¢ 
(
¢¢ 
include
¢¢ %
,
¢¢% &
author
¢¢' -
)
¢¢- .
)
¢¢. /
{
££ 
if
§§ 
(
§§ 
string
§§ 
.
§§ 
IsNullOrEmpty
§§ 
(
§§ 
category
§§ %
)
§§% &
)
§§& '
{
•• 
posts
¶¶ 

.
¶¶
 
Add
¶¶ 
(
¶¶ 
p
¶¶ 
)
¶¶ 
;
¶¶ 
}
ßß 
else
®® 
{
©© 
if
™™ 
(
™™ 
p
™™ 
.
™™ 
PostCategories
™™ (
!=
™™) +
null
™™, 0
&&
™™1 3
p
™™4 5
.
™™5 6
PostCategories
™™6 D
.
™™D E
Count
™™E J
>
™™K L
$num
™™M N
)
™™N O
{
´´ 
Category
¨¨  
cat
¨¨! $
=
¨¨% &
_db
¨¨' *
.
¨¨* +

Categories
¨¨+ 5
.
¨¨5 6
Single
¨¨6 <
(
¨¨< =
c
¨¨= >
=>
¨¨? A
c
¨¨B C
.
¨¨C D
Content
¨¨D K
.
¨¨K L
ToLower
¨¨L S
(
¨¨S T
)
¨¨T U
==
¨¨V X
category
¨¨Y a
.
¨¨a b
ToLower
¨¨b i
(
¨¨i j
)
¨¨j k
)
¨¨k l
;
¨¨l m
if
≠≠ 
(
≠≠ 
cat
≠≠ 
==
≠≠  "
null
≠≠# '
)
≠≠' (
continue
ÆÆ $
;
ÆÆ$ %
foreach
∞∞ 
(
∞∞  !
var
∞∞! $
pc
∞∞% '
in
∞∞( *
p
∞∞+ ,
.
∞∞, -
PostCategories
∞∞- ;
)
∞∞; <
{
±± 
if
≤≤ 
(
≤≤  
pc
≤≤  "
.
≤≤" #

CategoryId
≤≤# -
==
≤≤. 0
cat
≤≤1 4
.
≤≤4 5
Id
≤≤5 7
)
≤≤7 8
{
≥≥ 
posts
¥¥  %
.
¥¥% &
Add
¥¥& )
(
¥¥) *
p
¥¥* +
)
¥¥+ ,
;
¥¥, -
}
µµ 
}
∂∂ 
}
∑∑ 
}
∏∏ 
}
ππ 
pager
∫∫ 
.
∫∫ 	
	Configure
∫∫	 
(
∫∫ 
posts
∫∫ 
.
∫∫ 
Count
∫∫ 
)
∫∫ 
;
∫∫  
var
ºº 
items
ºº 
=
ºº 
new
ºº 
List
ºº 
<
ºº 
PostItem
ºº  
>
ºº  !
(
ºº! "
)
ºº" #
;
ºº# $
foreach
ΩΩ 

(
ΩΩ 
var
ΩΩ 
p
ΩΩ 
in
ΩΩ 
posts
ΩΩ 
.
ΩΩ 
Skip
ΩΩ 
(
ΩΩ  
skip
ΩΩ  $
)
ΩΩ$ %
.
ΩΩ% &
Take
ΩΩ& *
(
ΩΩ* +
pager
ΩΩ+ 0
.
ΩΩ0 1
ItemsPerPage
ΩΩ1 =
)
ΩΩ= >
.
ΩΩ> ?
ToList
ΩΩ? E
(
ΩΩE F
)
ΩΩF G
)
ΩΩG H
{
ææ 
items
øø 	
.
øø	 

Add
øø
 
(
øø 
await
øø 

PostToItem
øø 
(
øø 
p
øø  
,
øø  !
sanitize
øø" *
)
øø* +
)
øø+ ,
;
øø, -
}
¿¿ 
return
¡¡ 	
await
¡¡
 
Task
¡¡ 
.
¡¡ 

FromResult
¡¡ 
(
¡¡  
items
¡¡  %
)
¡¡% &
;
¡¡& '
}
¬¬ 
public
ƒƒ 
async
ƒƒ	 
Task
ƒƒ 
<
ƒƒ 
IEnumerable
ƒƒ 
<
ƒƒ  
PostItem
ƒƒ  (
>
ƒƒ( )
>
ƒƒ) *

GetPopular
ƒƒ+ 5
(
ƒƒ5 6
Pager
ƒƒ6 ;
pager
ƒƒ< A
,
ƒƒA B
int
ƒƒC F
author
ƒƒG M
=
ƒƒN O
$num
ƒƒP Q
)
ƒƒQ R
{
≈≈ 
var
∆∆ 
skip
∆∆ 
=
∆∆ 
pager
∆∆ 
.
∆∆ 
CurrentPage
∆∆ 
*
∆∆  !
pager
∆∆" '
.
∆∆' (
ItemsPerPage
∆∆( 4
-
∆∆5 6
pager
∆∆7 <
.
∆∆< =
ItemsPerPage
∆∆= I
;
∆∆I J
var
»» 
posts
»» 
=
»» 
new
»» 
List
»» 
<
»» 
Post
»» 
>
»» 
(
»» 
)
»» 
;
»»  
if
   
(
   
author
   
>
   
$num
   
)
   
posts
ÀÀ 	
=
ÀÀ
 
_db
ÀÀ 
.
ÀÀ 
Posts
ÀÀ 
.
ÀÀ 
AsNoTracking
ÀÀ "
(
ÀÀ" #
)
ÀÀ# $
.
ÀÀ$ %
Where
ÀÀ% *
(
ÀÀ* +
p
ÀÀ+ ,
=>
ÀÀ- /
p
ÀÀ0 1
.
ÀÀ1 2
	Published
ÀÀ2 ;
>
ÀÀ< =
DateTime
ÀÀ> F
.
ÀÀF G
MinValue
ÀÀG O
&&
ÀÀP R
p
ÀÀS T
.
ÀÀT U
AuthorId
ÀÀU ]
==
ÀÀ^ `
author
ÀÀa g
)
ÀÀg h
.
ÃÃ 
OrderByDescending
ÃÃ 
(
ÃÃ 
p
ÃÃ 
=>
ÃÃ 
p
ÃÃ 
.
ÃÃ  
	PostViews
ÃÃ  )
)
ÃÃ) *
.
ÃÃ* +
ThenByDescending
ÃÃ+ ;
(
ÃÃ; <
p
ÃÃ< =
=>
ÃÃ> @
p
ÃÃA B
.
ÃÃB C
	Published
ÃÃC L
)
ÃÃL M
.
ÃÃM N
ToList
ÃÃN T
(
ÃÃT U
)
ÃÃU V
;
ÃÃV W
else
ÕÕ 
posts
ŒŒ 	
=
ŒŒ
 
_db
ŒŒ 
.
ŒŒ 
Posts
ŒŒ 
.
ŒŒ 
AsNoTracking
ŒŒ "
(
ŒŒ" #
)
ŒŒ# $
.
ŒŒ$ %
Where
ŒŒ% *
(
ŒŒ* +
p
ŒŒ+ ,
=>
ŒŒ- /
p
ŒŒ0 1
.
ŒŒ1 2
	Published
ŒŒ2 ;
>
ŒŒ< =
DateTime
ŒŒ> F
.
ŒŒF G
MinValue
ŒŒG O
)
ŒŒO P
.
œœ 
OrderByDescending
œœ 
(
œœ 
p
œœ 
=>
œœ 
p
œœ 
.
œœ  
	PostViews
œœ  )
)
œœ) *
.
œœ* +
ThenByDescending
œœ+ ;
(
œœ; <
p
œœ< =
=>
œœ> @
p
œœA B
.
œœB C
	Published
œœC L
)
œœL M
.
œœM N
ToList
œœN T
(
œœT U
)
œœU V
;
œœV W
pager
—— 
.
—— 	
	Configure
——	 
(
—— 
posts
—— 
.
—— 
Count
—— 
)
—— 
;
——  
var
”” 
items
”” 
=
”” 
new
”” 
List
”” 
<
”” 
PostItem
””  
>
””  !
(
””! "
)
””" #
;
””# $
foreach
‘‘ 

(
‘‘ 
var
‘‘ 
p
‘‘ 
in
‘‘ 
posts
‘‘ 
.
‘‘ 
Skip
‘‘ 
(
‘‘  
skip
‘‘  $
)
‘‘$ %
.
‘‘% &
Take
‘‘& *
(
‘‘* +
pager
‘‘+ 0
.
‘‘0 1
ItemsPerPage
‘‘1 =
)
‘‘= >
.
‘‘> ?
ToList
‘‘? E
(
‘‘E F
)
‘‘F G
)
‘‘G H
{
’’ 
items
÷÷ 	
.
÷÷	 

Add
÷÷
 
(
÷÷ 
await
÷÷ 

PostToItem
÷÷ 
(
÷÷ 
p
÷÷  
,
÷÷  !
true
÷÷" &
)
÷÷& '
)
÷÷' (
;
÷÷( )
}
◊◊ 
return
ÿÿ 	
await
ÿÿ
 
Task
ÿÿ 
.
ÿÿ 

FromResult
ÿÿ 
(
ÿÿ  
items
ÿÿ  %
)
ÿÿ% &
;
ÿÿ& '
}
ŸŸ 
public
€€ 
async
€€	 
Task
€€ 
<
€€ 
bool
€€ 
>
€€ 
Remove
€€  
(
€€  !
int
€€! $
id
€€% '
)
€€' (
{
‹‹ 
var
›› 
existing
›› 
=
›› 
await
›› 
_db
›› 
.
›› 
Posts
›› !
.
››! "
Where
››" '
(
››' (
p
››( )
=>
››* ,
p
››- .
.
››. /
Id
››/ 1
==
››2 4
id
››5 7
)
››7 8
.
››8 9!
FirstOrDefaultAsync
››9 L
(
››L M
)
››M N
;
››N O
if
ﬁﬁ 
(
ﬁﬁ 
existing
ﬁﬁ 
==
ﬁﬁ 
null
ﬁﬁ 
)
ﬁﬁ 
return
ﬂﬂ 

false
ﬂﬂ 
;
ﬂﬂ 
_db
·· 
.
·· 
Posts
·· 
.
·· 
Remove
·· 
(
·· 
existing
·· 
)
·· 
;
·· 
await
‚‚ 
_db
‚‚	 
.
‚‚ 
SaveChangesAsync
‚‚ 
(
‚‚ 
)
‚‚ 
;
‚‚  
return
„„ 	
true
„„
 
;
„„ 
}
‰‰ 
async
ËË 
Task
ËË 
<
ËË 
PostItem
ËË 
>
ËË 

PostToItem
ËË !
(
ËË! "
Post
ËË" &
p
ËË' (
,
ËË( )
bool
ËË* .
sanitize
ËË/ 7
=
ËË8 9
false
ËË: ?
)
ËË? @
{
ÈÈ 
var
ÍÍ 
post
ÍÍ 
=
ÍÍ 
new
ÍÍ 
PostItem
ÍÍ 
{
ÎÎ 
Id
ÏÏ 
=
ÏÏ 
p
ÏÏ	 

.
ÏÏ
 
Id
ÏÏ 
,
ÏÏ 
PostType
ÌÌ 
=
ÌÌ 
p
ÌÌ 
.
ÌÌ 
PostType
ÌÌ %
,
ÌÌ% &
Slug
ÓÓ 
=
ÓÓ	 

p
ÓÓ 
.
ÓÓ 
Slug
ÓÓ 
,
ÓÓ 
Title
ÔÔ 	
=
ÔÔ
 
p
ÔÔ 
.
ÔÔ 
Title
ÔÔ 
,
ÔÔ 
Description
 
=
 
p
 
.
 
Description
 
,
  
Content
ÒÒ 
=
ÒÒ 
p
ÒÒ 
.
ÒÒ 
Content
ÒÒ 
,
ÒÒ 

Categories
ÚÚ 
=
ÚÚ 
await
ÚÚ 
_categoryProvider
ÚÚ (
.
ÚÚ( )
GetPostCategories
ÚÚ) :
(
ÚÚ: ;
p
ÚÚ; <
.
ÚÚ< =
Id
ÚÚ= ?
)
ÚÚ? @
,
ÚÚ@ A
Cover
ÛÛ 	
=
ÛÛ
 
p
ÛÛ 
.
ÛÛ 
Cover
ÛÛ 
,
ÛÛ 
	PostViews
ÙÙ 
=
ÙÙ 
p
ÙÙ 
.
ÙÙ 
	PostViews
ÙÙ 
,
ÙÙ 
Rating
ıı 

=
ıı 
p
ıı 
.
ıı 
Rating
ıı 
,
ıı 
	Published
ˆˆ 
=
ˆˆ 
p
ˆˆ 
.
ˆˆ 
	Published
ˆˆ 
,
ˆˆ 
Featured
˜˜ 
=
˜˜ 
p
˜˜ 
.
˜˜ 

IsFeatured
˜˜ 
,
˜˜ 
Author
¯¯ 

=
¯¯ 
_db
¯¯ 
.
¯¯ 
Authors
¯¯ 
.
¯¯ 
Single
¯¯ 
(
¯¯  
a
¯¯  !
=>
¯¯" $
a
¯¯% &
.
¯¯& '
Id
¯¯' )
==
¯¯* ,
p
¯¯- .
.
¯¯. /
AuthorId
¯¯/ 7
)
¯¯7 8
,
¯¯8 9
SocialFields
˘˘ 
=
˘˘ 
new
˘˘ 
List
˘˘ 
<
˘˘ 
SocialField
˘˘ '
>
˘˘' (
(
˘˘( )
)
˘˘) *
}
˙˙ 
;
˙˙ 
if
¸¸ 
(
¸¸ 
post
¸¸ 
.
¸¸ 
Author
¸¸ 
!=
¸¸ 
null
¸¸ 
)
¸¸ 
{
˝˝ 
if
˛˛ 
(
˛˛ 
string
˛˛ 
.
˛˛ 
IsNullOrEmpty
˛˛ 
(
˛˛ 
post
˛˛  
.
˛˛  !
Author
˛˛! '
.
˛˛' (
Avatar
˛˛( .
)
˛˛. /
)
˛˛/ 0
string
ˇˇ 
.
ˇˇ 
Format
ˇˇ !
(
ˇˇ! "
	Constants
ˇˇ" +
.
ˇˇ+ ,
AvatarDataImage
ˇˇ, ;
,
ˇˇ; <
post
ˇˇ= A
.
ˇˇA B
Author
ˇˇB H
.
ˇˇH I
DisplayName
ˇˇI T
.
ˇˇT U
	Substring
ˇˇU ^
(
ˇˇ^ _
$num
ˇˇ_ `
,
ˇˇ` a
$num
ˇˇb c
)
ˇˇc d
.
ˇˇd e
ToUpper
ˇˇe l
(
ˇˇl m
)
ˇˇm n
)
ˇˇn o
;
ˇˇo p
post
ÅÅ 
.
ÅÅ 
Author
ÅÅ 
.
ÅÅ 
Email
ÅÅ !
=
ÅÅ" #
sanitize
ÅÅ$ ,
?
ÅÅ- .
$str
ÅÅ/ B
:
ÅÅC D
post
ÅÅE I
.
ÅÅI J
Author
ÅÅJ P
.
ÅÅP Q
Email
ÅÅQ V
;
ÅÅV W
}
ÇÇ 
return
ÉÉ 	
await
ÉÉ
 
Task
ÉÉ 
.
ÉÉ 

FromResult
ÉÉ 
(
ÉÉ  
post
ÉÉ  $
)
ÉÉ$ %
;
ÉÉ% &
}
ÑÑ 
List
ÜÜ 
<
ÜÜ 
Post
ÜÜ 
>
ÜÜ 
GetPosts
ÜÜ 
(
ÜÜ 
string
ÜÜ "
include
ÜÜ# *
,
ÜÜ* +
int
ÜÜ, /
author
ÜÜ0 6
)
ÜÜ6 7
{
áá 
var
àà 
items
àà 
=
àà 
new
àà 
List
àà 
<
àà 
Post
àà 
>
àà 
(
àà 
)
àà 
;
àà  
var
ââ 
pubfeatured
ââ 
=
ââ 
new
ââ 
List
ââ 
<
ââ 
Post
ââ "
>
ââ" #
(
ââ# $
)
ââ$ %
;
ââ% &
if
ãã 
(
ãã 
include
ãã 
.
ãã 
ToUpper
ãã 
(
ãã 
)
ãã 
.
ãã 
Contains
ãã !
(
ãã! "
	Constants
ãã" +
.
ãã+ ,
	PostDraft
ãã, 5
)
ãã5 6
||
ãã7 9
string
ãã: @
.
ãã@ A
IsNullOrEmpty
ããA N
(
ããN O
include
ããO V
)
ããV W
)
ããW X
{
åå 
var
çç 
drafts
çç 
=
çç 
author
çç 
>
çç 
$num
çç 
?
çç 
_db
éé 	
.
éé	 

Posts
éé
 
.
éé 
Include
éé 
(
éé 
p
éé 
=>
éé 
p
éé 
.
éé 
PostCategories
éé -
)
éé- .
.
éé. /
Where
éé/ 4
(
éé4 5
p
éé5 6
=>
éé7 9
p
éé: ;
.
éé; <
	Published
éé< E
==
ééF H
DateTime
ééI Q
.
ééQ R
MinValue
ééR Z
&&
éé[ ]
p
éé^ _
.
éé_ `
AuthorId
éé` h
==
ééi k
author
éél r
&&
éés u
p
éév w
.
ééw x
PostTypeééx Ä
==ééÅ É
PostTypeééÑ å
.ééå ç
Postééç ë
)ééë í
.ééí ì
ToListééì ô
(ééô ö
)ééö õ
:ééú ù
_db
èè 	
.
èè	 

Posts
èè
 
.
èè 
Include
èè 
(
èè 
p
èè 
=>
èè 
p
èè 
.
èè 
PostCategories
èè -
)
èè- .
.
èè. /
Where
èè/ 4
(
èè4 5
p
èè5 6
=>
èè7 9
p
èè: ;
.
èè; <
	Published
èè< E
==
èèF H
DateTime
èèI Q
.
èèQ R
MinValue
èèR Z
&&
èè[ ]
p
èè^ _
.
èè_ `
PostType
èè` h
==
èèi k
PostType
èèl t
.
èèt u
Post
èèu y
)
èèy z
.
èèz {
ToListèè{ Å
(èèÅ Ç
)èèÇ É
;èèÉ Ñ
items
êê 	
=
êê
 
items
êê 
.
êê 
Concat
êê 
(
êê 
drafts
êê 
)
êê  
.
êê  !
ToList
êê! '
(
êê' (
)
êê( )
;
êê) *
}
ëë 
if
ìì 
(
ìì 
include
ìì 
.
ìì 
ToUpper
ìì 
(
ìì 
)
ìì 
.
ìì 
Contains
ìì !
(
ìì! "
	Constants
ìì" +
.
ìì+ ,
PostFeatured
ìì, 8
)
ìì8 9
||
ìì: <
string
ìì= C
.
ììC D
IsNullOrEmpty
ììD Q
(
ììQ R
include
ììR Y
)
ììY Z
)
ììZ [
{
îî 
var
ïï 
featured
ïï 
=
ïï 
author
ïï 
>
ïï 
$num
ïï 
?
ïï 
_db
ññ 	
.
ññ	 

Posts
ññ
 
.
ññ 
Include
ññ 
(
ññ 
p
ññ 
=>
ññ 
p
ññ 
.
ññ 
PostCategories
ññ -
)
ññ- .
.
ññ. /
Where
ññ/ 4
(
ññ4 5
p
ññ5 6
=>
ññ7 9
p
ññ: ;
.
ññ; <
	Published
ññ< E
>
ññF G
DateTime
ññH P
.
ññP Q
MinValue
ññQ Y
&&
ññZ \
p
ññ] ^
.
ññ^ _

IsFeatured
ññ_ i
&&
ññj l
p
ññm n
.
ññn o
AuthorId
ñño w
==
ññx z
authorññ{ Å
&&ññÇ Ñ
pññÖ Ü
.ññÜ á
PostTypeññá è
==ññê í
PostTypeññì õ
.ññõ ú
Postññú †
)ññ† °
.ññ° ¢!
OrderByDescendingññ¢ ≥
(ññ≥ ¥
pññ¥ µ
=>ññ∂ ∏
pññπ ∫
.ññ∫ ª
	Publishedññª ƒ
)ññƒ ≈
.ññ≈ ∆
ToListññ∆ Ã
(ññÃ Õ
)ññÕ Œ
:ññœ –
_db
óó 	
.
óó	 

Posts
óó
 
.
óó 
Include
óó 
(
óó 
p
óó 
=>
óó 
p
óó 
.
óó 
PostCategories
óó -
)
óó- .
.
óó. /
Where
óó/ 4
(
óó4 5
p
óó5 6
=>
óó7 9
p
óó: ;
.
óó; <
	Published
óó< E
>
óóF G
DateTime
óóH P
.
óóP Q
MinValue
óóQ Y
&&
óóZ \
p
óó] ^
.
óó^ _

IsFeatured
óó_ i
&&
óój l
p
óóm n
.
óón o
PostType
óóo w
==
óóx z
PostTypeóó{ É
.óóÉ Ñ
PostóóÑ à
)óóà â
.óóâ ä!
OrderByDescendingóóä õ
(óóõ ú
póóú ù
=>óóû †
póó° ¢
.óó¢ £
	Publishedóó£ ¨
)óó¨ ≠
.óó≠ Æ
ToListóóÆ ¥
(óó¥ µ
)óóµ ∂
;óó∂ ∑
pubfeatured
òò 
=
òò 
pubfeatured
òò 
.
òò 
Concat
òò $
(
òò$ %
featured
òò% -
)
òò- .
.
òò. /
ToList
òò/ 5
(
òò5 6
)
òò6 7
;
òò7 8
}
ôô 
if
õõ 
(
õõ 
include
õõ 
.
õõ 
ToUpper
õõ 
(
õõ 
)
õõ 
.
õõ 
Contains
õõ !
(
õõ! "
	Constants
õõ" +
.
õõ+ ,
PostPublished
õõ, 9
)
õõ9 :
||
õõ; =
string
õõ> D
.
õõD E
IsNullOrEmpty
õõE R
(
õõR S
include
õõS Z
)
õõZ [
)
õõ[ \
{
úú 
var
ùù 
	published
ùù 
=
ùù 
author
ùù 
>
ùù 
$num
ùù 
?
ùù  
_db
ûû 	
.
ûû	 

Posts
ûû
 
.
ûû 
Include
ûû 
(
ûû 
p
ûû 
=>
ûû 
p
ûû 
.
ûû 
PostCategories
ûû -
)
ûû- .
.
ûû. /
Where
ûû/ 4
(
ûû4 5
p
ûû5 6
=>
ûû7 9
p
ûû: ;
.
ûû; <
	Published
ûû< E
>
ûûF G
DateTime
ûûH P
.
ûûP Q
MinValue
ûûQ Y
&&
ûûZ \
!
ûû] ^
p
ûû^ _
.
ûû_ `

IsFeatured
ûû` j
&&
ûûk m
p
ûûn o
.
ûûo p
AuthorId
ûûp x
==
ûûy {
authorûû| Ç
&&ûûÉ Ö
pûûÜ á
.ûûá à
PostTypeûûà ê
==ûûë ì
PostTypeûûî ú
.ûûú ù
Postûûù °
)ûû° ¢
.ûû¢ £!
OrderByDescendingûû£ ¥
(ûû¥ µ
pûûµ ∂
=>ûû∑ π
pûû∫ ª
.ûûª º
	Publishedûûº ≈
)ûû≈ ∆
.ûû∆ «
ToListûû« Õ
(ûûÕ Œ
)ûûŒ œ
:ûû– —
_db
üü 	
.
üü	 

Posts
üü
 
.
üü 
Include
üü 
(
üü 
p
üü 
=>
üü 
p
üü 
.
üü 
PostCategories
üü -
)
üü- .
.
üü. /
Where
üü/ 4
(
üü4 5
p
üü5 6
=>
üü7 9
p
üü: ;
.
üü; <
	Published
üü< E
>
üüF G
DateTime
üüH P
.
üüP Q
MinValue
üüQ Y
&&
üüZ \
!
üü] ^
p
üü^ _
.
üü_ `

IsFeatured
üü` j
&&
üük m
p
üün o
.
üüo p
PostType
üüp x
==
üüy {
PostTypeüü| Ñ
.üüÑ Ö
PostüüÖ â
)üüâ ä
.üüä ã!
OrderByDescendingüüã ú
(üüú ù
püüù û
=>üüü °
püü¢ £
.üü£ §
	Publishedüü§ ≠
)üü≠ Æ
.üüÆ Ø
ToListüüØ µ
(üüµ ∂
)üü∂ ∑
;üü∑ ∏
pubfeatured
†† 
=
†† 
pubfeatured
†† 
.
†† 
Concat
†† $
(
††$ %
	published
††% .
)
††. /
.
††/ 0
ToList
††0 6
(
††6 7
)
††7 8
;
††8 9
}
°° 
pubfeatured
££ 
=
££ 
pubfeatured
££ 
.
££ 
OrderByDescending
££ .
(
££. /
p
££/ 0
=>
££1 3
p
££4 5
.
££5 6
	Published
££6 ?
)
££? @
.
££@ A
ToList
££A G
(
££G H
)
££H I
;
££I J
items
§§ 
=
§§	 

items
§§ 
.
§§ 
Concat
§§ 
(
§§ 
pubfeatured
§§ #
)
§§# $
.
§§$ %
ToList
§§% +
(
§§+ ,
)
§§, -
;
§§- .
return
¶¶ 	
items
¶¶
 
;
¶¶ 
}
ßß 
bool
©© 
IsDemo
©© 
(
©© 
)
©© 
{
™™ 	
return
´´ 
_configuration
´´ !
.
´´! "

GetSection
´´" ,
(
´´, -
$str
´´- 8
)
´´8 9
.
´´9 :
GetValue
´´: B
<
´´B C
bool
´´C G
>
´´G H
(
´´H I
$str
´´I S
)
´´S T
;
´´T U
}
¨¨ 	
}
ØØ 
}∞∞ Íû
wC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\StorageProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{ 
public 
	interface 
IStorageProvider "
{ 
Task 
< 
IList 
< 
string 
> 
> 
	GetThemes 
(  
)  !
;! "
bool 

FileExists 
( 
string 
path 
) 
; 
Task 
< 
bool 
> 
UploadFormFile 
( 
	IFormFile %
file& *
,* +
string, 2
path3 7
=8 9
$str: <
)< =
;= >
Task 
< 
string 
> 
UploadFromWeb 
( 
Uri  

requestUri! +
,+ ,
string- 3
root4 8
,8 9
string: @
pathA E
=F G
$strH J
)J K
;K L
Task 
< 
string 
> 
UploadBase64Image  
(  !
string! '
baseImg( /
,/ 0
string1 7
root8 <
,< =
string> D
pathE I
=J K
$strL N
)N O
;O P
Task 
< 
ThemeSettings 
> 
GetThemeSettings &
(& '
string' -
theme. 3
)3 4
;4 5
Task 
< 
bool 
> 
SaveThemeSettings 
( 
string %
theme& +
,+ ,
ThemeSettings- :
settings; C
)C D
;D E
} 
public 
class 
StorageProvider 
: 
IStorageProvider  0
{ 
private 	
string
 
_storageRoot 
; 
private 	
readonly
 
string 
_slash  
=! "
Path# '
.' ("
DirectorySeparatorChar( >
.> ?
ToString? G
(G H
)H I
;I J
private 	
readonly
 
IConfiguration !
_configuration" 0
;0 1
public   
StorageProvider  	 
(   
IConfiguration   '
configuration  ( 5
)  5 6
{!! 
_storageRoot"" 
="" 
$""" 
{"" 
ContentRoot""  
}""  !
{""! "
_slash""" (
}""( )
$str"") 0
{""0 1
_slash""1 7
}""7 8
$str""8 <
{""< =
_slash""= C
}""C D
"""D E
;""E F
_configuration## 
=## 
configuration## !
;##! "
}$$ 
public&& 
bool&&	 

FileExists&& 
(&& 
string&& 
path&&  $
)&&$ %
{'' 
Serilog(( 

.((
 
Log(( 
.(( 
Information(( 
((( 
$"(( 
$str(( *
{((* +
Path((+ /
.((/ 0
Combine((0 7
(((7 8
ContentRoot((8 C
,((C D
path((E I
)((I J
}((J K
"((K L
)((L M
;((M N
return)) 	
File))
 
.)) 
Exists)) 
()) 
Path)) 
.)) 
Combine)) "
())" #
ContentRoot))# .
,)). /
path))0 4
)))4 5
)))5 6
;))6 7
}** 
public,, 
async,,	 
Task,, 
<,, 
IList,, 
<,, 
string,,  
>,,  !
>,,! "
	GetThemes,,# ,
(,,, -
),,- .
{-- 
var.. 
themes.. 
=.. 
new.. 
List.. 
<.. 
string.. 
>..  
(..  !
)..! "
;.." #
var// 
themesDirectory// 
=// 
Path// 
.// 
Combine// %
(//% &
ContentRoot//& 1
,//1 2
$"//3 5
$str//5 :
{//: ;
_slash//; A
}//A B
$str//B H
"//H I
)//I J
;//J K
try00 
{11 
foreach22 
(22 
string22 
dir22 
in22 
	Directory22 $
.22$ %
GetDirectories22% 3
(223 4
themesDirectory224 C
)22C D
)22D E
{33 
themes44 
.44 
Add44 
(44 
Path44 
.44 
GetFileName44  
(44  !
dir44! $
)44$ %
)44% &
;44& '
}55 
}66 
catch77 
{77	 

}77 
return88 	
await88
 
Task88 
.88 

FromResult88 
(88  
themes88  &
)88& '
;88' (
}99 
public;; 
async;;	 
Task;; 
<;; 
ThemeSettings;; !
>;;! "
GetThemeSettings;;# 3
(;;3 4
string;;4 :
theme;;; @
);;@ A
{<< 
var== 
settings== 
=== 
new== 
ThemeSettings== #
(==# $
)==$ %
;==% &
var>> 
fileName>> 
=>> 
Path>> 
.>> 
Combine>> 
(>> 
ContentRoot>> *
,>>* +
$">>, .
$str>>. 5
{>>5 6
_slash>>6 <
}>>< =
$str>>= C
{>>C D
_slash>>D J
}>>J K
{>>K L
theme>>L Q
.>>Q R
ToLower>>R Y
(>>Y Z
)>>Z [
}>>[ \
{>>\ ]
_slash>>] c
}>>c d
$str>>d q
">>q r
)>>r s
;>>s t
if?? 
(?? 
File?? 
.?? 
Exists?? 
(?? 
fileName?? 
)?? 
)?? 
{@@ 
tryAA 
{BB 
stringCC 

jsonStringCC 
=CC 
FileCC 
.CC 
ReadAllTextCC )
(CC) *
fileNameCC* 2
)CC2 3
;CC3 4
settingsDD 
=DD 
JsonSerializerDD 
.DD 
DeserializeDD *
<DD* +
ThemeSettingsDD+ 8
>DD8 9
(DD9 :

jsonStringDD: D
)DDD E
;DDE F
}EE 
catchFF 	
(FF
 
	ExceptionFF 
exFF 
)FF 
{GG 
SerilogHH 
.HH 
LogHH 
.HH 
ErrorHH 
(HH 
$"HH 
$strHH 7
{HH7 8
exHH8 :
.HH: ;
MessageHH; B
}HHB C
"HHC D
)HHD E
;HHE F
returnII 
nullII 
;II 
}JJ 
}KK 
returnMM 	
awaitMM
 
TaskMM 
.MM 

FromResultMM 
(MM  
settingsMM  (
)MM( )
;MM) *
}NN 
publicPP 
asyncPP	 
TaskPP 
<PP 
boolPP 
>PP 
SaveThemeSettingsPP +
(PP+ ,
stringPP, 2
themePP3 8
,PP8 9
ThemeSettingsPP: G
settingsPPH P
)PPP Q
{QQ 
varRR 
fileNameRR 
=RR 
PathRR 
.RR 
CombineRR 
(RR 
ContentRootRR *
,RR* +
$"RR, .
$strRR. 5
{RR5 6
_slashRR6 <
}RR< =
$strRR= C
{RRC D
_slashRRD J
}RRJ K
{RRK L
themeRRL Q
.RRQ R
ToLowerRRR Y
(RRY Z
)RRZ [
}RR[ \
{RR\ ]
_slashRR] c
}RRc d
$strRRd q
"RRq r
)RRr s
;RRs t
trySS 
{TT 
ifUU 
(UU 
FileUU 
.UU 
ExistsUU 
(UU 
fileNameUU 
)UU 
)UU 
FileVV 	
.VV	 

DeleteVV
 
(VV 
fileNameVV 
)VV 
;VV 
varXX 
optionsXX 
=XX 
newXX !
JsonSerializerOptionsXX +
{XX, -
WriteIndentedXX. ;
=XX< =
trueXX> B
,XXB C'
PropertyNameCaseInsensitiveXXD _
=XX` a
trueXXb f
}XXg h
;XXh i
stringZZ 


jsonStringZZ 
=ZZ 
JsonSerializerZZ &
.ZZ& '
	SerializeZZ' 0
(ZZ0 1
settingsZZ1 9
,ZZ9 :
optionsZZ; B
)ZZB C
;ZZC D
using\\ 	

FileStream\\
 
createStream\\ !
=\\" #
File\\$ (
.\\( )
Create\\) /
(\\/ 0
fileName\\0 8
)\\8 9
;\\9 :
await]] 	
JsonSerializer]]
 
.]] 
SerializeAsync]] '
(]]' (
createStream]]( 4
,]]4 5
settings]]6 >
,]]> ?
options]]@ G
)]]G H
;]]H I
}^^ 
catch__ 
(__	 

	Exception__
 
ex__ 
)__ 
{`` 
Serilogaa 
.aa 
Logaa 
.aa 
Erroraa 
(aa 
$"aa 
$straa 6
{aa6 7
exaa7 9
.aa9 :
Messageaa: A
}aaA B
"aaB C
)aaC D
;aaD E
returnbb 

falsebb 
;bb 
}cc 
returndd 	
truedd
 
;dd 
}ee 
publicgg 
asyncgg	 
Taskgg 
<gg 
boolgg 
>gg 
UploadFormFilegg (
(gg( )
	IFormFilegg) 2
filegg3 7
,gg7 8
stringgg9 ?
pathgg@ D
=ggE F
$strggG I
)ggI J
{hh 
pathii 
=ii 	
pathii
 
.ii 
Replaceii 
(ii 
$strii 
,ii 
_slashii "
)ii" #
;ii# $

VerifyPathjj 
(jj 
pathjj 
)jj 
;jj 
varll 
fileNamell 
=ll 
GetFileNamell 
(ll 
filell "
.ll" #
FileNamell# +
)ll+ ,
;ll, -
ifnn 
(nn 
InvalidFileNamenn 
(nn 
fileNamenn 
)nn 
)nn  
{oo 
Serilogpp 
.pp 
Logpp 
.pp 
Errorpp 
(pp 
$"pp 
$strpp +
{pp+ ,
fileNamepp, 4
}pp4 5
"pp5 6
)pp6 7
;pp7 8
returnqq 

falseqq 
;qq 
}rr 
vartt 
filePathtt 
=tt 
stringtt 
.tt 
IsNullOrEmptytt &
(tt& '
pathtt' +
)tt+ ,
?tt- .
Pathuu 	
.uu	 

Combineuu
 
(uu 
_storageRootuu 
,uu 
fileNameuu  (
)uu( )
:uu* +
Pathvv 	
.vv	 

Combinevv
 
(vv 
_storageRootvv 
,vv 
pathvv  $
+vv% &
_slashvv' -
+vv. /
fileNamevv0 8
)vv8 9
;vv9 :
Serilogxx 

.xx
 
Logxx 
.xx 
Informationxx 
(xx 
$"xx 
$strxx +
{xx+ ,
_storageRootxx, 8
}xx8 9
"xx9 :
)xx: ;
;xx; <
Serilogyy 

.yy
 
Logyy 
.yy 
Informationyy 
(yy 
$"yy 
$stryy -
{yy- .
filePathyy. 6
}yy6 7
"yy7 8
)yy8 9
;yy9 :
tryzz 
{{{ 
using|| 	
(||
 
var|| 

fileStream|| 
=|| 
new|| 

FileStream||  *
(||* +
filePath||+ 3
,||3 4
FileMode||5 =
.||= >
Create||> D
)||D E
)||E F
{}} 
await~~ 

file~~ 
.~~ 
CopyToAsync~~ 
(~~ 

fileStream~~ &
)~~& '
;~~' (
Serilog 
. 
Log 
. 
Information 
( 
$" 
$str .
{. /
filePath/ 7
}7 8
"8 9
)9 :
;: ;
}
ÄÄ 
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ	 

	Exception
ÇÇ
 
ex
ÇÇ 
)
ÇÇ 
{
ÉÉ 
Serilog
ÑÑ 
.
ÑÑ 
Log
ÑÑ 
.
ÑÑ 
Error
ÑÑ 
(
ÑÑ 
$"
ÑÑ 
$str
ÑÑ .
{
ÑÑ. /
ex
ÑÑ/ 1
.
ÑÑ1 2
Message
ÑÑ2 9
}
ÑÑ9 :
"
ÑÑ: ;
)
ÑÑ; <
;
ÑÑ< =
}
ÖÖ 
return
áá 	
true
áá
 
;
áá 
}
àà 
public
ää 
async
ää	 
Task
ää 
<
ää 
string
ää 
>
ää 
UploadFromWeb
ää )
(
ää) *
Uri
ää* -

requestUri
ää. 8
,
ää8 9
string
ää: @
root
ääA E
,
ääE F
string
ääG M
path
ääN R
=
ääS T
$str
ääU W
)
ääW X
{
ãã 
path
åå 
=
åå 	
path
åå
 
.
åå 
Replace
åå 
(
åå 
$str
åå 
,
åå 
_slash
åå "
)
åå" #
;
åå# $

VerifyPath
çç 
(
çç 
path
çç 
)
çç 
;
çç 
var
èè 
fileName
èè 
=
èè 
TitleFromUri
èè 
(
èè 

requestUri
èè )
)
èè) *
;
èè* +
var
êê 
filePath
êê 
=
êê 
string
êê 
.
êê 
IsNullOrEmpty
êê &
(
êê& '
path
êê' +
)
êê+ ,
?
êê- .
Path
ëë 	
.
ëë	 

Combine
ëë
 
(
ëë 
_storageRoot
ëë 
,
ëë 
fileName
ëë  (
)
ëë( )
:
ëë* +
Path
íí 	
.
íí	 

Combine
íí
 
(
íí 
_storageRoot
íí 
,
íí 
path
íí  $
+
íí% &
_slash
íí' -
+
íí. /
fileName
íí0 8
)
íí8 9
;
íí9 :

HttpClient
îî 
client
îî 
=
îî 
new
îî 

HttpClient
îî %
(
îî% &
)
îî& '
;
îî' (
var
ïï 
response
ïï 
=
ïï 
await
ïï 
client
ïï 
.
ïï 
GetAsync
ïï '
(
ïï' (

requestUri
ïï( 2
)
ïï2 3
;
ïï3 4
using
ññ 
(
ññ	 

var
ññ
 
fs
ññ 
=
ññ 
new
ññ 

FileStream
ññ !
(
ññ! "
filePath
ññ" *
,
ññ* +
FileMode
ññ, 4
.
ññ4 5
	CreateNew
ññ5 >
)
ññ> ?
)
ññ? @
{
óó 
await
òò 	
response
òò
 
.
òò 
Content
òò 
.
òò 
CopyToAsync
òò &
(
òò& '
fs
òò' )
)
òò) *
;
òò* +
return
ôô 

await
ôô 
Task
ôô 
.
ôô 

FromResult
ôô  
(
ôô  !
$"
ôô! #
$str
ôô# %
{
ôô% &
fileName
ôô& .
}
ôô. /
$str
ôô/ 1
{
ôô1 2
root
ôô2 6
}
ôô6 7
{
ôô7 8
	PathToUrl
ôô8 A
(
ôôA B
filePath
ôôB J
)
ôôJ K
}
ôôK L
$str
ôôL M
"
ôôM N
)
ôôN O
;
ôôO P
}
öö 
}
õõ 
public
ùù 
async
ùù	 
Task
ùù 
<
ùù 
string
ùù 
>
ùù 
UploadBase64Image
ùù -
(
ùù- .
string
ùù. 4
baseImg
ùù5 <
,
ùù< =
string
ùù> D
root
ùùE I
,
ùùI J
string
ùùK Q
path
ùùR V
=
ùùW X
$str
ùùY [
)
ùù[ \
{
ûû 
path
üü 
=
üü 	
path
üü
 
.
üü 
Replace
üü 
(
üü 
$str
üü 
,
üü 
_slash
üü "
)
üü" #
;
üü# $
var
†† 
fileName
†† 
=
†† 
$str
†† 
;
†† 

VerifyPath
¢¢ 
(
¢¢ 
path
¢¢ 
)
¢¢ 
;
¢¢ 
string
££ 	
imgSrc
££
 
=
££ 
GetImgSrcValue
££ !
(
££! "
baseImg
££" )
)
££) *
;
££* +
Random
•• 	
rnd
••
 
=
•• 
new
•• 
Random
•• 
(
•• 
)
•• 
;
•• 
if
ßß 
(
ßß 
imgSrc
ßß 
.
ßß 

StartsWith
ßß 
(
ßß 
$str
ßß 1
)
ßß1 2
)
ßß2 3
{
®® 
fileName
©© 
=
©© 
string
©© 
.
©© 
Format
©© 
(
©© 
$str
©© &
,
©©& '
rnd
©©( +
.
©©+ ,
Next
©©, 0
(
©©0 1
$num
©©1 5
,
©©5 6
$num
©©7 ;
)
©©; <
)
©©< =
;
©©= >
imgSrc
™™ 

=
™™ 
imgSrc
™™ 
.
™™ 
Replace
™™ 
(
™™ 
$str
™™ 4
,
™™4 5
$str
™™6 8
)
™™8 9
;
™™9 :
}
´´ 
if
¨¨ 
(
¨¨ 
imgSrc
¨¨ 
.
¨¨ 

StartsWith
¨¨ 
(
¨¨ 
$str
¨¨ 2
)
¨¨2 3
)
¨¨3 4
{
≠≠ 
fileName
ÆÆ 
=
ÆÆ 
string
ÆÆ 
.
ÆÆ 
Format
ÆÆ 
(
ÆÆ 
$str
ÆÆ '
,
ÆÆ' (
rnd
ÆÆ) ,
.
ÆÆ, -
Next
ÆÆ- 1
(
ÆÆ1 2
$num
ÆÆ2 6
,
ÆÆ6 7
$num
ÆÆ8 <
)
ÆÆ< =
)
ÆÆ= >
;
ÆÆ> ?
imgSrc
ØØ 

=
ØØ 
imgSrc
ØØ 
.
ØØ 
Replace
ØØ 
(
ØØ 
$str
ØØ 5
,
ØØ5 6
$str
ØØ7 9
)
ØØ9 :
;
ØØ: ;
}
∞∞ 
if
±± 
(
±± 
imgSrc
±± 
.
±± 

StartsWith
±± 
(
±± 
$str
±± 1
)
±±1 2
)
±±2 3
{
≤≤ 
fileName
≥≥ 
=
≥≥ 
string
≥≥ 
.
≥≥ 
Format
≥≥ 
(
≥≥ 
$str
≥≥ &
,
≥≥& '
rnd
≥≥( +
.
≥≥+ ,
Next
≥≥, 0
(
≥≥0 1
$num
≥≥1 5
,
≥≥5 6
$num
≥≥7 ;
)
≥≥; <
)
≥≥< =
;
≥≥= >
imgSrc
¥¥ 

=
¥¥ 
imgSrc
¥¥ 
.
¥¥ 
Replace
¥¥ 
(
¥¥ 
$str
¥¥ 4
,
¥¥4 5
$str
¥¥6 8
)
¥¥8 9
;
¥¥9 :
}
µµ 
var
∑∑ 
filePath
∑∑ 
=
∑∑ 
string
∑∑ 
.
∑∑ 
IsNullOrEmpty
∑∑ &
(
∑∑& '
path
∑∑' +
)
∑∑+ ,
?
∑∑- .
Path
∏∏ 	
.
∏∏	 

Combine
∏∏
 
(
∏∏ 
_storageRoot
∏∏ 
,
∏∏ 
fileName
∏∏  (
)
∏∏( )
:
∏∏* +
Path
ππ 	
.
ππ	 

Combine
ππ
 
(
ππ 
_storageRoot
ππ 
,
ππ 
path
ππ  $
+
ππ% &
_slash
ππ' -
+
ππ. /
fileName
ππ0 8
)
ππ8 9
;
ππ9 :
await
ªª 
File
ªª	 
.
ªª  
WriteAllBytesAsync
ªª  
(
ªª  !
filePath
ªª! )
,
ªª) *
Convert
ªª+ 2
.
ªª2 3
FromBase64String
ªª3 C
(
ªªC D
imgSrc
ªªD J
)
ªªJ K
)
ªªK L
;
ªªL M
return
ΩΩ 	
$"
ΩΩ
 
$str
ΩΩ 
{
ΩΩ 
fileName
ΩΩ 
}
ΩΩ 
$str
ΩΩ 
{
ΩΩ 
root
ΩΩ 
}
ΩΩ  
{
ΩΩ  !
	PathToUrl
ΩΩ! *
(
ΩΩ* +
filePath
ΩΩ+ 3
)
ΩΩ3 4
}
ΩΩ4 5
$str
ΩΩ5 6
"
ΩΩ6 7
;
ΩΩ7 8
}
ææ 
private
¬¬ 	
string
¬¬
 
ContentRoot
¬¬ 
{
√√ 
get
ƒƒ 
{
≈≈ 
string
∆∆ 

path
∆∆ 
=
∆∆ 
	Directory
∆∆ 
.
∆∆ !
GetCurrentDirectory
∆∆ /
(
∆∆/ 0
)
∆∆0 1
;
∆∆1 2
string
«« 

testsDirectory
«« 
=
«« 
$"
«« 
$str
«« #
{
««# $
_slash
««$ *
}
««* +
$str
««+ :
"
««: ;
;
««; <
string
»» 

appDirectory
»» 
=
»» 
$"
»» 
$str
»» 
{
»»  
_slash
»»  &
}
»»& '
$str
»»' 0
"
»»0 1
;
»»1 2
Serilog
   
.
   
Log
   
.
   
Information
   
(
   
$"
   
$str
   6
{
  6 7
path
  7 ;
}
  ; <
"
  < =
)
  = >
;
  > ?
if
ÕÕ 
(
ÕÕ 
path
ÕÕ 
.
ÕÕ 
LastIndexOf
ÕÕ 
(
ÕÕ 
testsDirectory
ÕÕ '
)
ÕÕ' (
>
ÕÕ) *
$num
ÕÕ+ ,
)
ÕÕ, -
{
ŒŒ 
path
œœ 	
=
œœ
 
path
œœ 
.
œœ 
	Substring
œœ 
(
œœ 
$num
œœ 
,
œœ 
path
œœ "
.
œœ" #
LastIndexOf
œœ# .
(
œœ. /
testsDirectory
œœ/ =
)
œœ= >
)
œœ> ?
;
œœ? @
Serilog
–– 
.
–– 
Log
–– 
.
–– 
Information
–– 
(
–– 
$"
–– 
$str
–– /
{
––/ 0
path
––0 4
}
––4 5
$str
––5 8
{
––8 9
_slash
––9 ?
}
––? @
$str
––@ I
"
––I J
)
––J K
;
––K L
return
—— 
$"
—— 
{
—— 
path
—— 
}
—— 
$str
—— 
{
—— 
_slash
—— 
}
—— 
$str
—— (
"
——( )
;
——) *
}
““ 
if
ŸŸ 
(
ŸŸ 
path
ŸŸ 
.
ŸŸ 
LastIndexOf
ŸŸ 
(
ŸŸ 
appDirectory
ŸŸ %
)
ŸŸ% &
>
ŸŸ' (
$num
ŸŸ) *
)
ŸŸ* +
{
⁄⁄ 
path
€€ 	
=
€€
 
path
€€ 
.
€€ 
	Substring
€€ 
(
€€ 
$num
€€ 
,
€€ 
path
€€ "
.
€€" #
LastIndexOf
€€# .
(
€€. /
appDirectory
€€/ ;
)
€€; <
)
€€< =
;
€€= >
Serilog
‹‹ 
.
‹‹ 
Log
‹‹ 
.
‹‹ 
Information
‹‹ 
(
‹‹ 
$"
‹‹ 
$str
‹‹ 7
{
‹‹7 8
path
‹‹8 <
}
‹‹< =
$str
‹‹= @
{
‹‹@ A
_slash
‹‹A G
}
‹‹G H
$str
‹‹H Q
"
‹‹Q R
)
‹‹R S
;
‹‹S T
return
›› 
$"
›› 
{
›› 
path
›› 
}
›› 
$str
›› 
{
›› 
_slash
›› 
}
›› 
$str
›› (
"
››( )
;
››) *
}
ﬁﬁ 
Serilog
ﬂﬂ 
.
ﬂﬂ 
Log
ﬂﬂ 
.
ﬂﬂ 
Information
ﬂﬂ 
(
ﬂﬂ 
$"
ﬂﬂ 
$str
ﬂﬂ *
{
ﬂﬂ* +
path
ﬂﬂ+ /
}
ﬂﬂ/ 0
"
ﬂﬂ0 1
)
ﬂﬂ1 2
;
ﬂﬂ2 3
return
‡‡ 

path
‡‡ 
;
‡‡ 
}
·· 
}
‚‚ 
string
‰‰ 
GetFileName
‰‰	 
(
‰‰ 
string
‰‰ 
fileName
‰‰ $
)
‰‰$ %
{
ÂÂ 
if
ËË 
(
ËË 
fileName
ËË 
.
ËË 
Contains
ËË 
(
ËË 
_slash
ËË 
)
ËË  
)
ËË  !
{
ÈÈ 
fileName
ÍÍ 
=
ÍÍ 
fileName
ÍÍ 
.
ÍÍ 
	Substring
ÍÍ !
(
ÍÍ! "
fileName
ÍÍ" *
.
ÍÍ* +
LastIndexOf
ÍÍ+ 6
(
ÍÍ6 7
_slash
ÍÍ7 =
)
ÍÍ= >
)
ÍÍ> ?
;
ÍÍ? @
fileName
ÎÎ 
=
ÎÎ 
fileName
ÎÎ 
.
ÎÎ 
Replace
ÎÎ 
(
ÎÎ  
_slash
ÎÎ  &
,
ÎÎ& '
$str
ÎÎ( *
)
ÎÎ* +
;
ÎÎ+ ,
}
ÏÏ 
if
ÔÔ 
(
ÔÔ 
fileName
ÔÔ 
.
ÔÔ 

StartsWith
ÔÔ 
(
ÔÔ 
$str
ÔÔ %
)
ÔÔ% &
)
ÔÔ& '
{
 
Random
ÒÒ 

rnd
ÒÒ 
=
ÒÒ 
new
ÒÒ 
Random
ÒÒ 
(
ÒÒ 
)
ÒÒ 
;
ÒÒ 
fileName
ÚÚ 
=
ÚÚ 
fileName
ÚÚ 
.
ÚÚ 
Replace
ÚÚ 
(
ÚÚ  
$str
ÚÚ  *
,
ÚÚ* +
rnd
ÚÚ, /
.
ÚÚ/ 0
Next
ÚÚ0 4
(
ÚÚ4 5
$num
ÚÚ5 ;
,
ÚÚ; <
$num
ÚÚ= C
)
ÚÚC D
.
ÚÚD E
ToString
ÚÚE M
(
ÚÚM N
)
ÚÚN O
)
ÚÚO P
;
ÚÚP Q
}
ÛÛ 
return
ÙÙ 	
fileName
ÙÙ
 
.
ÙÙ 
SanitizePath
ÙÙ  
(
ÙÙ  !
)
ÙÙ! "
;
ÙÙ" #
}
ıı 
void
˜˜ 

VerifyPath
˜˜ 
(
˜˜ 
string
˜˜ 
path
˜˜ 
)
˜˜ 
{
¯¯ 
path
˘˘ 
=
˘˘ 	
path
˘˘
 
.
˘˘ 
SanitizePath
˘˘ 
(
˘˘ 
)
˘˘ 
;
˘˘ 
if
˚˚ 
(
˚˚ 
!
˚˚ 
string
˚˚ 
.
˚˚ 
IsNullOrEmpty
˚˚ 
(
˚˚ 
path
˚˚ !
)
˚˚! "
)
˚˚" #
{
¸¸ 
var
˝˝ 
dir
˝˝ 
=
˝˝ 
Path
˝˝ 
.
˝˝ 
Combine
˝˝ 
(
˝˝ 
_storageRoot
˝˝ '
,
˝˝' (
path
˝˝) -
)
˝˝- .
;
˝˝. /
if
ˇˇ 
(
ˇˇ 
!
ˇˇ 	
	Directory
ˇˇ	 
.
ˇˇ 
Exists
ˇˇ 
(
ˇˇ 
dir
ˇˇ 
)
ˇˇ 
)
ˇˇ 
{
ÄÄ 
	Directory
ÅÅ 
.
ÅÅ 
CreateDirectory
ÅÅ 
(
ÅÅ 
dir
ÅÅ "
)
ÅÅ" #
;
ÅÅ# $
}
ÇÇ 
}
ÉÉ 
}
ÑÑ 
string
ÜÜ 
TitleFromUri
ÜÜ	 
(
ÜÜ 
Uri
ÜÜ 
uri
ÜÜ 
)
ÜÜ 
{
áá 
var
àà 
title
àà 
=
àà 
uri
àà 
.
àà 
ToString
àà 
(
àà 
)
àà 
.
àà 
ToLower
àà %
(
àà% &
)
àà& '
;
àà' (
title
ââ 
=
ââ	 

title
ââ 
.
ââ 
Replace
ââ 
(
ââ 
$str
ââ 
,
ââ 
$str
ââ  #
)
ââ# $
;
ââ$ %
if
ãã 
(
ãã 
title
ãã 
.
ãã 
EndsWith
ãã 
(
ãã 
$str
ãã 
)
ãã 
)
ãã 
{
åå 
title
çç 	
=
çç
 
title
çç 
.
çç 
Replace
çç 
(
çç 
$str
çç !
,
çç! "
$str
çç# %
)
çç% &
;
çç& '
}
éé 
if
èè 
(
èè 
title
èè 
.
èè 
Contains
èè 
(
èè 
$str
èè *
)
èè* +
)
èè+ ,
{
êê 
title
ëë 	
=
ëë
 
title
ëë 
.
ëë 
	Substring
ëë 
(
ëë 
title
ëë !
.
ëë! "
IndexOf
ëë" )
(
ëë) *
$str
ëë* >
)
ëë> ?
+
ëë@ A
$num
ëëB D
)
ëëD E
;
ëëE F
}
íí 
if
ìì 
(
ìì 
title
ìì 
.
ìì 
Contains
ìì 
(
ìì 
$str
ìì &
)
ìì& '
)
ìì' (
{
îî 
title
ïï 	
=
ïï
 
title
ïï 
.
ïï 
	Substring
ïï 
(
ïï 
title
ïï !
.
ïï! "
IndexOf
ïï" )
(
ïï) *
$str
ïï* :
)
ïï: ;
+
ïï< =
$num
ïï> @
)
ïï@ A
;
ïïA B
}
ññ 
if
óó 
(
óó 
title
óó 
.
óó 
Contains
óó 
(
óó 
$str
óó %
)
óó% &
||
óó' )
title
óó* /
.
óó/ 0
Contains
óó0 8
(
óó8 9
$str
óó9 B
)
óóB C
)
óóC D
{
òò 
Random
ôô 

rnd
ôô 
=
ôô 
new
ôô 
Random
ôô 
(
ôô 
)
ôô 
;
ôô 
title
öö 	
=
öö
 
string
öö 
.
öö 
Format
öö 
(
öö 
$str
öö #
,
öö# $
rnd
öö% (
.
öö( )
Next
öö) -
(
öö- .
$num
öö. 2
,
öö2 3
$num
öö4 8
)
öö8 9
)
öö9 :
;
öö: ;
}
õõ 
if
ùù 
(
ùù 
title
ùù 
.
ùù 
Contains
ùù 
(
ùù 
$str
ùù 
)
ùù 
)
ùù 
{
ûû 
title
üü 	
=
üü
 
title
üü 
.
üü 
	Substring
üü 
(
üü 
title
üü !
.
üü! "
LastIndexOf
üü" -
(
üü- .
$str
üü. 1
)
üü1 2
)
üü2 3
;
üü3 4
}
†† 
title
¢¢ 
=
¢¢	 

title
¢¢ 
.
¢¢ 
Replace
¢¢ 
(
¢¢ 
$str
¢¢ 
,
¢¢ 
$str
¢¢ !
)
¢¢! "
;
¢¢" #
return
§§ 	
title
§§
 
.
§§ 
Replace
§§ 
(
§§ 
$str
§§ 
,
§§ 
$str
§§ 
)
§§  
.
§§  !
SanitizeFileName
§§! 1
(
§§1 2
)
§§2 3
;
§§3 4
}
•• 
string
ßß 
	PathToUrl
ßß	 
(
ßß 
string
ßß 
path
ßß 
)
ßß 
{
®® 
string
©© 	
url
©©
 
=
©© 
path
©© 
.
©© 
ReplaceIgnoreCase
©© &
(
©©& '
_storageRoot
©©' 3
,
©©3 4
$str
©©5 7
)
©©7 8
.
©©8 9
Replace
©©9 @
(
©©@ A
_slash
©©A G
,
©©G H
$str
©©I L
)
©©L M
;
©©M N
return
™™ 	
$"
™™
 
$str
™™ 
{
™™ 
url
™™ 
}
™™ 
"
™™ 
;
™™ 
}
´´ 
string
≠≠ 
GetImgSrcValue
≠≠	 
(
≠≠ 
string
≠≠ 
imgTag
≠≠ %
)
≠≠% &
{
ÆÆ 
if
ØØ 
(
ØØ 
!
ØØ 
(
ØØ 	
imgTag
ØØ	 
.
ØØ 
Contains
ØØ 
(
ØØ 
$str
ØØ %
)
ØØ% &
&&
ØØ' )
imgTag
ØØ* 0
.
ØØ0 1
Contains
ØØ1 9
(
ØØ9 :
$str
ØØ: @
)
ØØ@ A
)
ØØA B
)
ØØB C
return
∞∞ 

imgTag
∞∞ 
;
∞∞ 
int
≤≤ 
start
≤≤ 
=
≤≤ 
imgTag
≤≤ 
.
≤≤ 
IndexOf
≤≤ 
(
≤≤ 
$str
≤≤ $
)
≤≤$ %
;
≤≤% &
int
≥≥ 
srcStart
≥≥ 
=
≥≥ 
imgTag
≥≥ 
.
≥≥ 
IndexOf
≥≥  
(
≥≥  !
$str
≥≥! %
,
≥≥% &
start
≥≥' ,
)
≥≥, -
+
≥≥. /
$num
≥≥0 1
;
≥≥1 2
if
µµ 
(
µµ 
srcStart
µµ 
<
µµ 
$num
µµ 
)
µµ 
return
∂∂ 

imgTag
∂∂ 
;
∂∂ 
int
∏∏ 
srcEnd
∏∏ 
=
∏∏ 
imgTag
∏∏ 
.
∏∏ 
IndexOf
∏∏ 
(
∏∏ 
$str
∏∏ #
,
∏∏# $
srcStart
∏∏% -
)
∏∏- .
;
∏∏. /
if
∫∫ 
(
∫∫ 
srcEnd
∫∫ 
<
∫∫ 
$num
∫∫ 
||
∫∫ 
srcEnd
∫∫ 
<=
∫∫ 
srcStart
∫∫ '
)
∫∫' (
return
ªª 

imgTag
ªª 
;
ªª 
return
ΩΩ 	
imgTag
ΩΩ
 
.
ΩΩ 
	Substring
ΩΩ 
(
ΩΩ 
srcStart
ΩΩ #
,
ΩΩ# $
srcEnd
ΩΩ% +
-
ΩΩ, -
srcStart
ΩΩ. 6
)
ΩΩ6 7
;
ΩΩ7 8
}
ææ 
bool
¿¿ 
InvalidFileName
¿¿ 
(
¿¿ 
string
¿¿ 
fileName
¿¿ &
)
¿¿& '
{
¡¡ 
List
¬¬ 
<
¬¬ 
string
¬¬ 
>
¬¬ 
fileExtensions
¬¬ 
=
¬¬  
new
¬¬! $
List
¬¬% )
<
¬¬) *
string
¬¬* 0
>
¬¬0 1
(
¬¬1 2
)
¬¬2 3
{
¬¬4 5
$str
¬¬6 ;
,
¬¬; <
$str
¬¬= B
,
¬¬B C
$str
¬¬D J
,
¬¬J K
$str
¬¬L Q
,
¬¬Q R
$str
¬¬S X
,
¬¬X Y
$str
¬¬Z ^
,
¬¬^ _
$str
¬¬` e
,
¬¬e f
$str
¬¬g l
,
¬¬l m
$str
¬¬n t
,
¬¬t u
$str
¬¬v {
,
¬¬{ |
$str¬¬} É
,¬¬É Ñ
$str¬¬Ö ä
,¬¬ä ã
$str¬¬å ë
,¬¬ë í
$str¬¬ì ò
}¬¬ô ö
;¬¬ö õ
string
√√	 "
configFileExtensions
√√ $
=
√√% &
_configuration
√√' 5
.
√√5 6

GetSection
√√6 @
(
√√@ A
$str
√√A L
)
√√L M
.
√√M N
GetValue
√√N V
<
√√V W
string
√√W ]
>
√√] ^
(
√√^ _
$str
√√_ o
)
√√o p
;
√√p q
if
≈≈ 
(
≈≈ 
!
≈≈ 
string
≈≈ 
.
≈≈ 
IsNullOrEmpty
≈≈ 
(
≈≈ "
configFileExtensions
≈≈ 0
)
≈≈0 1
)
≈≈1 2
{
∆∆ 
fileExtensions
«« 
=
«« 
new
«« 
List
«« 
<
«« 
string
«« $
>
««$ %
(
««% &"
configFileExtensions
««& :
.
««: ;
Split
««; @
(
««@ A
$char
««A D
)
««D E
)
««E F
;
««F G
}
»» 
foreach
   

(
  
 
string
   
ext
   
in
   
fileExtensions
   '
)
  ' (
{
ÀÀ 
if
ÃÃ 
(
ÃÃ 
fileName
ÃÃ 
.
ÃÃ 
EndsWith
ÃÃ 
(
ÃÃ 
ext
ÃÃ 
)
ÃÃ 
)
ÃÃ 
{
ÕÕ 
return
ŒŒ 
false
ŒŒ 
;
ŒŒ 
}
œœ 
}
–– 
return
““ 	
true
““
 
;
““ 
}
”” 
}
÷÷ 
}◊◊ èÌ
{C:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\SyndicationProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{ 
public 
	interface  
ISyndicationProvider &
{ 
Task 
< 
List 
< 
Post 
> 
> 
GetPosts 
( 
string "
feedUrl# *
,* +
int, /
userId0 6
,6 7
Uri8 ;
baseUrl< C
,C D
stringE K
webRootL S
=T U
$strV Y
)Y Z
;Z [
Task 
< 
bool 
> 

ImportPost 
( 
Post 
post !
)! "
;" #
} 
public 
class 
SyndicationProvider !
:" # 
ISyndicationProvider$ 8
{ 
private 	
readonly
 
AppDbContext 

_dbContext  *
;* +
private 	
readonly
 
IStorageProvider #
_storageProvider$ 4
;4 5
private 
static 
int 
_userId "
;" #
private 	
static
 
string 
_webRoot  
;  !
private 	
static
 
Uri 
_baseUrl 
; 
public 
SyndicationProvider	 
( 
AppDbContext )
	dbContext* 3
,3 4
IStorageProvider5 E
storageProviderF U
)U V
{ 

_dbContext   
=   
	dbContext   
;   
_storageProvider!! 
=!! 
storageProvider!! .
;!!. /
}"" 
public$$ 
async$$	 
Task$$ 
<$$ 
List$$ 
<$$ 
Post$$ 
>$$ 
>$$ 
GetPosts$$  (
($$( )
string$$) /
feedUrl$$0 7
,$$7 8
int$$9 <
userId$$= C
,$$C D
Uri$$E H
baseUrl$$I P
,$$P Q
string$$R X
webRoot$$Y `
=$$a b
$str$$c f
)$$f g
{%% 
_userId&& 

=&& 
userId&& 
;&& 
_webRoot'' 
='' 
webRoot'' 
;'' 
_baseUrl(( 
=(( 
baseUrl(( 
;(( 
List** 
<** 
Post** 
>** 
posts** 
=** 
new** 
List** 
<** 
Post** #
>**# $
(**$ %
)**% &
;**& '
try++ 
{,, 
SyndicationFeed-- 
feed-- 
=-- 
SyndicationFeed-- *
.--* +
Load--+ /
(--/ 0
	XmlReader--0 9
.--9 :
Create--: @
(--@ A
feedUrl--A H
)--H I
)--I J
;--J K
foreach.. 
(.. 
var.. 
item.. 
in.. 
feed.. 
... 
Items.. #
)..# $
{// 
posts00 

.00
 
Add00 
(00 
await00 
GetPost00 
(00 
item00 !
)00! "
)00" #
;00# $
}11 
}22 
catch33 
(33	 

	Exception33
 
ex33 
)33 
{44 
Serilog55 
.55 
Log55 
.55 
Error55 
(55 
$"55 
$str55 0
{550 1
ex551 3
.553 4
Message554 ;
}55; <
"55< =
)55= >
;55> ?
}66 
return77 	
posts77
 
;77 
}88 
public:: 
async::	 
Task:: 
<:: 
bool:: 
>:: 

ImportPost:: $
(::$ %
Post::% )
post::* .
)::. /
{;; 
try<< 
{== 
await>> 	
ImportImages>>
 
(>> 
post>> 
)>> 
;>> 
await?? 	
ImportFiles??
 
(?? 
post?? 
)?? 
;?? 
varAA 
	converterAA 
=AA 
newAA 
ReverseMarkdownAA '
.AA' (
	ConverterAA( 1
(AA1 2
)AA2 3
;AA3 4
postCC 
.CC 	
DescriptionCC	 
=CC 
GetDescriptionCC %
(CC% &
	converterCC& /
.CC/ 0
ConvertCC0 7
(CC7 8
postCC8 <
.CC< =
DescriptionCC= H
)CCH I
)CCI J
;CCJ K
postDD 
.DD 	
ContentDD	 
=DD 
	converterDD 
.DD 
ConvertDD $
(DD$ %
postDD% )
.DD) *
ContentDD* 1
)DD1 2
;DD2 3
postEE 
.EE 	
SelectedEE	 
=EE 
falseEE 
;EE 
awaitGG 	

_dbContextGG
 
.GG 
PostsGG 
.GG 
AddAsyncGG #
(GG# $
postGG$ (
)GG( )
;GG) *
ifHH 
(HH 
awaitHH 

_dbContextHH 
.HH 
SaveChangesAsyncHH )
(HH) *
)HH* +
==HH, .
$numHH/ 0
)HH0 1
{II 
SerilogJJ 
.JJ 
LogJJ 
.JJ 
ErrorJJ 
(JJ 
$"JJ 
$strJJ +
{JJ+ ,
postJJ, 0
.JJ0 1
TitleJJ1 6
}JJ6 7
"JJ7 8
)JJ8 9
;JJ9 :
returnKK 
falseKK 
;KK 
}LL 
PostNN 
	savedPostNN	 
=NN 
awaitNN 

_dbContextNN %
.NN% &
PostsNN& +
.NN+ ,
SingleAsyncNN, 7
(NN7 8
pNN8 9
=>NN: <
pNN= >
.NN> ?
SlugNN? C
==NND F
postNNG K
.NNK L
SlugNNL P
)NNP Q
;NNQ R
ifOO 
(OO 
	savedPostOO 
==OO 
nullOO 
)OO 
{PP 
SerilogQQ 
.QQ 
LogQQ 
.QQ 
ErrorQQ 
(QQ 
$"QQ 
$strQQ 4
{QQ4 5
postQQ5 9
.QQ9 :
TitleQQ: ?
}QQ? @
"QQ@ A
)QQA B
;QQB C
returnRR 
falseRR 
;RR 
}SS 
	savedPostUU 
.UU 
BlogUU 
=UU 
awaitUU 

_dbContextUU %
.UU% &
BlogsUU& +
.UU+ ,
FirstOrDefaultAsyncUU, ?
(UU? @
)UU@ A
;UUA B
returnVV 

awaitVV 

_dbContextVV 
.VV 
SaveChangesAsyncVV ,
(VV, -
)VV- .
>VV/ 0
$numVV1 2
;VV2 3
}WW 
catchXX 
(XX	 

	ExceptionXX
 
exXX 
)XX 
{YY 
SerilogZZ 
.ZZ 
LogZZ 
.ZZ 
ErrorZZ 
(ZZ 
$"ZZ 
$strZZ -
{ZZ- .
postZZ. 2
.ZZ2 3
TitleZZ3 8
}ZZ8 9
$strZZ9 ;
{ZZ; <
exZZ< >
.ZZ> ?
MessageZZ? F
}ZZF G
"ZZG H
)ZZH I
;ZZI J
return[[ 

false[[ 
;[[ 
}\\ 
}]] 
asyncaa 
Taskaa 
<aa 
Postaa 
>aa 
GetPostaa 
(aa 
SyndicationItemaa *
syndicationItemaa+ :
)aa: ;
{bb 
Postcc 
postcc 
=cc 
newcc 
Postcc 
(cc 
)cc 
{dd 
AuthorIdee 
=ee 
_userIdee 
,ee 
PostTypeff 
=ff 
PostTypeff 
.ff 
Postff 
,ff 
Titlegg 	
=gg
 
syndicationItemgg 
.gg 
Titlegg !
.gg! "
Textgg" &
,gg& '
Slughh 
=hh	 

awaithh 
GetSlughh 
(hh 
syndicationItemhh (
.hh( )
Titlehh) .
.hh. /
Texthh/ 3
)hh3 4
,hh4 5
Descriptionii 
=ii 
GetDescriptionii  
(ii  !
syndicationItemii! 0
.ii0 1
Titleii1 6
.ii6 7
Textii7 ;
)ii; <
,ii< =
Contentjj 
=jj 
syndicationItemjj 
.jj 
Summaryjj %
.jj% &
Textjj& *
,jj* +
Coverkk 	
=kk
 
	Constantskk 
.kk 
DefaultCoverkk "
,kk" #
	Publishedll 
=ll 
syndicationItemll 
.ll  
PublishDatell  +
.ll+ ,
DateTimell, 4
,ll4 5
DateCreatedmm 
=mm 
syndicationItemmm !
.mm! "
PublishDatemm" -
.mm- .
DateTimemm. 6
,mm6 7
DateUpdatednn 
=nn 
syndicationItemnn !
.nn! "
LastUpdatedTimenn" 1
.nn1 2
DateTimenn2 :
}oo 
;oo 
ifqq 
(qq 
syndicationItemqq 
.qq 
ElementExtensionsqq (
!=qq) +
nullqq, 0
)qq0 1
{rr 
foreachss 
(ss '
SyndicationElementExtensionss (
extss) ,
inss- /
syndicationItemss0 ?
.ss? @
ElementExtensionsss@ Q
)ssQ R
{tt 
ifuu 
(uu 	
extuu	 
.uu 
	GetObjectuu 
<uu 
XElementuu 
>uu  
(uu  !
)uu! "
.uu" #
Nameuu# '
.uu' (
	LocalNameuu( 1
==uu2 4
$struu5 >
)uu> ?
postvv 

.vv
 
Descriptionvv 
=vv 
GetDescriptionvv '
(vv' (
extvv( +
.vv+ ,
	GetObjectvv, 5
<vv5 6
XElementvv6 >
>vv> ?
(vv? @
)vv@ A
.vvA B
ValuevvB G
)vvG H
;vvH I
ifxx 
(xx 	
extxx	 
.xx 
	GetObjectxx 
<xx 
XElementxx 
>xx  
(xx  !
)xx! "
.xx" #
Namexx# '
.xx' (
	LocalNamexx( 1
==xx2 4
$strxx5 <
)xx< =
postyy 

.yy
 
Coveryy 
=yy 
extyy 
.yy 
	GetObjectyy  
<yy  !
XElementyy! )
>yy) *
(yy* +
)yy+ ,
.yy, -
Valueyy- 2
;yy2 3
}zz 
}{{ 
if}} 
(}} 
syndicationItem}} 
.}}  

Categories}}  *
!=}}+ -
null}}. 2
)}}2 3
{~~ 
if 
( 
post 
. 
PostCategories '
==( *
null+ /
)/ 0
post
ÄÄ 
.
ÄÄ 
PostCategories
ÄÄ '
=
ÄÄ( )
new
ÄÄ* -
List
ÄÄ. 2
<
ÄÄ2 3
PostCategory
ÄÄ3 ?
>
ÄÄ? @
(
ÄÄ@ A
)
ÄÄA B
;
ÄÄB C
foreach
ÇÇ 
(
ÇÇ 
var
ÇÇ 
category
ÇÇ %
in
ÇÇ& (
syndicationItem
ÇÇ) 8
.
ÇÇ8 9

Categories
ÇÇ9 C
)
ÇÇC D
{
ÉÉ 
post
ÑÑ 
.
ÑÑ 
PostCategories
ÑÑ '
.
ÑÑ' (
Add
ÑÑ( +
(
ÑÑ+ ,
new
ÑÑ, /
PostCategory
ÑÑ0 <
(
ÑÑ< =
)
ÑÑ= >
{
ÖÖ 
Category
ÜÜ  
=
ÜÜ! "
new
ÜÜ# &
Category
ÜÜ' /
{
áá 
Content
àà #
=
àà$ %
category
àà& .
.
àà. /
Name
àà/ 3
,
àà3 4
DateCreated
ââ '
=
ââ( )
DateTime
ââ* 2
.
ââ2 3
UtcNow
ââ3 9
,
ââ9 :
DateUpdated
ää '
=
ää( )
DateTime
ää* 2
.
ää2 3
UtcNow
ää3 9
}
ãã 
}
åå 
)
åå 
;
åå 
}
çç 
}
éé 
return
êê 
post
êê 
;
êê 
}
ëë 
async
ìì 
Task
ìì 
ImportImages
ìì 
(
ìì 
Post
ìì 
post
ìì #
)
ìì# $
{
îî 
string
ïï 	
rgx
ïï
 
=
ïï 
$str
ïï F
;
ïïF G
if
óó 
(
óó 
string
óó 
.
óó 
IsNullOrEmpty
óó 
(
óó 
post
óó  
.
óó  !
Content
óó! (
)
óó( )
)
óó) *
return
òò 

;
òò
 
if
öö 
(
öö 
post
öö 

.
öö
 
Cover
öö 
!=
öö 
	Constants
öö 
.
öö 
DefaultCover
öö *
)
öö* +
{
õõ 
var
úú 
path
úú 
=
úú 
string
úú 
.
úú 
Format
úú 
(
úú 
$str
úú *
,
úú* +
post
úú, 0
.
úú0 1
AuthorId
úú1 9
,
úú9 :
post
úú; ?
.
úú? @
	Published
úú@ I
.
úúI J
Year
úúJ N
,
úúN O
post
úúP T
.
úúT U
	Published
úúU ^
.
úú^ _
Month
úú_ d
)
úúd e
;
úúe f
var
ûû 
mdTag
ûû 
=
ûû 
await
ûû 
_storageProvider
ûû &
.
ûû& '
UploadFromWeb
ûû' 4
(
ûû4 5
new
ûû5 8
Uri
ûû9 <
(
ûû< =
post
ûû= A
.
ûûA B
Cover
ûûB G
)
ûûG H
,
ûûH I
_webRoot
ûûJ R
,
ûûR S
path
ûûT X
)
ûûX Y
;
ûûY Z
if
üü 
(
üü 
mdTag
üü 
.
üü 
Length
üü 
>
üü 
$num
üü 
&&
üü 
mdTag
üü !
.
üü! "
IndexOf
üü" )
(
üü) *
$str
üü* -
)
üü- .
>
üü/ 0
$num
üü1 2
)
üü2 3
post
†† 	
.
††	 

Cover
††
 
=
†† 
mdTag
†† 
.
†† 
	Substring
†† !
(
††! "
mdTag
††" '
.
††' (
IndexOf
††( /
(
††/ 0
$str
††0 3
)
††3 4
+
††5 6
$num
††7 8
)
††8 9
.
††9 :
Replace
††: A
(
††A B
$str
††B E
,
††E F
$str
††G I
)
††I J
;
††J K
}
°° 
var
££ 
matches
££ 
=
££ 
Regex
££ 
.
££ 
Matches
££ 
(
££ 
post
££ #
.
££# $
Content
££$ +
,
££+ ,
rgx
££- 0
,
££0 1
RegexOptions
££2 >
.
££> ?

IgnoreCase
££? I
|
££J K
RegexOptions
££L X
.
££X Y

Singleline
££Y c
)
££c d
;
££d e
if
•• 
(
•• 
matches
•• 
==
•• 
null
•• 
)
•• 
return
¶¶ 

;
¶¶
 
foreach
®® 

(
®® 
Match
®® 
m
®® 
in
®® 
matches
®® 
)
®® 
{
©© 
try
™™ 
{
´´ 
var
¨¨ 
tag
¨¨	 
=
¨¨ 
m
¨¨ 
.
¨¨ 
Groups
¨¨ 
[
¨¨ 
$num
¨¨ 
]
¨¨ 
.
¨¨ 
Value
¨¨  
;
¨¨  !
var
≠≠ 
path
≠≠	 
=
≠≠ 
string
≠≠ 
.
≠≠ 
Format
≠≠ 
(
≠≠ 
$str
≠≠ +
,
≠≠+ ,
post
≠≠- 1
.
≠≠1 2
AuthorId
≠≠2 :
,
≠≠: ;
post
≠≠< @
.
≠≠@ A
	Published
≠≠A J
.
≠≠J K
Year
≠≠K O
,
≠≠O P
post
≠≠Q U
.
≠≠U V
	Published
≠≠V _
.
≠≠_ `
Month
≠≠` e
)
≠≠e f
;
≠≠f g
var
ØØ 
uri
ØØ	 
=
ØØ 
Regex
ØØ 
.
ØØ 
Match
ØØ 
(
ØØ 
tag
ØØ 
,
ØØ 
$str
ØØ  @
,
ØØ@ A
RegexOptions
ØØB N
.
ØØN O

IgnoreCase
ØØO Y
)
ØØY Z
.
ØØZ [
Groups
ØØ[ a
[
ØØa b
$num
ØØb c
]
ØØc d
.
ØØd e
Value
ØØe j
;
ØØj k
uri
∞∞ 
=
∞∞	 

ValidateUrl
∞∞ 
(
∞∞ 
uri
∞∞ 
)
∞∞ 
;
∞∞ 
var
±± 
mdTag
±±	 
=
±± 
$str
±± 
;
±± 
if
≥≥ 
(
≥≥ 	
uri
≥≥	 
.
≥≥ 
Contains
≥≥ 
(
≥≥ 
$str
≥≥ "
)
≥≥" #
)
≥≥# $
mdTag
¥¥ 
=
¥¥ 
await
¥¥ 
_storageProvider
¥¥ $
.
¥¥$ %
UploadBase64Image
¥¥% 6
(
¥¥6 7
uri
¥¥7 :
,
¥¥: ;
_webRoot
¥¥< D
,
¥¥D E
path
¥¥F J
)
¥¥J K
;
¥¥K L
else
µµ 	
{
∂∂ 
try
∑∑ 	
{
∏∏ 
mdTag
ππ 
=
ππ 
await
ππ 
_storageProvider
ππ %
.
ππ% &
UploadFromWeb
ππ& 3
(
ππ3 4
new
ππ4 7
Uri
ππ8 ;
(
ππ; <
uri
ππ< ?
)
ππ? @
,
ππ@ A
_webRoot
ππB J
,
ππJ K
path
ππL P
)
ππP Q
;
ππQ R
}
∫∫ 
catch
ªª 
{
ºº 
if
ΩΩ 	
(
ΩΩ
 
uri
ΩΩ 
.
ΩΩ 

StartsWith
ΩΩ 
(
ΩΩ 
$str
ΩΩ "
)
ΩΩ" #
)
ΩΩ# $
{
ææ 
mdTag
øø 
=
øø 
await
øø 
_storageProvider
øø &
.
øø& '
UploadFromWeb
øø' 4
(
øø4 5
new
øø5 8
Uri
øø9 <
(
øø< =
uri
øø= @
.
øø@ A
Replace
øøA H
(
øøH I
$str
øøI Q
,
øøQ R
$str
øøS Z
)
øøZ [
)
øø[ \
,
øø\ ]
_webRoot
øø^ f
,
øøf g
path
øøh l
)
øøl m
;
øøm n
}
¿¿ 
}
¡¡ 
}
¬¬ 
post
√√ 	
.
√√	 

Content
√√
 
=
√√ 
post
√√ 
.
√√ 
Content
√√  
.
√√  !
ReplaceIgnoreCase
√√! 2
(
√√2 3
tag
√√3 6
,
√√6 7
mdTag
√√8 =
)
√√= >
;
√√> ?
}
ƒƒ 
catch
≈≈ 	
(
≈≈
 
	Exception
≈≈ 
ex
≈≈ 
)
≈≈ 
{
∆∆ 
Serilog
«« 
.
«« 
Log
«« 
.
«« 
Error
«« 
(
«« 
$"
«« 
$str
«« 1
{
««1 2
ex
««2 4
.
««4 5
Message
««5 <
}
««< =
"
««= >
)
««> ?
;
««? @
}
»» 
}
…… 
}
   
async
ÃÃ 
Task
ÃÃ 
ImportFiles
ÃÃ 
(
ÃÃ 
Post
ÃÃ 
post
ÃÃ "
)
ÃÃ" #
{
ÕÕ 
var
ŒŒ 
rgx
ŒŒ 

=
ŒŒ 
$str
ŒŒ /
;
ŒŒ/ 0
string
œœ 	
[
œœ	 

]
œœ
 
exts
œœ 
=
œœ 
new
œœ 
string
œœ 
[
œœ 
]
œœ 
{
œœ  !
$str
œœ" '
,
œœ' (
$str
œœ) -
,
œœ- .
$str
œœ/ 4
,
œœ4 5
$str
œœ6 ;
,
œœ; <
$str
œœ= B
,
œœB C
$str
œœD J
,
œœJ K
$str
œœL Q
,
œœQ R
$str
œœS Y
,
œœY Z
$str
œœ[ `
,
œœ` a
$str
œœb g
,
œœg h
$str
œœi n
}
œœo p
;
œœp q
if
—— 
(
—— 
string
—— 
.
—— 
IsNullOrEmpty
—— 
(
—— 
post
——  
.
——  !
Content
——! (
)
——( )
)
——) *
return
““ 

;
““
 
MatchCollection
‘‘ 
matches
‘‘ 
=
‘‘ 
Regex
‘‘ "
.
‘‘" #
Matches
‘‘# *
(
‘‘* +
post
‘‘+ /
.
‘‘/ 0
Content
‘‘0 7
,
‘‘7 8
rgx
‘‘9 <
,
‘‘< =
RegexOptions
‘‘> J
.
‘‘J K

IgnoreCase
‘‘K U
|
‘‘V W
RegexOptions
‘‘X d
.
‘‘d e

Singleline
‘‘e o
)
‘‘o p
;
‘‘p q
if
÷÷ 
(
÷÷ 
matches
÷÷ 
!=
÷÷ 
null
÷÷ 
)
÷÷ 
{
◊◊ 
foreach
ÿÿ 
(
ÿÿ 
Match
ÿÿ 
m
ÿÿ 
in
ÿÿ 
matches
ÿÿ 
)
ÿÿ  
{
ŸŸ 
try
⁄⁄ 
{
€€ 
var
‹‹ 	
tag
‹‹
 
=
‹‹ 
m
‹‹ 
.
‹‹ 
Value
‹‹ 
;
‹‹ 
var
›› 	
src
››
 
=
›› 
XElement
›› 
.
›› 
Parse
›› 
(
›› 
tag
›› "
)
››" #
.
››# $
	Attribute
››$ -
(
››- .
$str
››. 4
)
››4 5
.
››5 6
Value
››6 ;
;
››; <
var
ﬁﬁ 	
mdTag
ﬁﬁ
 
=
ﬁﬁ 
$str
ﬁﬁ 
;
ﬁﬁ 
foreach
‡‡ 
(
‡‡ 
var
‡‡ 
ext
‡‡ 
in
‡‡ 
exts
‡‡ 
)
‡‡ 
{
·· 
if
‚‚ 	
(
‚‚
 
src
‚‚ 
.
‚‚ 
ToLower
‚‚ 
(
‚‚ 
)
‚‚ 
.
‚‚ 
EndsWith
‚‚ !
(
‚‚! "
$"
‚‚" $
$str
‚‚$ %
{
‚‚% &
ext
‚‚& )
}
‚‚) *
"
‚‚* +
)
‚‚+ ,
)
‚‚, -
{
„„ 
var
‰‰ 
uri
‰‰ 
=
‰‰ 
ValidateUrl
‰‰ 
(
‰‰ 
src
‰‰ !
)
‰‰! "
;
‰‰" #
var
ÂÂ 
path
ÂÂ 
=
ÂÂ 
string
ÂÂ 
.
ÂÂ 
Format
ÂÂ  
(
ÂÂ  !
$str
ÂÂ! .
,
ÂÂ. /
post
ÂÂ0 4
.
ÂÂ4 5
AuthorId
ÂÂ5 =
,
ÂÂ= >
post
ÂÂ? C
.
ÂÂC D
	Published
ÂÂD M
.
ÂÂM N
Year
ÂÂN R
,
ÂÂR S
post
ÂÂT X
.
ÂÂX Y
	Published
ÂÂY b
.
ÂÂb c
Month
ÂÂc h
)
ÂÂh i
;
ÂÂi j
mdTag
ÁÁ 
=
ÁÁ 
await
ÁÁ 
_storageProvider
ÁÁ &
.
ÁÁ& '
UploadFromWeb
ÁÁ' 4
(
ÁÁ4 5
new
ÁÁ5 8
Uri
ÁÁ9 <
(
ÁÁ< =
uri
ÁÁ= @
)
ÁÁ@ A
,
ÁÁA B
_webRoot
ÁÁC K
,
ÁÁK L
path
ÁÁM Q
)
ÁÁQ R
;
ÁÁR S
if
ÈÈ 

(
ÈÈ 
mdTag
ÈÈ 
.
ÈÈ 

StartsWith
ÈÈ 
(
ÈÈ 
$str
ÈÈ  
)
ÈÈ  !
)
ÈÈ! "
mdTag
ÍÍ	 
=
ÍÍ 
mdTag
ÍÍ 
.
ÍÍ 
	Substring
ÍÍ  
(
ÍÍ  !
$num
ÍÍ! "
)
ÍÍ" #
;
ÍÍ# $
post
ÏÏ 
.
ÏÏ 
Content
ÏÏ 
=
ÏÏ 
post
ÏÏ 
.
ÏÏ 
Content
ÏÏ #
.
ÏÏ# $
ReplaceIgnoreCase
ÏÏ$ 5
(
ÏÏ5 6
m
ÏÏ6 7
.
ÏÏ7 8
Value
ÏÏ8 =
,
ÏÏ= >
mdTag
ÏÏ? D
)
ÏÏD E
;
ÏÏE F
}
ÌÌ 
}
ÓÓ 
}
ÔÔ 
catch
 

(
 
	Exception
 
ex
 
)
 
{
ÒÒ 
Serilog
ÚÚ 
.
ÚÚ 
Log
ÚÚ 
.
ÚÚ 
Error
ÚÚ 
(
ÚÚ 
$"
ÚÚ 
$str
ÚÚ 1
{
ÚÚ1 2
ex
ÚÚ2 4
.
ÚÚ4 5
Message
ÚÚ5 <
}
ÚÚ< =
"
ÚÚ= >
)
ÚÚ> ?
;
ÚÚ? @
}
ÛÛ 
}
ÙÙ 
}
ıı 
}
ˆˆ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 
string
¯¯ 
>
¯¯ 
GetSlug
¯¯ 
(
¯¯ 
string
¯¯ #
title
¯¯$ )
)
¯¯) *
{
˘˘ 
string
˙˙ 	
slug
˙˙
 
=
˙˙ 
title
˙˙ 
.
˙˙ 
ToSlug
˙˙ 
(
˙˙ 
)
˙˙ 
;
˙˙  
Post
˚˚ 
post
˚˚ 
=
˚˚ 
await
˚˚ 

_dbContext
˚˚ 
.
˚˚  
Posts
˚˚  %
.
˚˚% &"
SingleOrDefaultAsync
˚˚& :
(
˚˚: ;
p
˚˚; <
=>
˚˚= ?
p
˚˚@ A
.
˚˚A B
Slug
˚˚B F
==
˚˚G I
slug
˚˚J N
)
˚˚N O
;
˚˚O P
if
˝˝ 
(
˝˝ 
post
˝˝ 
==
˝˝ 
null
˝˝ 
)
˝˝ 
return
˛˛ 

slug
˛˛ 
;
˛˛ 
for
ÄÄ 
(
ÄÄ 
int
ÄÄ 
i
ÄÄ 
=
ÄÄ 
$num
ÄÄ 
;
ÄÄ 
i
ÄÄ 
<
ÄÄ 
$num
ÄÄ 
;
ÄÄ 
i
ÄÄ 
++
ÄÄ 
)
ÄÄ  
{
ÅÅ 
post
ÇÇ 
=
ÇÇ	 

await
ÇÇ 

_dbContext
ÇÇ 
.
ÇÇ 
Posts
ÇÇ !
.
ÇÇ! "
AsNoTracking
ÇÇ" .
(
ÇÇ. /
)
ÇÇ/ 0
.
ÉÉ 
SingleAsync
ÉÉ 
(
ÉÉ 
p
ÉÉ 
=>
ÉÉ 
p
ÉÉ 
.
ÉÉ 
Slug
ÉÉ 
==
ÉÉ  
$"
ÉÉ! #
{
ÉÉ# $
slug
ÉÉ$ (
}
ÉÉ( )
{
ÉÉ) *
i
ÉÉ* +
}
ÉÉ+ ,
"
ÉÉ, -
)
ÉÉ- .
;
ÉÉ. /
if
ÖÖ 
(
ÖÖ 
post
ÖÖ 
==
ÖÖ 
null
ÖÖ 
)
ÖÖ 
return
ÜÜ 
await
ÜÜ 
Task
ÜÜ 
.
ÜÜ 

FromResult
ÜÜ !
(
ÜÜ! "
slug
ÜÜ" &
+
ÜÜ' (
i
ÜÜ) *
.
ÜÜ* +
ToString
ÜÜ+ 3
(
ÜÜ3 4
)
ÜÜ4 5
)
ÜÜ5 6
;
ÜÜ6 7
}
áá 
return
àà 	
slug
àà
 
;
àà 
}
ââ 
string
ãã 
ValidateUrl
ãã	 
(
ãã 
string
ãã 
link
ãã  
)
ãã  !
{
åå 
var
çç 
url
çç 

=
çç 
link
çç 
;
çç 
var
èè 
baseUrl
èè 
=
èè 
_baseUrl
èè 
.
èè 
ToString
èè "
(
èè" #
)
èè# $
;
èè$ %
if
êê 
(
êê 
baseUrl
êê 
.
êê 
EndsWith
êê 
(
êê 
$str
êê 
)
êê 
)
êê 
baseUrl
ëë 
=
ëë 
baseUrl
ëë 
.
ëë 
	Substring
ëë 
(
ëë  
$num
ëë  !
,
ëë! "
baseUrl
ëë# *
.
ëë* +
Length
ëë+ 1
-
ëë2 3
$num
ëë4 5
)
ëë5 6
;
ëë6 7
if
ìì 
(
ìì 
url
ìì 

.
ìì
 

StartsWith
ìì 
(
ìì 
$str
ìì 
)
ìì 
)
ìì 
url
îî 
=
îî 	
url
îî
 
.
îî 
Replace
îî 
(
îî 
$str
îî 
,
îî 
baseUrl
îî "
)
îî" #
;
îî# $
if
ññ 
(
ññ 
url
ññ 

.
ññ
 

StartsWith
ññ 
(
ññ 
$str
ññ 
)
ññ 
)
ññ 
url
óó 
=
óó 	
$"
óó
 
{
óó 
baseUrl
óó 
}
óó 
{
óó 
url
óó 
}
óó 
"
óó 
;
óó 
if
ôô 
(
ôô 
!
ôô 
(
ôô 	
url
ôô	 
.
ôô 

StartsWith
ôô 
(
ôô 
$str
ôô 
)
ôô  
||
ôô! #
url
ôô$ '
.
ôô' (

StartsWith
ôô( 2
(
ôô2 3
$str
ôô3 ;
)
ôô; <
)
ôô< =
)
ôô= >
url
öö 
=
öö 	
$"
öö
 
{
öö 
baseUrl
öö 
}
öö 
$str
öö 
{
öö 
url
öö 
}
öö 
"
öö 
;
öö 
return
úú 	
url
úú
 
;
úú 
}
ùù 
string
üü 
GetDescription
üü	 
(
üü 
string
üü 
description
üü *
)
üü* +
{
†† 
description
°° 
=
°° 
description
°° 
.
°° 
	StripHtml
°° &
(
°°& '
)
°°' (
;
°°( )
if
¢¢ 
(
¢¢ 
description
¢¢ 
.
¢¢ 
Length
¢¢ 
>
¢¢ 
$num
¢¢ 
)
¢¢  
description
££ 
=
££ 
description
££ 
.
££ 
	Substring
££ '
(
££' (
$num
££( )
,
££) *
$num
££+ .
)
££. /
+
££0 1
$str
££2 7
;
££7 8
return
§§ 	
description
§§
 
;
§§ 
}
•• 
}
®® 
}©© Ó
uC:\Users\jay.ahir\Desktop\Projects\DOTNET\Blogifier-main\Blogifier-main\src\Blogifier.Core\Providers\ThemeProvider.cs
	namespace 	
	Blogifier
 
. 
Core 
. 
	Providers "
{ 
public 
	interface 
IThemeProvider  
{ 
Task 
< 

Dictionary 
< 
string 
, 
string  
>  !
>! "
GetSettings# .
(. /
string/ 5
theme6 ;
); <
;< =
}		 
public 
class 
ThemeProvider 
: 
IThemeProvider ,
{ 
public 
async	 
Task 
< 

Dictionary 
< 
string %
,% &
string' -
>- .
>. /
GetSettings0 ;
(; <
string< B
themeC H
)H I
{ 
var 
settings 
= 
new 

Dictionary  
<  !
string! '
,' (
string) /
>/ 0
(0 1
)1 2
;2 3
settings 
. 
Add 
( 
$str 
, 
$str +
)+ ,
;, -
settings 
. 
Add 
( 
$str 
, 
$str +
)+ ,
;, -
return 	
await
 
Task 
. 

FromResult 
(  
settings  (
)( )
;) *
} 
} 
} 